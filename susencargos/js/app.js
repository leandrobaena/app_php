Ext.define("susencargos.model.Application",{extend:"Ext.data.Model",fields:[{name:"idapplication",type:"int"},{name:"name",type:"string"}]}),Ext.define("susencargos.model.Group",{extend:"Ext.data.Model",fields:[{name:"idgroup",type:"int"},{name:"name",type:"string"},{name:"active",type:"boolean",defaultValue:!1}]}),Ext.define("susencargos.model.User",{extend:"Ext.data.Model",fields:[{name:"iduser",type:"int"},{name:"login",type:"string"},{name:"name",type:"string"},{name:"active",type:"boolean",defaultValue:!1},{name:"email",type:"string"},{name:"lastLogin",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"logged",type:"boolean",defaultValue:!1}]}),Ext.define("susencargos.model.Module",{extend:"Ext.data.Model",fields:[{name:"idmodule",type:"int",defaultValue:0},{name:"name",type:"string"},{name:"idparent",type:"int",allowNull:!0},{name:"class",type:"string"},{name:"script",type:"string"},{name:"application",reference:"susencargos.model.Application"}],idProperty:"idmodule"}),Ext.define("susencargos.model.Customer",{extend:"Ext.data.Model",fields:[{name:"idcustomer",type:"int"},{name:"name",type:"string"},{name:"taxid",type:"string"},{name:"address",type:"string"},{name:"phone",type:"string"},{name:"city",reference:"susencargos.model.City"},{name:"user",reference:"susencargos.model.User"},{name:"contact",type:"string"}]}),Ext.define("susencargos.model.Zone",{extend:"Ext.data.Model",fields:[{name:"idzone",type:"int"},{name:"name",type:"string"}]}),Ext.define("susencargos.model.City",{extend:"Ext.data.Model",fields:[{name:"idcity",type:"int"},{name:"name",type:"string"},{name:"zone",reference:"susencargos.model.Zone"}]}),Ext.define("susencargos.model.StateTracking",{extend:"Ext.data.Model",fields:[{name:"idstatetracking",type:"int"},{name:"name",type:"string"}]}),Ext.define("susencargos.model.Package",{extend:"Ext.data.Model",fields:[{name:"idpackage",type:"int"},{name:"date",type:"date",dateFormat:"Y-m-d"},{name:"citySource",reference:"susencargos.model.City"},{name:"cityDestination",reference:"susencargos.model.City"},{name:"customer",reference:"susencargos.model.Customer"},{name:"nameTo",type:"string"},{name:"addressTo",type:"string"},{name:"phoneTo",type:"string"},{name:"content",type:"string"},{name:"observations",type:"string"},{name:"weight",type:"float"},{name:"volumen",type:"float"},{name:"amount",type:"int"},{name:"declaredValue",type:"float"},{name:"shippingValue",type:"float"},{name:"managementValue",type:"float"},{name:"totalValue",type:"float"},{name:"reference",type:"string"},{name:"payType",reference:"susencargos.model.PayType"},{name:"pacakgeType",reference:"susencargos.model.PackageType"}]}),Ext.define("susencargos.model.PayType",{extend:"Ext.data.Model",fields:[{name:"idpaytype",type:"int"},{name:"name",type:"string"}]}),Ext.define("susencargos.model.PackageType",{extend:"Ext.data.Model",fields:[{name:"idpackagetype",type:"int"},{name:"name",type:"string"}]}),Ext.define("susencargos.model.LevelAccess",{extend:"Ext.data.Model",fields:[{name:"idlevelaccess",type:"int"},{name:"name",type:"string"}]}),Ext.define("susencargos.model.GroupModule",{extend:"Ext.data.Model",fields:[{name:"idgroupmodule",type:"int"},{name:"group",reference:"susencargos.model.Group"},{name:"module",reference:"susencargos.model.Module"},{name:"levelAccess",reference:"susencargos.model.LevelAccess"}]}),Ext.define("susencargos.model.Tracking",{extend:"Ext.data.Model",fields:[{name:"idtracking",type:"int"},{name:"date",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"package",reference:"susencargos.model.Package"},{name:"state",reference:"susencargos.model.StateTracking"}]}),Ext.define("susencargos.model.AuxReceivePackage",{extend:"Ext.data.Model",fields:[{name:"tracking",type:"string"}],idProperty:"tracking"}),Ext.define("susencargos.store.MainStoreRemote",{extend:"Ext.data.Store",remoteSort:!0,remoteFilter:!0,object:"",proxy:{type:"ajax",url:"stores/list_objects.php",extraParams:{object:""},reader:{type:"json",root:"data",successProperty:"success"}},constructor:function(e){e=Ext.apply({proxy:{extraParams:{object:e.object}}},e),this.callParent([e])},listeners:{load:function(e,t,o){o||Ext.MessageBox.show({title:"Error",msg:"Sesión expirada",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}}}),Ext.define("susencargos.store.MainStoreLocal",{extend:"Ext.data.Store",object:"",proxy:{type:"ajax",url:"stores/list_objects.php",extraParams:{object:""},reader:{type:"json",root:"data",successProperty:"success"}},constructor:function(e){e=Ext.apply({proxy:{extraParams:{object:e.object}}},e),this.callParent([e])},listeners:{load:function(e,t,o){o||Ext.MessageBox.show({title:"Error",msg:"Sesión expirada",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}}}),Ext.Loader.setConfig({enabled:!0}),Ext.Loader.setPath("Ext.ux","./js/extjs/build/ux"),Ext.apply(Ext.form.field.VTypes,{daterange:function(e,t){var o=t.parseDate(e);if(!o)return!1;if(!t.startDateField||this.dateRangeMax&&o.getTime()==this.dateRangeMax.getTime()){if(t.endDateField&&(!this.dateRangeMin||o.getTime()!=this.dateRangeMin.getTime())){var s=t.up("form").down("#"+t.endDateField);s.setMinValue(o),s.validate(),this.dateRangeMin=o}}else{var i=t.up("form").down("#"+t.startDateField);i.setMaxValue(o),i.validate(),this.dateRangeMax=o}return!0},daterangeText:"La fecha de inicio debe ser inferior a la fecha de fin",password:function(e,t){if(t.initialPassField){var o=t.up("form").down("#"+t.initialPassField);return e==o.getValue()}return!0},passwordText:"La contraseña y la confirmación no coinciden"}),Ext.create("Ext.app.Controller",{control:{"menu menuitem[action=users]":{click:"users"},"menu menuitem[action=groups]":{click:"groups"},"menu menuitem[action=apps]":{click:"apps"},"menu menuitem[action=customers]":{click:"customers"},"menu menuitem[action=zones]":{click:"zones"},"menu menuitem[action=cities]":{click:"cities"},"menu menuitem[action=templates]":{click:"templates"},"menu menuitem[action=levelsAccess]":{click:"levelsAccess"},"menu menuitem[action=statesTracking]":{click:"statesTracking"},"menu menuitem[action=packageTypes]":{click:"packageTypes"},"menu menuitem[action=packages]":{click:"packages"},"menu menuitem[action=enterPackage]":{click:"enterPackage"},"menu menuitem[action=receivePackages]":{click:"receivePackages"},"menu menuitem[action=rptPackages]":{click:"rptPackages"},"menu menuitem[action=typesResource]":{click:"typesResource"},"menu menuitem[action=changePass]":{click:"changePass"},"menu menuitem[action=logout]":{click:"logout"}},users:function(){this.openGrid("listUsers")},groups:function(){this.openGrid("listGroups")},apps:function(){this.openGrid("listApplications")},customers:function(){this.openGrid("listCustomers")},zones:function(){this.openGrid("listZones")},cities:function(){this.openGrid("listCities")},templates:function(){this.openGrid("listTemplates")},statesTracking:function(){this.openGrid("listStatesTracking")},packageTypes:function(){this.openGrid("listPackageTypes")},packages:function(){this.openGrid("listPackages")},levelsAccess:function(){this.openGrid("listLevelsAccess")},enterPackage:function(){Ext.getStore("CityL").load({params:{start:0,limit:1e3},callback:function(){Ext.getStore("CustomerL").load({params:{start:0,limit:1e3},callback:function(){Ext.getStore("PayTypeL").load({callback:function(){Ext.getStore("PackageTypeL").load({callback:function(){var e=Ext.widget("formPackage").down("form");e.loadRecord(Ext.create("susencargos.model.Package")),e.getForm().findField("amount").setValue(1),e.getForm().findField("declaredValue").setValue(4e5),e.getForm().findField("idpackagetype").setValue(1),e.getForm().findField("weight").setValue(30),e.getForm().findField("idpaytype").setValue(1),e.getForm().findField("date").setValue(Ext.Date.format(new Date,"Y-m-d"))}})}})}})}})},receivePackages:function(){Ext.widget("formReceivePackage")},rptPackages:function(){Ext.Ajax.request({url:"stores/reports.php",params:{object:"packages"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:"Reporte generado",msg:"El reporte fue generado con éxito haga clic en el botón para descargarlo",buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){window.open(t.msg.body)}})},failed:function(e,t){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})},changePass:function(){Ext.create("Ext.window.Window",{title:"Cambiar contraseña",iconCls:"edit",alias:"widget.formChangePass",width:300,modal:!0,layout:"fit",autoShow:!0,items:[{xtype:"form",url:"update/user_pass.php",defaults:{labelAlign:"right"},frame:!0,items:[{xtype:"hiddenfield",name:"iduser",value:0},{xtype:"textfield",name:"pass",itemId:"pass",vtype:"alphanum",value:"",allowBlank:!1,inputType:"password",anchor:"90%",fieldLabel:"* Contraseña"},{xtype:"textfield",name:"confirm",value:"",allowBlank:!1,vtype:"password",initialPassField:"pass",inputType:"password",anchor:"90%",fieldLabel:"* Confirmación"}],buttons:[{text:"Guardar",handler:function(e){e.up("form").getForm().isValid()?e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,o){var s=Ext.JSON.decode(o.response.responseText);Ext.MessageBox.show({title:s.msg.title,msg:s.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO}),e.up("window").close()},failure:function(t,o){var s=Ext.JSON.decode(o.response.responseText);Ext.MessageBox.show({title:s.msg.title,msg:s.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR}),e.up("window").close()}}):Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},{text:"Cancelar",handler:function(e){e.up("window").close()}}],bbar:["* Campos obligatorios"]}]})},logout:function(){window.location="logout.php"},openGrid:function(e){var t=!1,o=Ext.getCmp("contenido"),s=null;Ext.each(o.items.items,function(o){o.alias=="widget."+e&&(t=!0,s=o)}),t||(s=Ext.widget(e),o.add(s)),Ext.getCmp("contenido").setActiveTab(s)}}),Ext.create("Ext.app.Controller",{control:{"listApplications button[action=insert]":{click:"insert"},"listApplications button[action=clean]":{click:"cleanFilters"},listApplications:{itemdblclick:"editDbl"},"listApplications actioncolumn[action=groups]":{click:"groups"},"listApplications actioncolumn[action=modules]":{click:"modules"},"listApplications actioncolumn[action=edit]":{click:"edit"},"listApplications actioncolumn[action=remove]":{click:"remove"},"formApplication button[action=cancel]":{click:"cancel"},"formApplication button[action=save]":{click:"save"},"listGroupsApplication grid#gridDestination dataview":{drop:"insertGroup"},"listGroupsApplication grid#gridSource dataview":{drop:"removeGroup"},"listModules button[action=insert]":{click:"insertModule"},"listModules button[action=clean]":{click:"cleanFiltersModules"},listModules:{itemdblclick:"editDblModule"},"listModules actioncolumn[action=groups]":{click:"groupsModule"},"listModules actioncolumn[action=edit]":{click:"editModule"},"listModules actioncolumn[action=remove]":{click:"removeModule"},"formModule button[action=cancel]":{click:"cancel"},"formModule button[action=save]":{click:"saveModule"},"listGroupsModule button[action=insert]":{click:"insertGroupModule"},"listGroupsModule button[action=clean]":{click:"cleanFiltersGroupsModule"},listGroupsModule:{itemdblclick:"editDblGroupModule"},"listGroupsModule actioncolumn[action=edit]":{click:"editGroupModule"},"listGroupsModule actioncolumn[action=remove]":{click:"removeGroupModule"},"formGroupModule button[action=cancel]":{click:"cancel"},"formGroupModule button[action=save]":{click:"saveGroupModule"}},groups:function(e,t,o){Ext.getStore("GroupsApplication").getProxy().setExtraParam("idapplication",e.getStore().getAt(o).get("idapplication")),Ext.getStore("GroupsApplication").load(),Ext.getStore("NoGroupsApplication").getProxy().setExtraParam("idapplication",e.getStore().getAt(o).get("idapplication")),Ext.getStore("NoGroupsApplication").load(),panel=Ext.widget("listGroupsApplication"),panel.setTitle("Listado grupos asignados a la aplicación "+e.getStore().getAt(o).get("name"))},modules:function(e,t,o){Ext.getStore("Module").getProxy().setExtraParam("idapplication",e.getStore().getAt(o).get("idapplication")),Ext.getStore("Module").load(),Ext.getStore("ModuleL").getProxy().setExtraParam("idapplication",e.getStore().getAt(o).get("idapplication")),Ext.getStore("ModuleTree").getProxy().setExtraParam("idapplication",e.getStore().getAt(o).get("idapplication")),Ext.getStore("ModuleTree").load();var s=!1,i=Ext.getCmp("contenido"),a=null;Ext.each(i.items.items,function(e){"widget.listModules"==e.alias&&(s=!0,a=e)}),s||(a=Ext.widget("listModules"),i.add(a)),a.setTitle("Listado módulos de la aplicación "+e.getStore().getAt(o).get("name")),Ext.getCmp("contenido").setActiveTab(a)},cleanFilters:function(e){e.up("grid").filters.clearFilters()},insert:function(){Ext.widget("formApplication").down("form").loadRecord(Ext.create("susencargos.model.Application"))},cancel:function(e){e.up("window").close()},edit:function(e,t,o){Ext.widget("formApplication").down("form").loadRecord(e.getStore().getAt(o))},editDbl:function(e,t){Ext.widget("formApplication").down("form").loadRecord(t)},save:function(e){e.up("form").getForm().isValid()?(e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idapplication").getValue()),e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,o){var s=Ext.JSON.decode(o.response.responseText);Ext.MessageBox.show({title:s.msg.title,msg:s.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Application").load()}}),e.up("window").close()},failure:function(t,o){var s=Ext.JSON.decode(o.response.responseText);Ext.MessageBox.show({title:s.msg.title,msg:s.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR}),e.up("window").close()}})):Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})},remove:function(e,t,o){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){"yes"==t&&Ext.Ajax.request({url:"delete/delete_object.php",params:{id:e.getStore().getAt(o).get("idapplication"),object:"apps"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Application").load()}})},failed:function(e,t){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})})},insertGroup:function(e,t){Ext.each(t.records,function(e){Ext.Ajax.request({url:"update/save_object.php",params:{idapplication:Ext.getStore("GroupsApplication").getProxy().extraParams.idapplication,object:"groupApplication",id:0,idgroup:e.get("idgroup")},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})},failure:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}})})},removeGroup:function(e,t){Ext.each(t.records,function(e){Ext.Ajax.request({url:"delete/delete_object.php",params:{idapplication:Ext.getStore("GroupsApplication").getProxy().extraParams.idapplication,object:"groupApplication",idgroup:e.get("idgroup")},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})},failure:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}})})},insertModule:function(){Ext.getStore("ModuleL").load();var e=Ext.widget("formModule");e.down("form").loadRecord(Ext.create("susencargos.model.Module")),e.down("form").getForm().findField("idapplication").setValue(Ext.getStore("Module").getProxy().extraParams.idapplication)},cleanFiltersModules:function(e){e.up("treepanel").filters.clearFilters()},editDblModule:function(e,t){var o=Ext.widget("formModule");o.down("form").getForm().loadRecord(t),o.down("form").getForm().findField("idapplication").setValue(Ext.getStore("Module").getProxy().extraParams.idapplication)},editModule:function(e,t,o){var s=Ext.widget("formModule");s.down("form").getForm().loadRecord(e.getStore().getAt(o)),s.down("form").getForm().findField("idapplication").setValue(Ext.getStore("Module").getProxy().extraParams.idapplication)},saveModule:function(e){e.up("form").getForm().isValid()?(e.up("form").getForm().findField("id").setValue(Ext.isNumeric(e.up("form").getForm().findField("idmodule").getValue())?e.up("form").getForm().findField("idmodule").getValue():0),e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,o){var s=Ext.JSON.decode(o.response.responseText);Ext.MessageBox.show({title:s.msg.title,msg:s.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Module").load(),Ext.getStore("ModuleTree").load()}}),e.up("window").close()},failure:function(t,o){var s=Ext.JSON.decode(o.response.responseText);Ext.MessageBox.show({title:s.msg.title,msg:s.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR}),e.up("window").close()}})):Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})},removeModule:function(e){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){"yes"==t&&Ext.Ajax.request({url:"delete/delete_object.php",params:{id:e.getSelectionModel().getLastSelected().get("idmodule"),object:"modules"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Module").load(),Ext.getStore("ModuleTree").load()}})},failed:function(e,t){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})})},groupsModule:function(e,t,o){Ext.getStore("GroupsModule").getProxy().setExtraParam("idmodule",e.getStore().getAt(o).get("idmodule")),Ext.getStore("GroupsModule").load();var s=!1,i=Ext.getCmp("contenido"),a=null;Ext.each(i.items.items,function(e){"widget.listGroupsModule"==e.alias&&(s=!0,a=e)}),s||(a=Ext.widget("listGroupsModule"),i.add(a)),a.setTitle("Listado grupos asignados al módulo "+e.getStore().getAt(o).get("name")),Ext.getCmp("contenido").setActiveTab(a)},insertGroupModule:function(){Ext.getStore("GroupL").load({callback:function(){Ext.getStore("LevelAccessL").load({callback:function(){var e=Ext.widget("formGroupModule");e.down("form").loadRecord(Ext.create("susencargos.model.GroupModule")),e.down("form").getForm().findField("idmodule").setValue(Ext.getStore("GroupsModule").getProxy().extraParams.idmodule)}})}})},cleanFiltersGroupsModule:function(e){e.up("treepanel").filters.clearFilters()},saveGroupModule:function(e){e.up("form").getForm().isValid()?(e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idgroupmodule").getValue()),e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,o){var s=Ext.JSON.decode(o.response.responseText);Ext.MessageBox.show({title:s.msg.title,msg:s.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("GroupsModule").load()}}),e.up("window").close()},failure:function(t,o){var s=Ext.JSON.decode(o.response.responseText);Ext.MessageBox.show({title:s.msg.title,msg:s.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR}),e.up("window").close()}})):Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})},editDblGroupModule:function(e,t){Ext.getStore("GroupL").load({callback:function(){Ext.getStore("LevelAccessL").load({callback:function(){var e=Ext.widget("formGroupModule");e.down("form").getForm().loadRecord(t),e.down("form").getForm().findField("idmodule").setValue(Ext.getStore("GroupsModule").getProxy().extraParams.idmodule),e.down("form").getForm().findField("idgroup").setValue(t.get("group").idgroup),e.down("form").getForm().findField("idlevelaccess").setValue(t.get("levelAccess").idlevelaccess)}})}})},editGroupModule:function(e,t,o){Ext.getStore("GroupL").load({callback:function(){Ext.getStore("LevelAccessL").load({callback:function(){var t=Ext.widget("formGroupModule");t.down("form").getForm().loadRecord(e.getStore().getAt(o)),t.down("form").getForm().findField("idmodule").setValue(Ext.getStore("GroupsModule").getProxy().extraParams.idmodule),t.down("form").getForm().findField("idgroup").setValue(e.getStore().getAt(o).get("group").idgroup),t.down("form").getForm().findField("idlevelaccess").setValue(e.getStore().getAt(o).get("levelAccess").idlevelaccess)}})}})},removeGroupModule:function(e,t,o){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){"yes"==t&&Ext.Ajax.request({url:"delete/delete_object.php",params:{id:e.getStore().getAt(o).get("idgroupmodule"),object:"groupsModule"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("GroupsModule").load()}})},failed:function(e,t){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})})}}),Ext.create("Ext.app.Controller",{control:{"listGroups button[action=insert]":{click:"insert"},"listGroups button[action=clean]":{click:"cleanFilters"},listGroups:{itemdblclick:"editDbl"},"listGroups actioncolumn[action=countries]":{click:"countries"},"listGroups actioncolumn[action=applications]":{click:"applications"},"listGroups actioncolumn[action=users]":{click:"users"},"listGroups actioncolumn[action=edit]":{click:"edit"},"listGroups actioncolumn[action=remove]":{click:"remove"},"formGroup button[action=cancel]":{click:"cancel"},"formGroup button[action=save]":{click:"save"},"listUsersGroup grid#gridDestination dataview":{drop:"insertUser"},"listUsersGroup grid#gridSource dataview":{drop:"removeUser"},"listApplicationsGroup grid#gridDestination dataview":{drop:"insertApplication"},"listApplicationsGroup grid#gridSource dataview":{drop:"removeApplication"}},applications:function(e,t,o){Ext.getStore("ApplicationsGroup").getProxy().setExtraParam("idgroup",e.getStore().getAt(o).get("idgroup")),Ext.getStore("ApplicationsGroup").load(),Ext.getStore("NoApplicationsGroup").getProxy().setExtraParam("idgroup",e.getStore().getAt(o).get("idgroup")),Ext.getStore("NoApplicationsGroup").load(),panel=Ext.widget("listApplicationsGroup"),panel.setTitle("Listado aplicaciones asignadas al grupo "+e.getStore().getAt(o).get("name"))},users:function(e,t,o){Ext.getStore("UsersGroup").getProxy().setExtraParam("idgroup",e.getStore().getAt(o).get("idgroup")),Ext.getStore("UsersGroup").load(),Ext.getStore("NoUsersGroup").getProxy().setExtraParam("idgroup",e.getStore().getAt(o).get("idgroup")),Ext.getStore("NoUsersGroup").load(),panel=Ext.widget("listUsersGroup"),panel.setTitle("Listado usuarios asignados al grupo "+e.getStore().getAt(o).get("name"))},insert:function(){Ext.widget("formGroup").down("form").loadRecord(Ext.create("susencargos.model.Group"))},cleanFilters:function(){Ext.getStore("Group").load()},cancel:function(e){e.up("window").close()},edit:function(e,t,o){Ext.widget("formGroup").down("form").loadRecord(e.getStore().getAt(o))},editDbl:function(e,t){Ext.widget("formGroup").down("form").loadRecord(t)},save:function(e){e.up("form").getForm().isValid()?(e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idgroup").getValue()),e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,o){var s=Ext.JSON.decode(o.response.responseText);Ext.MessageBox.show({title:s.msg.title,msg:s.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Group").load()}}),e.up("window").close()},failure:function(t,o){var s=Ext.JSON.decode(o.response.responseText);Ext.MessageBox.show({title:s.msg.title,msg:s.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR}),e.up("window").close()}})):Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})},remove:function(e,t,o){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){"yes"==t&&Ext.Ajax.request({url:"delete/delete_object.php",params:{id:e.getStore().getAt(o).get("idgroup"),object:"groups"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Group").load()}})},failed:function(e,t){Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})})},insertUser:function(e,t){Ext.each(t.records,function(e){Ext.Ajax.request({url:"update/save_object.php",params:{idgroup:Ext.getStore("UsersGroup").getProxy().extraParams.idgroup,id:0,object:"userGroup",iduser:e.get("iduser")},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})},failure:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}})})},removeUser:function(e,t){Ext.each(t.records,function(e){Ext.Ajax.request({url:"delete/delete_object.php",params:{idgroup:Ext.getStore("UsersGroup").getProxy().extraParams.idgroup,object:"userGroup",iduser:e.get("iduser")},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})},failure:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}})})},insertApplication:function(e,t){Ext.each(t.records,function(e){Ext.Ajax.request({url:"update/save_object.php",params:{idgroup:Ext.getStore("ApplicationsGroup").getProxy().extraParams.idgroup,object:"applicationGroup",id:0,idapplication:e.get("idapplication")},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})},failure:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}})})},removeApplication:function(e,t){Ext.each(t.records,function(e){Ext.Ajax.request({url:"delete/delete_object.php",params:{idgroup:Ext.getStore("ApplicationsGroup").getProxy().extraParams.idgroup,object:"applicationGroup",idapplication:e.get("idapplication")},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})},failure:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}})})}}),Ext.create("Ext.app.Controller",{control:{"listStatesTracking button[action=insert]":{click:"insert"},"listStatesTracking button[action=clean]":{click:"cleanFilters"},listStatesTracking:{itemdblclick:"editDbl"},"listStatesTracking actioncolumn[action=edit]":{click:"edit"},"listStatesTracking actioncolumn[action=remove]":{click:"remove"},"formStateTracking button[action=cancel]":{click:"cancel"},"formStateTracking button[action=save]":{click:"save"}},insert:function(){Ext.widget("formStateTracking").down("form").loadRecord(Ext.create("susencargos.model.StateTracking"))},cleanFilters:function(e){e.up("grid").filters.clearFilters()},cancel:function(e){e.up("window").close()},edit:function(e,t,o){var s=Ext.widget("formStateTracking");s.down("form").loadRecord(e.getStore().getAt(o))},editDbl:function(e,t){var o=Ext.widget("formStateTracking");o.down("form").loadRecord(t)},save:function(e){e.up("form").getForm().isValid()?(e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idstatetracking").getValue()),e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,o){var s=Ext.JSON.decode(o.response.responseText);Ext.MessageBox.show({title:s.msg.title,msg:s.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("StateTracking").load()}}),e.up("window").close()},failure:function(t,o){var s=Ext.JSON.decode(o.response.responseText);Ext.MessageBox.show({title:s.msg.title,msg:s.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR}),e.up("window").close()}})):Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})},remove:function(e,t,o){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){"yes"==t&&Ext.Ajax.request({url:"delete/delete_object.php",params:{id:e.getStore().getAt(o).get("idstatetracking"),object:"statesTracking"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("StateTracking").load()}})},failed:function(e,t){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})})}}),Ext.create("Ext.app.Controller",{control:{"listTemplates button[action=insert]":{click:"insert"},"listTemplates button[action=clean]":{click:"cleanFilters"},listTemplates:{itemdblclick:"editDbl"},"listTemplates actioncolumn[action=fields]":{click:"fields"},"listTemplates actioncolumn[action=edit]":{click:"edit"},"listTemplates actioncolumn[action=remove]":{click:"remove"},"formTemplate button[action=cancel]":{click:"cancel"},"formTemplate button[action=save]":{click:"save"},"listFieldsTemplate button[action=insert]":{click:"insertField"},"listFieldsTemplate button[action=clean]":{click:"cleanFiltersField"},listFieldsTemplate:{itemdblclick:"editDblField"},"listFieldsTemplate actioncolumn[action=edit]":{click:"editField"},"listFieldsTemplate actioncolumn[action=remove]":{click:"removeField"},"formFieldTemplate button[action=cancel]":{click:"cancel"},"formFieldTemplate button[action=save]":{click:"saveField"}},fields:function(e,t,o){Ext.getStore("FieldTemplate").getProxy().setExtraParam("idtemplate",e.getStore().getAt(o).get("idtemplate")),Ext.getStore("FieldTemplate").load();var s=!1,i=Ext.getCmp("contenido"),a=null;Ext.each(i.items.items,function(e){"widget.listFieldsTemplate"==e.alias&&(s=!0,a=e)}),s||(a=Ext.widget("listFieldsTemplate"),i.add(a)),a.setTitle("Listado campo de la plantilla "+e.getStore().getAt(o).get("name")),Ext.getCmp("contenido").setActiveTab(a)},insert:function(){Ext.widget("formTemplate").down("form").loadRecord(Ext.create("susencargos.model.Template"))},cleanFilters:function(e){e.up("grid").filters.clearFilters(),Ext.getStore("Template").load()},cancel:function(e){e.up("window").close()},edit:function(e,t,o){Ext.widget("formTemplate").down("form").loadRecord(e.getStore().getAt(o))},editDbl:function(e,t){Ext.widget("formTemplate").down("form").loadRecord(t)},save:function(e){e.up("form").getForm().isValid()?(e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idtemplate").getValue()),e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,o){var s=Ext.JSON.decode(o.response.responseText);Ext.MessageBox.show({title:s.msg.title,msg:s.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Template").load()}}),e.up("window").close()},failure:function(t,o){var s=Ext.JSON.decode(o.response.responseText);Ext.MessageBox.show({title:s.msg.title,msg:s.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR}),e.up("window").close()}})):Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})},remove:function(e,t,o){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){"yes"==t&&Ext.Ajax.request({url:"delete/delete_object.php",params:{id:e.getStore().getAt(o).get("idtemplate"),object:"templates"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Template").load()}})},failed:function(e,t){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})})},insertField:function(){var e=Ext.widget("formFieldTemplate");e.down("form").loadRecord(Ext.create("susencargos.model.FieldTemplate")),e.down("form").getForm().findField("idtemplate").setValue(Ext.getStore("FieldTemplate").getProxy().extraParams.idtemplate)},cleanFiltersField:function(e){e.up("grid").filters.clearFilters(),Ext.getStore("FieldTemplate").load()},editField:function(e,t,o){Ext.widget("formFieldTemplate").down("form").loadRecord(e.getStore().getAt(o))},editDblField:function(e,t){Ext.widget("formFieldTemplate").down("form").loadRecord(t)},saveField:function(e){e.up("form").getForm().isValid()?(e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idfield").getValue()),e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,o){var s=Ext.JSON.decode(o.response.responseText);Ext.MessageBox.show({title:s.msg.title,msg:s.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("FieldTemplate").load()}}),e.up("window").close()},failure:function(t,o){var s=Ext.JSON.decode(o.response.responseText);Ext.MessageBox.show({title:s.msg.title,msg:s.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR}),e.up("window").close()}})):Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})},removeField:function(e,t,o){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){"yes"==t&&Ext.Ajax.request({url:"delete/delete_object.php",params:{id:e.getStore().getAt(o).get("idfield"),object:"fields"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("FieldTemplate").load()}})},failed:function(e,t){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})})}}),Ext.create("Ext.app.Controller",{control:{"listUsers button[action=insert]":{click:"insert"},"listUsers button[action=clean]":{click:"cleanFilters"},listUsers:{itemdblclick:"editDbl"},"listUsers actioncolumn[action=group]":{click:"group"},"listUsers actioncolumn[action=printer]":{click:"printer"},"listUsers actioncolumn[action=edit]":{click:"edit"},"listUsers actioncolumn[action=remove]":{click:"remove"},"formUser button[action=cancel]":{click:"cancel"},"formUser button[action=save]":{click:"save"},"formUser button[action=changePass]":{click:"changePass"},"listGroupsUser grid#gridDestination dataview":{drop:"insertGroup"},"listGroupsUser grid#gridSource dataview":{drop:"removeGroup"}},group:function(e,t,o){Ext.getStore("GroupsUser").getProxy().setExtraParam("iduser",e.getStore().getAt(o).get("iduser")),Ext.getStore("GroupsUser").load(),Ext.getStore("NoGroupsUser").getProxy().setExtraParam("iduser",e.getStore().getAt(o).get("iduser")),Ext.getStore("NoGroupsUser").load();var s=Ext.widget("listGroupsUser");s.setTitle("Listado grupos del usuario "+e.getStore().getAt(o).get("name"))},insert:function(){Ext.widget("formUser").down("form").loadRecord(Ext.create("susencargos.model.User"))},cleanFilters:function(e){e.up("grid").filters.clearFilters()},cancel:function(e){e.up("window").close()},edit:function(e,t,o){Ext.widget("formUser").down("form").loadRecord(e.getStore().getAt(o))},editDbl:function(e,t){Ext.widget("formUser").down("form").loadRecord(t)},save:function(e){e.up("form").getForm().isValid()?(e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("iduser").getValue()),e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,o){var s=Ext.JSON.decode(o.response.responseText);Ext.MessageBox.show({title:s.msg.title,msg:s.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("User").load()}}),e.up("window").close()},failure:function(t,o){var s=Ext.JSON.decode(o.response.responseText);Ext.MessageBox.show({title:s.msg.title,msg:s.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR}),e.up("window").close()}})):Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})},remove:function(e,t,o){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){"yes"==t&&Ext.Ajax.request({url:"delete/delete_object.php",params:{id:e.getStore().getAt(o).get("iduser"),object:"users"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("User").load()}})},failed:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}})})},changePass:function(e){Ext.create("Ext.window.Window",{title:"Cambiar contraseña",iconCls:"edit",alias:"widget.formChangePass",width:300,modal:!0,layout:"fit",autoShow:!0,items:[{xtype:"form",url:"update/user_pass.php",defaults:{labelAlign:"right"},frame:!0,items:[{xtype:"panel",html:"* Campos obligatorios",border:0,padding:10},{xtype:"hiddenfield",name:"iduser",value:e.up("form").getForm().findField("iduser").getValue()},{xtype:"textfield",name:"pass",itemId:"pass",vtype:"alphanum",value:"",allowBlank:!1,inputType:"password",anchor:"90%",fieldLabel:"* Contraseña"},{xtype:"textfield",name:"confirm",value:"",allowBlank:!1,vtype:"password",initialPassField:"pass",inputType:"password",anchor:"90%",fieldLabel:"* Confirmación"}]}],buttons:[{text:"Guardar",handler:function(e){e.up("window").down("form").getForm().isValid()?e.up("window").down("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,o){var s=Ext.JSON.decode(o.response.responseText);Ext.MessageBox.show({title:s.msg.title,msg:s.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO}),e.up("window").close()},failure:function(t,o){var s=Ext.JSON.decode(o.response.responseText);Ext.MessageBox.show({title:s.msg.title,msg:s.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR}),e.up("window").close()}}):Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},{text:"Cancelar",handler:function(e){e.up("window").close()}}]})},insertGroup:function(e,t){Ext.each(t.records,function(e){Ext.Ajax.request({url:"update/save_object.php",params:{iduser:Ext.getStore("GroupsUser").getProxy().extraParams.iduser,object:"groupUser",idgroup:e.get("idgroup"),id:0},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})},failure:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}})})},removeGroup:function(e,t){Ext.each(t.records,function(e){Ext.Ajax.request({url:"delete/delete_object.php",params:{iduser:Ext.getStore("GroupsUser").getProxy().extraParams.iduser,object:"groupUser",idgroup:e.get("idgroup")},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})},failure:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}})})},recoveryPass:function(e){e.up("form").getForm().isValid()?e.up("form").getForm().submit({waitMsg:"Procesando ...",success:function(t,o){var s=Ext.JSON.decode(o.response.responseText);Ext.MessageBox.show({title:s.msg.title,msg:s.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){1==e.up("form").getForm().findField("idrecoverymethod").getValue()&&(window.location="change_pass.php?"+s.link)}})},failure:function(e,t){var o=Ext.JSON.decode(t.response.responseText);Ext.MessageBox.show({title:o.msg.title,msg:o.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}}):Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})},setNewPass:function(e){e.up("form").getForm().isValid()?e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(e,t){var o=Ext.JSON.decode(t.response.responseText);Ext.MessageBox.show({title:o.msg.title,msg:o.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){window.location="cover.php"}})},failure:function(e,t){var o=Ext.JSON.decode(t.response.responseText);Ext.MessageBox.show({title:o.msg.title,msg:o.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}}):Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}}),Ext.create("Ext.app.Controller",{control:{"listCustomers button[action=insert]":{click:"insert"},"listCustomers button[action=clean]":{click:"cleanFilters"},listCustomers:{itemdblclick:"editDbl"},"listCustomers actioncolumn[action=edit]":{click:"edit"},"listCustomers actioncolumn[action=remove]":{click:"remove"},"formCustomer button[action=changePass]":{click:"changePass"},"formCustomer button[action=cancel]":{click:"cancel"},"formCustomer button[action=save]":{click:"save"}},insert:function(){Ext.getStore("CityL").load({start:0,limit:1e3,callback:function(){Ext.widget("formCustomer").down("form").loadRecord(Ext.create("susencargos.model.Customer"))}})},cleanFilters:function(e){e.up("grid").filters.clearFilters()},cancel:function(e){e.up("window").close()},changePass:function(e){Ext.create("Ext.window.Window",{title:"Cambiar contraseña",iconCls:"edit",alias:"widget.formChangePass",width:300,modal:!0,layout:"fit",autoShow:!0,items:[{xtype:"form",url:"update/user_pass.php",defaults:{labelAlign:"right"},frame:!0,items:[{xtype:"panel",html:"* Campos obligatorios",border:0,padding:10},{xtype:"hiddenfield",name:"iduser",value:e.up("form").getForm().getRecord().get("user").iduser},{xtype:"textfield",name:"pass",itemId:"pass",vtype:"alphanum",value:"",allowBlank:!1,inputType:"password",anchor:"90%",fieldLabel:"* Contraseña"},{xtype:"textfield",name:"confirm",value:"",allowBlank:!1,vtype:"password",initialPassField:"pass",inputType:"password",anchor:"90%",fieldLabel:"* Confirmación"}]}],buttons:[{text:"Guardar",handler:function(e){e.up("window").down("form").getForm().isValid()?e.up("window").down("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,o){var s=Ext.JSON.decode(o.response.responseText);Ext.MessageBox.show({title:s.msg.title,msg:s.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO}),e.up("window").close()},failure:function(t,o){var s=Ext.JSON.decode(o.response.responseText);Ext.MessageBox.show({title:s.msg.title,msg:s.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR}),e.up("window").close()}}):Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},{text:"Cancelar",handler:function(e){e.up("window").close()}}]})},edit:function(e,t,o){Ext.getStore("CityL").load({params:{start:0,limit:1e3},callback:function(){var t=Ext.widget("formCustomer");t.down("form").loadRecord(e.getStore().getAt(o)),t.down("form").getForm().findField("idcity").setValue(e.getStore().getAt(o).get("city").idcity),t.down("form").getForm().findField("email").setValue(e.getStore().getAt(o).get("user").email)}})},editDbl:function(e,t){Ext.getStore("CityL").load({params:{start:0,limit:1e3},callback:function(){var e=Ext.widget("formCustomer");e.down("form").loadRecord(t),e.down("form").getForm().findField("idcity").setValue(t.get("city").idcity),e.down("form").getForm().findField("email").setValue(t.get("user").email)}})},save:function(e){e.up("form").getForm().isValid()?(e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idcustomer").getValue()),e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,o){var s=Ext.JSON.decode(o.response.responseText);Ext.MessageBox.show({title:s.msg.title,msg:s.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Customer").load()}}),e.up("window").close()},failure:function(t,o){var s=Ext.JSON.decode(o.response.responseText);Ext.MessageBox.show({title:s.msg.title,msg:s.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR}),e.up("window").close()}})):Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})},remove:function(e,t,o){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){"yes"==t&&Ext.Ajax.request({url:"delete/delete_object.php",params:{id:e.getStore().getAt(o).get("idcustomer"),object:"customers"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Customer").load()}})},failed:function(e,t){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})})}}),Ext.create("Ext.app.Controller",{control:{"listZones button[action=insert]":{click:"insert"},"listZones button[action=clean]":{click:"cleanFilters"},listZones:{itemdblclick:"editDbl"},"listZones actioncolumn[action=edit]":{click:"edit"},"listZones actioncolumn[action=remove]":{click:"remove"},"formZone button[action=cancel]":{click:"cancel"},"formZone button[action=save]":{click:"save"}},insert:function(){Ext.widget("formZone").down("form").loadRecord(Ext.create("susencargos.model.Zone"))},cleanFilters:function(e){e.up("grid").filters.clearFilters()},cancel:function(e){e.up("window").close()},edit:function(e,t,o){var s=Ext.widget("formZone");s.down("form").loadRecord(e.getStore().getAt(o))},editDbl:function(e,t){var o=Ext.widget("formZone");o.down("form").loadRecord(t)},save:function(e){e.up("form").getForm().isValid()?(e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idzone").getValue()),e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,o){var s=Ext.JSON.decode(o.response.responseText);Ext.MessageBox.show({title:s.msg.title,msg:s.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Zone").load()}}),e.up("window").close()},failure:function(t,o){var s=Ext.JSON.decode(o.response.responseText);Ext.MessageBox.show({title:s.msg.title,msg:s.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR}),e.up("window").close()}})):Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})},remove:function(e,t,o){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){"yes"==t&&Ext.Ajax.request({url:"delete/delete_object.php",params:{id:e.getStore().getAt(o).get("idzone"),object:"zones"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Zone").load()}})},failed:function(e,t){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})})}}),Ext.create("Ext.app.Controller",{control:{"listCities button[action=insert]":{click:"insert"},"listCities button[action=clean]":{click:"cleanFilters"},listCities:{itemdblclick:"editDbl"},"listCities actioncolumn[action=edit]":{click:"edit"},"listCities actioncolumn[action=remove]":{click:"remove"},"formCity button[action=cancel]":{click:"cancel"},"formCity button[action=save]":{click:"save"}},insert:function(){Ext.widget("formCity").down("form").loadRecord(Ext.create("susencargos.model.City"))},cleanFilters:function(e){e.up("grid").filters.clearFilters()},cancel:function(e){e.up("window").close()},edit:function(e,t,o){Ext.getStore("ZoneL").load({callback:function(){var t=Ext.widget("formCity");t.down("form").loadRecord(e.getStore().getAt(o)),t.down("form").getForm().findField("idzone").setValue(e.getStore().getAt(o).get("zone").idzone)}})},editDbl:function(e,t){Ext.getStore("ZoneL").load({callback:function(){var e=Ext.widget("formCity");e.down("form").loadRecord(t),e.down("form").getForm().findField("idzone").setValue(t.get("zone").idzone)}})},save:function(e){e.up("form").getForm().isValid()?(e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idcity").getValue()),e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,o){var s=Ext.JSON.decode(o.response.responseText);Ext.MessageBox.show({title:s.msg.title,msg:s.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("City").load()}}),e.up("window").close()},failure:function(t,o){var s=Ext.JSON.decode(o.response.responseText);Ext.MessageBox.show({title:s.msg.title,msg:s.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR}),e.up("window").close()}})):Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})},remove:function(e,t,o){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){"yes"==t&&Ext.Ajax.request({url:"delete/delete_object.php",params:{id:e.getStore().getAt(o).get("idcity"),object:"cities"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("City").load()}})},failed:function(e,t){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})})}}),Ext.create("Ext.app.Controller",{control:{"listPackages button[action=insert]":{click:"insert"},"listPackages button[action=clean]":{click:"cleanFilters"},listPackages:{itemdblclick:"editDbl"},"listPackages actioncolumn[action=tracking]":{click:"tracking"},"listPackages actioncolumn[action=rotules]":{click:"rotules"},"listPackages actioncolumn[action=label]":{click:"label"},"listPackages actioncolumn[action=edit]":{click:"edit"},"listPackages actioncolumn[action=remove]":{click:"remove"},"formPackage combo[name=idcustomer]":{select:"changeCustomer"},"formPackage combo[name=idpackagetype]":{select:"changePackageType"},"formPackage button[action=cancel]":{click:"cancel"},"formPackage button[action=save]":{click:"save"}},insert:function(){Ext.widget("formPackage").down("form").loadRecord(Ext.create("susencargos.model.Package"))},cleanFilters:function(e){e.up("grid").filters.clearFilters()},cancel:function(e){e.up("window").close()},changeCustomer:function(e,t){var o=e.up("window").down("form").getForm();o.findField("idcitysource").setValue(t[0].get("city").idcity)},changePackageType:function(e,t){var o=e.up("window").down("form").getForm();o.findField("weight").setValue(1==t[0].get("idpackagetype")?30:1)},tracking:function(e,t,o){Ext.getStore("Tracking").getProxy().setExtraParam("idpackage",e.getStore().getAt(o).get("idpackage")),Ext.getStore("Tracking").load({callback:function(){var t=!1,s=Ext.getCmp("contenido"),i=null;Ext.each(s.items.items,function(e){"widget.listTrackings"==e.alias&&(t=!0,i=e)}),t||(i=Ext.widget("listTrackings"),s.add(i)),i.setTitle("Seguimiento de la guía "+e.getStore().getAt(o).get("idpackage")),Ext.getCmp("contenido").setActiveTab(i)}})},rotules:function(e,t,o){window.open("rotules.php?id="+e.getStore().getAt(o).get("idpackage"))},label:function(e,t,o){window.open("label.php?id="+e.getStore().getAt(o).get("idpackage"))},edit:function(e,t,o){Ext.getStore("CityL").load({params:{start:0,limit:1e3},callback:function(){Ext.getStore("CustomerL").load({params:{start:0,limit:1e3},callback:function(){Ext.getStore("PayTypeL").load({callback:function(){Ext.getStore("PackageTypeL").load({callback:function(){var t=Ext.widget("formPackage");t.down("form").loadRecord(e.getStore().getAt(o)),t.down("form").getForm().findField("idcitysource").setValue(e.getStore().getAt(o).get("citySource").idcity),t.down("form").getForm().findField("idcitydestination").setValue(e.getStore().getAt(o).get("cityDestination").idcity),t.down("form").getForm().findField("idcustomer").setValue(e.getStore().getAt(o).get("customer").idcustomer),t.down("form").getForm().findField("idpaytype").setValue(e.getStore().getAt(o).get("payType").idpaytype),t.down("form").getForm().findField("idpackagetype").setValue(e.getStore().getAt(o).get("packageType").idpackagetype)}})}})}})}})},editDbl:function(e,t){Ext.getStore("CityL").load({params:{start:0,limit:1e3},callback:function(){Ext.getStore("CustomerL").load({params:{start:0,limit:1e3},callback:function(){Ext.getStore("PayTypeL").load({callback:function(){Ext.getStore("PackageTypeL").load({callback:function(){var e=Ext.widget("formCity");e.down("form").loadRecord(t),e.down("form").getForm().findField("idcitysource").setValue(t.get("citySource").idcity),e.down("form").getForm().findField("idcitydestination").setValue(t.get("cityDestination").idcity),e.down("form").getForm().findField("idcustomer").setValue(t.get("customer").idcustomer),e.down("form").getForm().findField("idpaytype").setValue(t.get("payType").idpaytype),e.down("form").getForm().findField("idpackagetype").setValue(t.get("packageType").idpackagetype)}})}})}})}})},save:function(e){e.up("form").getForm().isValid()?(e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idpackage").getValue()),e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,o){var s=Ext.JSON.decode(o.response.responseText);Ext.MessageBox.show({title:s.msg.title,msg:s.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Package").load()}}),e.up("window").close()},failure:function(t,o){var s=Ext.JSON.decode(o.response.responseText);Ext.MessageBox.show({title:s.msg.title,msg:s.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR}),e.up("window").close()}})):Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})},remove:function(e,t,o){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){"yes"==t&&Ext.Ajax.request({url:"delete/delete_object.php",params:{id:e.getStore().getAt(o).get("idcity"),object:"cities"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("City").load()}})},failed:function(e,t){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})})}}),Ext.create("Ext.app.Controller",{control:{"listPayTypes button[action=insert]":{click:"insert"},"listPayTypes button[action=clean]":{click:"cleanFilters"},listPayTypes:{itemdblclick:"editDbl"},"listPayTypes actioncolumn[action=edit]":{click:"edit"},"listPayTypes actioncolumn[action=remove]":{click:"remove"},"formPayType button[action=cancel]":{click:"cancel"},"formPayType button[action=save]":{click:"save"}},insert:function(){Ext.widget("formPayType").down("form").loadRecord(Ext.create("susencargos.model.PayType"))},cleanFilters:function(e){e.up("grid").filters.clearFilters()},cancel:function(e){e.up("window").close()},edit:function(e,t,o){var s=Ext.widget("formPayType");s.down("form").loadRecord(e.getStore().getAt(o))},editDbl:function(e,t){var o=Ext.widget("formPayType");o.down("form").loadRecord(t)},save:function(e){e.up("form").getForm().isValid()?(e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idpaytype").getValue()),e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,o){var s=Ext.JSON.decode(o.response.responseText);Ext.MessageBox.show({title:s.msg.title,msg:s.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("PayType").load()}}),e.up("window").close()},failure:function(t,o){var s=Ext.JSON.decode(o.response.responseText);Ext.MessageBox.show({title:s.msg.title,msg:s.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR}),e.up("window").close()}})):Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})},remove:function(e,t,o){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){"yes"==t&&Ext.Ajax.request({url:"delete/delete_object.php",params:{id:e.getStore().getAt(o).get("idpaytype"),object:"payTypes"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("PayType").load()}})},failed:function(e,t){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})})}}),Ext.create("Ext.app.Controller",{control:{"listLevelsAccess button[action=insert]":{click:"insert"},"listLevelsAccess button[action=clean]":{click:"cleanFilters"},listLevelsAccess:{itemdblclick:"editDbl"},"listLevelsAccess actioncolumn[action=edit]":{click:"edit"},"listLevelsAccess actioncolumn[action=remove]":{click:"remove"},"formLevelAccess button[action=cancel]":{click:"cancel"},"formLevelAccess button[action=save]":{click:"save"}},insert:function(){Ext.widget("formLevelAccess").down("form").loadRecord(Ext.create("susencargos.model.LevelAccess"))},cleanFilters:function(e){e.up("grid").filters.clearFilters()},cancel:function(e){e.up("window").close()},edit:function(e,t,o){var s=Ext.widget("formLevelAccess");s.down("form").loadRecord(e.getStore().getAt(o))},editDbl:function(e,t){var o=Ext.widget("formLevelAccess");o.down("form").loadRecord(t)},save:function(e){e.up("form").getForm().isValid()?(e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idlevelaccess").getValue()),e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,o){var s=Ext.JSON.decode(o.response.responseText);Ext.MessageBox.show({title:s.msg.title,msg:s.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("LevelAccess").load()}}),e.up("window").close()},failure:function(t,o){var s=Ext.JSON.decode(o.response.responseText);Ext.MessageBox.show({title:s.msg.title,msg:s.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR}),e.up("window").close()}})):Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})},remove:function(e,t,o){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){"yes"==t&&Ext.Ajax.request({url:"delete/delete_object.php",params:{id:e.getStore().getAt(o).get("idlevelaccess"),object:"levelsAccess"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("LevelAccess").load()}})},failed:function(e,t){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})})}}),Ext.create("Ext.app.Controller",{control:{"listPackageTypes button[action=insert]":{click:"insert"},"listPackageTypes button[action=clean]":{click:"cleanFilters"},listPackageTypes:{itemdblclick:"editDbl"},"listPackageTypes actioncolumn[action=edit]":{click:"edit"},"listPackageTypes actioncolumn[action=remove]":{click:"remove"},"formPackageType button[action=cancel]":{click:"cancel"},"formPackageType button[action=save]":{click:"save"}},insert:function(){Ext.widget("formPackageType").down("form").loadRecord(Ext.create("susencargos.model.PackageType"))},cleanFilters:function(e){e.up("grid").filters.clearFilters()},cancel:function(e){e.up("window").close()},edit:function(e,t,o){var s=Ext.widget("formPackageType");s.down("form").loadRecord(e.getStore().getAt(o))},editDbl:function(e,t){var o=Ext.widget("formPackageType");o.down("form").loadRecord(t)},save:function(e){e.up("form").getForm().isValid()?(e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idpackagetype").getValue()),e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,o){var s=Ext.JSON.decode(o.response.responseText);Ext.MessageBox.show({title:s.msg.title,msg:s.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("PackageType").load()}}),e.up("window").close()},failure:function(t,o){var s=Ext.JSON.decode(o.response.responseText);Ext.MessageBox.show({title:s.msg.title,msg:s.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR}),e.up("window").close()}})):Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})},remove:function(e,t,o){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){"yes"==t&&Ext.Ajax.request({url:"delete/delete_object.php",params:{id:e.getStore().getAt(o).get("idpackagetype"),object:"PackageType"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("PackageType").load()}})},failed:function(e,t){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})})}}),Ext.create("Ext.app.Controller",{control:{"formReceivePackage textfield[name=tracking]":{keypress:"addTracking"},"formReceivePackage button[action=cancel]":{click:"cancel"},"formReceivePackage button[action=save]":{click:"save"},"formReceivePackage form grid actioncolumn[action=remove]":{click:"removeTracking"}},cancel:function(e){Ext.getStore("AuxReceivePackage").removeAll(),e.up("window").close()},save:function(e){if(e.up("form").getForm().isValid())if(Ext.getStore("AuxReceivePackage").count()>0){var t="",o=!0;Ext.getStore("AuxReceivePackage").each(function(e){o?o=!1:t+=",",t+=e.get("tracking")}),e.up("form").getForm().findField("trackings").setValue(t),e.up("form").getForm().findField("id").setValue(0),e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,o){var s=Ext.JSON.decode(o.response.responseText);Ext.MessageBox.show({title:s.msg.title,msg:s.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO}),Ext.getStore("AuxReceivePackage").removeAll(),e.up("window").close()},failure:function(t,o){var s=Ext.JSON.decode(o.response.responseText);Ext.MessageBox.show({autoScroll:!0,maxHeight:400,title:s.msg.title,msg:s.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR}),e.up("window").close()}})}else Ext.MessageBox.show({title:"Error",msg:"Debe ingresar al menos una remesa",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});else Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})},addTracking:function(e,t){if(t.getKey()===Ext.EventObject.ENTER){var o=new String(e.getValue());if(e.setValue(o.toUpperCase()),""!=e.getValue()){var s=!1;Ext.getStore("AuxReceivePackage").each(function(t){t.get("tracking")==e.getValue()&&(s=!0)}),s||Ext.getStore("AuxReceivePackage").add({tracking:e.getValue()}),e.setValue(""),e.up("window").down("grid").getView().focusRow(Ext.getStore("AuxReceivePackage").count()-1),e.focus()}}},removeTracking:function(e,t,o){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){"yes"==t&&Ext.getStore("AuxReceivePackage").remove(e.getStore().getAt(o))})}}),Ext.application({requires:["Ext.container.Viewport","Ext.chart.*","Ext.ux.form.TinyMCE"],name:"susencargos",launch:function(){Ext.create("susencargos.store.MainStoreRemote",{storeId:"Application",model:"susencargos.model.Application",object:"apps"}),Ext.create("susencargos.store.MainStoreLocal",{storeId:"ApplicationL",model:"susencargos.model.Application",object:"apps"}),Ext.create("susencargos.store.MainStoreRemote",{storeId:"Group",model:"susencargos.model.Group",object:"groups"}),Ext.create("susencargos.store.MainStoreLocal",{storeId:"GroupL",model:"susencargos.model.Group",object:"groups"}),Ext.create("susencargos.store.MainStoreRemote",{storeId:"Module",model:"susencargos.model.Module",object:"modules"}),Ext.create("susencargos.store.MainStoreLocal",{storeId:"ModuleL",model:"susencargos.model.Module",object:"modules"}),Ext.create("Ext.data.TreeStore",{storeId:"ModuleTree",model:"susencargos.model.Module",nodeParam:"module",remoteSort:!0,proxy:{type:"ajax",url:"stores/module_tree.php",extraParams:{idapplication:0},reader:{type:"json",root:"module",successProperty:"success"},listeners:{exception:function(e,t){var o=Ext.JSON.decode(t.responseText);Ext.MessageBox.show({title:o.msg.title,msg:o.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}}}}),Ext.create("susencargos.store.MainStoreRemote",{storeId:"User",model:"susencargos.model.User",object:"users"}),Ext.create("susencargos.store.MainStoreRemote",{storeId:"Customer",model:"susencargos.model.Customer",object:"customers"}),Ext.create("susencargos.store.MainStoreLocal",{storeId:"CustomerL",model:"susencargos.model.Customer",object:"customers"}),Ext.create("susencargos.store.MainStoreRemote",{storeId:"Zone",model:"susencargos.model.Zone",object:"zones"}),Ext.create("susencargos.store.MainStoreLocal",{storeId:"ZoneL",model:"susencargos.model.Zone",object:"zones"}),Ext.create("susencargos.store.MainStoreRemote",{storeId:"City",model:"susencargos.model.City",object:"cities"}),Ext.create("susencargos.store.MainStoreLocal",{storeId:"CityL",model:"susencargos.model.City",object:"cities"}),Ext.create("susencargos.store.MainStoreRemote",{storeId:"GroupsUser",model:"susencargos.model.Group",object:"groupsUser"}),Ext.create("susencargos.store.MainStoreRemote",{storeId:"NoGroupsUser",model:"susencargos.model.Group",object:"noGroupsUser"}),Ext.create("susencargos.store.MainStoreRemote",{storeId:"NoUsersGroup",model:"susencargos.model.User",object:"noUsersGroup"}),Ext.create("susencargos.store.MainStoreRemote",{storeId:"UsersGroup",model:"susencargos.model.User",object:"usersGroup"}),Ext.create("susencargos.store.MainStoreRemote",{storeId:"StateTracking",model:"susencargos.model.StateTracking",object:"statesTracking"}),Ext.create("susencargos.store.MainStoreRemote",{storeId:"Package",model:"susencargos.model.Package",object:"packages"}),Ext.create("susencargos.store.MainStoreRemote",{storeId:"PayType",model:"susencargos.model.PayType",object:"payTypes"}),Ext.create("susencargos.store.MainStoreLocal",{storeId:"PayTypeL",model:"susencargos.model.PayType",object:"payTypes"}),Ext.create("susencargos.store.MainStoreRemote",{storeId:"PackageType",model:"susencargos.model.PackageType",object:"packageTypes"}),Ext.create("susencargos.store.MainStoreLocal",{storeId:"PackageTypeL",model:"susencargos.model.PackageType",object:"packageTypes"}),Ext.create("susencargos.store.MainStoreRemote",{storeId:"ApplicationsGroup",model:"susencargos.model.Application",object:"applicationsGroup"}),Ext.create("susencargos.store.MainStoreRemote",{storeId:"GroupsApplication",model:"susencargos.model.Group",object:"groupsApplication"}),Ext.create("susencargos.store.MainStoreRemote",{storeId:"NoApplicationsGroup",model:"susencargos.model.Application",object:"noApplicationsGroup"}),Ext.create("susencargos.store.MainStoreRemote",{storeId:"NoGroupsApplication",model:"susencargos.model.Group",object:"noGroupsApplication"}),Ext.create("susencargos.store.MainStoreRemote",{storeId:"LevelAccess",model:"susencargos.model.LevelAccess",object:"levelsAccess"}),Ext.create("susencargos.store.MainStoreLocal",{storeId:"LevelAccessL",model:"susencargos.model.LevelAccess",object:"levelsAccess"}),Ext.create("susencargos.store.MainStoreRemote",{storeId:"GroupsModule",model:"susencargos.model.GroupModule",object:"groupsModule"}),Ext.create("susencargos.store.MainStoreRemote",{storeId:"Tracking",model:"susencargos.model.Tracking",object:"trackings"}),Ext.create("Ext.data.Store",{storeId:"AuxReceivePackage",model:"susencargos.model.AuxReceivePackage",remoteSort:!0}),Ext.define("susencargos.view.MainGrid",{extend:"Ext.grid.Panel",alias:"",plugins:{ptype:"gridfilters",menuFilterText:"Filtros"},layout:"fit",closable:!0,autoScroll:!0,buttonsAds:[],buttonsIni:["-",{xtype:"button",text:"Insertar",iconCls:"insert",tooltip:"Insertar",action:"insert"},"-",{xtype:"button",icon:"css/clean.png",text:"Limpiar filtros",tooltip:"Limpiar filtros",action:"clean"}],bbar:{xtype:"pagingtoolbar",pageSize:25,displayInfo:!0,items:[]},viewConfig:{enableTextSelection:!0},constructor:function(e){this.bbar.store=this.store,this.bbar.items=this.buttonsIni.concat(this.buttonsAds),this.callParent(e)}}),Ext.define("susencargos.view.MainForm",{extend:"Ext.window.Window",iconCls:"edit",width:600,maximizable:!0,object:"",fields:[],buttons:[],modal:!0,layout:"fit",autoShow:!0,items:[{xtype:"form",autoScroll:!0,url:"update/save_object.php",defaults:{labelAlign:"right"}}],initComponent:function(){this.items[0].items=[{xtype:"hiddenfield",name:"id",value:""},{xtype:"hiddenfield",name:"object",value:this.object},{xtype:"panel",html:"* Campos obligatorios",border:0,padding:10}].concat(this.fields),this.items[0].buttons=this.buttons,this.buttons=null,this.callParent()}}),Ext.define("susencargos.view.MainItemSelector",{extend:"Ext.window.Window",maximizable:!0,modal:!0,width:.8*Ext.getBody().getViewSize().width,height:500,autoShow:!0,layout:{type:"hbox",align:"stretch",padding:5},defaults:{flex:1},columns:[],storeSource:"",storeFinish:"",items:[{xtype:"grid",title:"No asignados",id:"gridSource",multiSelect:!0,plugins:{ptype:"gridfilters",menuFilterText:"Filtros"},bbar:{xtype:"pagingtoolbar",pageSize:25,displayInfo:!0},viewConfig:{plugins:{ptype:"gridviewdragdrop",dragGroup:"source",dropGroup:"destination"}}},{xtype:"grid",id:"gridDestination",multiSelect:!0,title:"Asignados",plugins:{ptype:"gridfilters",menuFilterText:"Filtros"},store:"GroupsUser",bbar:{xtype:"pagingtoolbar",pageSize:25,displayInfo:!0},viewConfig:{plugins:{ptype:"gridviewdragdrop",dragGroup:"destination",dropGroup:"source"}}}],constructor:function(e){this.items[0].columns=this.columns,this.items[0].store=this.storeSource,this.items[0].bbar.store=this.storeSource,this.items[1].columns=this.columns,this.items[1].store=this.storeFinish,this.items[1].bbar.store=this.storeFinish,this.callParent(e)}}),Ext.define("susencargos.view.application.Grid",{extend:"susencargos.view.MainGrid",iconCls:"apps",alias:"widget.listApplications",title:"Listado aplicaciones",store:"Application",columns:[{header:"ID",filter:"number",dataIndex:"idapplication"},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{xtype:"actioncolumn",width:20,action:"groups",tooltip:"Grupos",icon:"css/group.png",stopSelection:!1,iconCls:"group"},{xtype:"actioncolumn",width:20,action:"modules",tooltip:"Módulos",icon:"css/module.png",stopSelection:!1,iconCls:"module"},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:!1,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",stopSelection:!1,icon:"css/remove.png",iconCls:"remove"}]}),Ext.define("susencargos.view.application.Form",{extend:"susencargos.view.MainForm",alias:"widget.formApplication",title:"Editar aplicación",object:"apps",fields:[{xtype:"hiddenfield",name:"idapplication",value:0},{xtype:"textfield",name:"name",value:"",allowBlank:!1,anchor:"90%",fieldLabel:"* Nombre"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]}),Ext.define("susencargos.view.application.Groups",{extend:"susencargos.view.MainItemSelector",alias:"widget.listGroupsApplication",title:"Listado grupos de la aplicación",iconCls:"group",columns:[{header:"ID",filter:"number",dataIndex:"idgroup"},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{header:"Activo",dataIndex:"active",filter:"boolean",renderer:function(e){return e?"Si":"No"},flex:1}],storeSource:"NoGroupsApplication",storeFinish:"GroupsApplication"}),Ext.define("susencargos.view.application.FormGroupModule",{extend:"susencargos.view.MainForm",alias:"widget.formGroupModule",title:"Editar grupo de un módulo",object:"groupsModule",fields:[{xtype:"hiddenfield",name:"idgroupmodule",value:0},{xtype:"hiddenfield",name:"idmodule",value:0},{xtype:"combo",name:"idgroup",value:"",store:"GroupL",valueField:"idgroup",displayField:"name",allowBlank:!1,autoLoadOnValue:!0,fieldLabel:"* Grupo",queryMode:"local",anchor:"90%",typeAhead:!0,forceSelection:!0},{xtype:"combo",name:"idlevelaccess",value:"",store:"LevelAccessL",valueField:"idlevelaccess",autoLoadOnValue:!0,displayField:"name",allowBlank:!1,fieldLabel:"* Nivel de acceso",queryMode:"local",anchor:"90%",typeAhead:!0,forceSelection:!0}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]}),Ext.define("susencargos.view.application.GroupsModule",{extend:"susencargos.view.MainGrid",iconCls:"group",alias:"widget.listGroupsModule",title:"Listado grupos asignados a un módulo",store:"GroupsModule",columns:[{header:"ID",filter:"number",dataIndex:"idgroupmodule"},{header:"Grupo",dataIndex:"group",renderer:function(e){return e.name},flex:3},{header:"Nivel de acceso",dataIndex:"levelAccess",renderer:function(e){return e.name},flex:3},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:!1,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",stopSelection:!1,icon:"css/remove.png",iconCls:"remove"}]}),Ext.define("susencargos.view.group.Grid",{extend:"susencargos.view.MainGrid",iconCls:"group",alias:"widget.listGroups",title:"Listado grupos",store:"Group",columns:[{header:"ID",filter:"number",dataIndex:"idgroup"},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{header:"Activo",dataIndex:"active",filter:"boolean",renderer:function(e){return e?"Si":"No"},flex:1},{xtype:"actioncolumn",width:20,action:"applications",tooltip:"Aplicaciones",icon:"css/apps.png",stopSelection:!1,iconCls:"apps"},{xtype:"actioncolumn",width:20,action:"users",tooltip:"Usuarios",icon:"css/user.png",stopSelection:!1,iconCls:"user"},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:!1,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",icon:"css/remove.png",stopSelection:!1,iconCls:"remove"}]}),Ext.define("susencargos.view.group.Form",{extend:"susencargos.view.MainForm",alias:"widget.formGroup",title:"Editar grupo",object:"groups",fields:[{xtype:"hiddenfield",name:"idgroup",value:0},{xtype:"textfield",name:"name",value:"",allowBlank:!1,anchor:"90%",fieldLabel:"* Nombre"},{xtype:"combo",name:"active",value:"",allowBlank:!1,anchor:"90%",fieldLabel:"* Activo",autoLoadOnValue:!0,store:[[!1,"No"],[!0,"Si"]],queryMode:"local",forceSelection:!0,typeAHead:!0}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]}),Ext.define("susencargos.view.group.Users",{extend:"susencargos.view.MainItemSelector",iconCls:"user",alias:"widget.listUsersGroup",columns:[{header:"ID",filter:"number",dataIndex:"iduser"},{header:"Login",filter:"string",dataIndex:"login",flex:3},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{header:"Activo",dataIndex:"active",filter:"boolean",renderer:function(e){return e?"Si":"No"},flex:1}],storeSource:"NoUsersGroup",storeFinish:"UsersGroup"}),Ext.define("susencargos.view.group.Applications",{extend:"susencargos.view.MainItemSelector",alias:"widget.listApplicationsGroup",title:"Listado aplicaciones del grupo",iconCls:"apps",columns:[{header:"ID",dataIndex:"idapplication"},{header:"Nombre",dataIndex:"name",flex:3}],storeSource:"NoApplicationsGroup",storeFinish:"ApplicationsGroup"}),Ext.define("susencargos.view.application.Modules",{extend:"Ext.tree.Panel",iconCls:"module",plugins:{ptype:"gridfilters",menuFilterText:"Filtros"},alias:"widget.listModules",title:"Listado módulos",layout:"fit",store:"ModuleTree",closable:!0,displayField:"name",rootVisible:!1,useArrows:!0,autoScroll:!0,columns:[{header:"Nombre",xtype:"treecolumn",filter:"string",dataIndex:"name",flex:3},{header:"Clase",filter:"string",dataIndex:"class",flex:2},{header:"Script/Acción",filter:"string",dataIndex:"script",flex:3},{xtype:"actioncolumn",width:20,action:"groups",tooltip:"Grupos",icon:"css/group.png",stopSelection:!1,iconCls:"group"},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:!1,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",stopSelection:!1,icon:"css/remove.png",iconCls:"remove"}],bbar:{xtype:"toolbar",items:[{xtype:"button",text:"Insertar",iconCls:"insert",tooltip:"Insertar",action:"insert"},"-",{xtype:"button",icon:"css/clean.png",text:"Limpiar filtros",tooltip:"Limpiar filtros",action:"clean"}]}}),Ext.define("susencargos.view.application.FormModule",{extend:"susencargos.view.MainForm",alias:"widget.formModule",title:"Editar módulo",object:"modules",fields:[{xtype:"hiddenfield",name:"idmodule",value:0},{xtype:"combo",name:"idparent",emptyText:"- Nuevo módulo -",value:"",anchor:"90%",store:"ModuleL",valueField:"idmodule",autoLoadOnValue:!0,displayField:"name",fieldLabel:"* Módulo padre",queryMode:"local",forceSelection:!0,typeAhead:!0},{xtype:"hiddenfield",name:"idapplication",value:0},{xtype:"textfield",name:"name",value:"",allowBlank:!1,anchor:"90%",fieldLabel:"* Nombre"},{xtype:"textfield",name:"class",value:"",allowBlank:!1,anchor:"90%",fieldLabel:"* Clase"},{xtype:"textfield",name:"script",value:"",allowBlank:!1,anchor:"90%",fieldLabel:"* Script/Acción"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]}),Ext.define("susencargos.view.user.Grid",{extend:"susencargos.view.MainGrid",alias:"widget.listUsers",title:"Listado usuarios",store:"User",iconCls:"user",columns:[{header:"ID",filter:"number",dataIndex:"iduser"},{header:"Login",filter:"string",dataIndex:"login",flex:3},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{header:"Activo",dataIndex:"active",filter:"boolean",renderer:function(e){return e?"Si":"No"},flex:1},{header:"Ultimo ingreso",dataIndex:"lastLogin",filter:{type:"date",fields:{lt:{text:"Antes de"},gt:{text:"Depués de "},eq:{text:"El día"}},dateFormat:"Y-m-d H:i:s"},flex:1,renderer:Ext.util.Format.dateRenderer("Y-m-d H:i:s")},{header:"Logeado",dataIndex:"logged",filter:"boolean",renderer:function(e){return e?"Si":"No"},flex:1},{header:"Email",filter:"string",dataIndex:"email",flex:3},{xtype:"actioncolumn",width:20,action:"group",tooltip:"Grupos",icon:"css/group.png",stopSelection:!1,iconCls:"group"},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:!1,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",icon:"css/remove.png",iconCls:"remove",stopSelection:!1}]}),Ext.define("susencargos.view.user.Form",{extend:"susencargos.view.MainForm",alias:"widget.formUser",title:"Editar usuario",object:"users",fields:[{xtype:"hiddenfield",name:"iduser",value:0},{xtype:"textfield",name:"login",vtype:"email",value:"",allowBlank:!1,anchor:"90%",fieldLabel:"* Login"},{xtype:"textfield",name:"name",value:"",allowBlank:!1,anchor:"90%",fieldLabel:"* Nombre"},{xtype:"combo",name:"active",value:"",allowBlank:!1,anchor:"90%",fieldLabel:"* Activo",autoLoadOnValue:!0,store:[[!1,"No"],[!0,"Si"]],forceSelection:!0,queryMode:"local",typeAHead:!0},{xtype:"textfield",name:"email",value:"",vtype:"email",allowBlank:!1,anchor:"90%",fieldLabel:"* Email"}],buttons:[{text:"Cambiar contraseña",action:"changePass"},{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]}),Ext.define("susencargos.view.user.Groups",{extend:"susencargos.view.MainItemSelector",alias:"widget.listGroupsUser",iconCls:"group",storeSource:"NoGroupsUser",storeFinish:"GroupsUser",columns:[{header:"ID",dataIndex:"idgroup"},{header:"Nombre",dataIndex:"name",flex:3},{header:"Activo",dataIndex:"active",renderer:function(e){return e?"Si":"No"},flex:1}]}),Ext.define("susencargos.view.customer.Grid",{extend:"susencargos.view.MainGrid",iconCls:"customer",alias:"widget.listCustomers",title:"Listado clientes",store:"Customer",columns:[{header:"ID",filter:"number",dataIndex:"idcustomer"},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{header:"NIT",filter:"string",dataIndex:"taxid",flex:2},{header:"Dirección",filter:"string",dataIndex:"address",flex:3},{header:"Teléfono",filter:"string",dataIndex:"phone",flex:2},{header:"Ciudad",dataIndex:"city",flex:2,renderer:function(e){return e.name}},{header:"Email",dataIndex:"user",flex:2,renderer:function(e){return e.email}},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:!1,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",icon:"css/remove.png",stopSelection:!1,iconCls:"remove"}]}),Ext.define("susencargos.view.customer.Form",{extend:"susencargos.view.MainForm",alias:"widget.formCustomer",title:"Editar cliente",object:"customers",fields:[{xtype:"hiddenfield",name:"idcustomer",value:0},{xtype:"textfield",name:"name",value:"",allowBlank:!1,anchor:"90%",fieldLabel:"* Nombre"},{xtype:"textfield",name:"taxid",value:"",allowBlank:!1,anchor:"90%",fieldLabel:"* NIT"},{xtype:"textfield",name:"address",value:"",allowBlank:!1,anchor:"90%",fieldLabel:"* Dirección"},{xtype:"textfield",name:"phone",value:"",allowBlank:!1,anchor:"90%",fieldLabel:"* Teléfono"},{xtype:"combo",fieldLabel:"Ciudad",store:"CityL",typeAhead:!0,forceSelection:!0,allowBlank:!1,autoLoadOnValue:!0,valueField:"idcity",displayField:"name",name:"idcity",anchor:"90%",queryMode:"local"},{xtype:"textfield",name:"email",vtype:"email",value:"",allowBlank:!1,anchor:"90%",fieldLabel:"* Email"},{xtype:"textfield",name:"contact",value:"",anchor:"90%",fieldLabel:"Contacto"}],buttons:[{text:"Cambiar contraseña",action:"changePass"},{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]}),Ext.define("susencargos.view.zone.Grid",{extend:"susencargos.view.MainGrid",iconCls:"zone",alias:"widget.listZones",title:"Listado rutas",store:"Zone",columns:[{header:"ID",filter:"number",dataIndex:"idzone"},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:!1,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",icon:"css/remove.png",stopSelection:!1,iconCls:"remove"}]}),Ext.define("susencargos.view.zone.Form",{extend:"susencargos.view.MainForm",alias:"widget.formZone",title:"Editar ruta",object:"zones",fields:[{xtype:"hiddenfield",name:"idzone",value:0},{xtype:"textfield",name:"name",value:"",allowBlank:!1,anchor:"90%",fieldLabel:"* Nombre"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]}),Ext.define("susencargos.view.city.Grid",{extend:"susencargos.view.MainGrid",iconCls:"city",alias:"widget.listCities",title:"Listado ciudades",store:"City",columns:[{header:"ID",filter:"number",dataIndex:"idcity"},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{header:"Zona",dataIndex:"zone",flex:2,renderer:function(e){return e.name}},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:!1,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",icon:"css/remove.png",stopSelection:!1,iconCls:"remove"}]}),Ext.define("susencargos.view.city.Form",{extend:"susencargos.view.MainForm",alias:"widget.formCity",title:"Editar ciudad",object:"cities",fields:[{xtype:"hiddenfield",name:"idcity",value:0},{xtype:"textfield",name:"name",value:"",allowBlank:!1,anchor:"90%",fieldLabel:"* Nombre"},{xtype:"combo",fieldLabel:"Ruta",store:"ZoneL",typeAhead:!0,forceSelection:!0,allowBlank:!1,valueField:"idzone",autoLoadOnValue:!0,displayField:"name",name:"idzone",anchor:"90%",queryMode:"local"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]}),Ext.define("susencargos.view.state_tracking.Grid",{extend:"susencargos.view.MainGrid",iconCls:"stateTracking",alias:"widget.listStatesTracking",title:"Listado estados de remesa",store:"StateTracking",columns:[{header:"ID",filter:"number",dataIndex:"idstatetracking"},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:!1,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",stopSelection:!1,icon:"css/remove.png",iconCls:"remove"}]}),Ext.define("susencargos.view.state_tracking.Form",{extend:"susencargos.view.MainForm",alias:"widget.formStateTracking",title:"Editar estado de remesa",object:"statesTracking",fields:[{xtype:"hiddenfield",name:"idstatetracking",value:0},{xtype:"textfield",name:"name",value:"",allowBlank:!1,anchor:"90%",fieldLabel:"* Nombre"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]}),Ext.define("susencargos.view.package.Grid",{extend:"susencargos.view.MainGrid",iconCls:"package",alias:"widget.listPackages",title:"Listado remesas",store:"Package",columns:[{header:"ID",filter:"number",dataIndex:"idpackage",flex:1},{header:"Fecha",dataIndex:"date",filter:{type:"date",fields:{lt:{text:"Antes de"},gt:{text:"Depués de "},eq:{text:"El día"}},dateFormat:"Y-m-d"},flex:2,renderer:Ext.util.Format.dateRenderer("Y-m-d")},{header:"Cliente",dataIndex:"customer",flex:2,renderer:function(e){return e.name}},{header:"Origen",dataIndex:"citySource",flex:2,renderer:function(e){return e.name}},{header:"Destino",dataIndex:"cityDestination",flex:2,renderer:function(e){return e.name}},{header:"Destinatario",dataIndex:"nameTo",flex:2},{header:"Dirección",dataIndex:"addressTo",flex:2},{header:"Peso",dataIndex:"weight",flex:1},{header:"Cantidad",dataIndex:"amount",flex:1},{header:"Valor declarado",dataIndex:"declaredValue",flex:1},{header:"Tipo de pago",dataIndex:"payType",flex:2,renderer:function(e){return e.name}},{xtype:"actioncolumn",width:20,action:"tracking",tooltip:"Seguimiento",icon:"css/tracking.png",stopSelection:!1,iconCls:"rotule"},{xtype:"actioncolumn",width:20,action:"rotules",tooltip:"Imprimir rótulos",icon:"css/rotule.png",stopSelection:!1,iconCls:"rotule"},{xtype:"actioncolumn",width:20,action:"label",tooltip:"Imprimir etiqueta",icon:"css/label.png",stopSelection:!1,iconCls:"label"},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:!1,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",stopSelection:!1,icon:"css/remove.png",iconCls:"remove"}]}),Ext.define("susencargos.view.package.Form",{extend:"susencargos.view.MainForm",alias:"widget.formPackage",title:"Editar remesa",object:"packages",fields:[{xtype:"container",layout:{type:"table",columns:2},defaults:{layout:"anchor",anchor:"100%",style:"margin: 3px; padding:3px;"},items:[{xtype:"hiddenfield",name:"idpackage",value:0},{xtype:"combo",fieldLabel:"* Remitente",store:"CustomerL",typeAhead:!0,forceSelection:!0,allowBlank:!1,valueField:"idcustomer",displayField:"name",autoLoadOnValue:!0,name:"idcustomer",anchor:"90%",queryMode:"local"},{xtype:"datefield",name:"date",value:"",allowBlank:!1,anchor:"90%",fieldLabel:"* Fecha del envío",format:"Y-m-d"},{xtype:"combo",fieldLabel:"* Tipo de pago",autoLoadOnValue:!0,store:"PayTypeL",typeAhead:!0,forceSelection:!0,allowBlank:!1,valueField:"idpaytype",displayField:"name",name:"idpaytype",anchor:"90%",queryMode:"local"},{xtype:"combo",fieldLabel:"* Tipo de envío",store:"PackageTypeL",autoLoadOnValue:!0,typeAhead:!0,forceSelection:!0,allowBlank:!1,valueField:"idpackagetype",displayField:"name",name:"idpackagetype",anchor:"90%",queryMode:"local"},{xtype:"combo",fieldLabel:"* Ciudad origen",autoLoadOnValue:!0,store:"CityL",typeAhead:!0,forceSelection:!0,allowBlank:!1,valueField:"idcity",displayField:"name",name:"idcitysource",anchor:"90%",queryMode:"local"},{xtype:"combo",fieldLabel:"* Ciudad destino",autoLoadOnValue:!0,store:"CityL",typeAhead:!0,forceSelection:!0,allowBlank:!1,valueField:"idcity",displayField:"name",name:"idcitydestination",anchor:"90%",queryMode:"local"},{xtype:"textfield",name:"nameTo",value:"",allowBlank:!1,anchor:"90%",fieldLabel:"* Nombre destinatario"},{xtype:"textfield",name:"addressTo",value:"",allowBlank:!1,anchor:"90%",fieldLabel:"* Dirección destinatario"},{xtype:"textfield",name:"phoneTo",value:"",anchor:"90%",fieldLabel:"Teléfono destinatario"},{xtype:"textfield",name:"content",value:"",anchor:"90%",fieldLabel:"Dice contener"},{xtype:"textfield",name:"observations",value:"",anchor:"90%",fieldLabel:"Observaciones"},{xtype:"numberfield",hideTrigger:!0,name:"weight",value:0,anchor:"90%",fieldLabel:"Peso"},{xtype:"numberfield",hideTrigger:!0,name:"volumen",value:0,anchor:"90%",fieldLabel:"Volumen"},{xtype:"numberfield",hideTrigger:!0,name:"amount",allowBlank:!1,value:1,anchor:"90%",fieldLabel:"* Cantidad"},{xtype:"numberfield",hideTrigger:!0,name:"declaredValue",allowBlank:!1,value:4e5,anchor:"90%",fieldLabel:"* Valor declarado"},{xtype:"numberfield",hideTrigger:!0,name:"shippingValue",value:0,anchor:"90%",fieldLabel:"Valor del flete"},{xtype:"numberfield",hideTrigger:!0,name:"managementValue",value:0,anchor:"90%",fieldLabel:"Valor manejo"},{xtype:"numberfield",hideTrigger:!0,name:"totalValue",value:30,readOnly:!0,anchor:"90%",fieldLabel:"Valor total"},{xtype:"textfield",name:"reference",value:"",anchor:"90%",fieldLabel:"Referencia"}]}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]}),Ext.define("susencargos.view.package.Tracking",{extend:"susencargos.view.MainGrid",iconCls:"tracking",alias:"widget.listTrackings",title:"Seguimiento",store:"Tracking",columns:[{header:"ID",filter:"number",dataIndex:"idtracking",flex:1},{header:"Fecha",dataIndex:"date",filter:{type:"date",fields:{lt:{text:"Antes de"},gt:{text:"Depués de "},eq:{text:"El día"}},dateFormat:"Y-m-d H:i:s"},flex:2,renderer:Ext.util.Format.dateRenderer("Y-m-d H:i:s")},{header:"Estado",dataIndex:"state",flex:2,renderer:function(e){return e.name}}]}),Ext.define("susencargos.view.payType.Grid",{extend:"susencargos.view.MainGrid",iconCls:"payType",alias:"widget.listPayTypes",title:"Listado de tipos de pago",store:"PayType",columns:[{header:"ID",filter:"number",dataIndex:"idpaytype"},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:!1,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",icon:"css/remove.png",stopSelection:!1,iconCls:"remove"}]}),Ext.define("susencargos.view.payType.Form",{extend:"susencargos.view.MainForm",alias:"widget.formPayType",title:"Editar tipo de pago",object:"payTypes",fields:[{xtype:"hiddenfield",name:"idpaytype",value:0},{xtype:"textfield",name:"name",value:"",allowBlank:!1,anchor:"90%",fieldLabel:"* Nombre"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]}),Ext.define("susencargos.view.levelAccess.Grid",{extend:"susencargos.view.MainGrid",iconCls:"levelAccess",alias:"widget.listLevelsAccess",title:"Listado de niveles de acceso",store:"LevelAccess",columns:[{header:"ID",filter:"number",dataIndex:"idlevelaccess"},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:!1,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",icon:"css/remove.png",stopSelection:!1,iconCls:"remove"}]}),Ext.define("susencargos.view.levelAccess.Form",{extend:"susencargos.view.MainForm",alias:"widget.formLevelAccess",title:"Editar nivel de acceso",object:"levelsAccess",fields:[{xtype:"hiddenfield",name:"idlevelaccess",value:0},{xtype:"textfield",name:"name",value:"",allowBlank:!1,anchor:"90%",fieldLabel:"* Nombre"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]}),Ext.define("susencargos.view.packageType.Grid",{extend:"susencargos.view.MainGrid",iconCls:"packageType",alias:"widget.listPackageTypes",title:"Listado de tipos de envío",store:"PackageType",columns:[{header:"ID",filter:"number",dataIndex:"idpackagetype"},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:!1,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",icon:"css/remove.png",stopSelection:!1,iconCls:"remove"}]}),Ext.define("susencargos.view.packageType.Form",{extend:"susencargos.view.MainForm",alias:"widget.formPackageType",title:"Editar tipo de envío",object:"packageTypes",fields:[{xtype:"hiddenfield",name:"idpackagetype",value:0},{xtype:"textfield",name:"name",value:"",allowBlank:!1,anchor:"90%",fieldLabel:"* Nombre"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]}),Ext.define("susencargos.view.receive_package.Form",{extend:"susencargos.view.MainForm",alias:"widget.formReceivePackage",title:"Recepcionar paquetes en bodega",object:"receivePackages",fields:[{xtype:"hiddenfield",name:"trackings",value:""},{xtype:"textfield",fieldLabel:"* No. Remesa",labelWidth:200,name:"tracking",anchor:"95%",enableKeyEvents:!0,value:""},{xtype:"grid",height:300,anchor:"100%",store:"AuxReceivePackage",layout:"fit",columns:[{xtype:"rownumberer"},{header:"No. remesa",flex:1,dataIndex:"tracking"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",icon:"css/remove.png",stopSelection:!1,iconCls:"remove"}]}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]}),Ext.create("Ext.container.Viewport",{layout:"border",items:[{tbar:{defaults:{scale:"medium"},loader:{url:"menu.php",renderer:"component",autoLoad:!0}},region:"center",autoScroll:!0,id:"contenido",tabPosition:"bottom",xtype:"tabpanel",activeTab:0,items:[{xtype:"panel",title:"Bienvenidos",loader:{autoLoad:!0,url:"home.php"}}]},{region:"south",xtype:"panel",html:"<b>Susencargos.com.co &copy;</b>"}]})}});