function dispatch(e){var t=Ext.widget("formDispatchPackage");t.down("form").getForm().findField("group").setValue(e);var n="";Ext.getStore("AuthorizedPackage").each(function(t){if(t.get("group")==e){if(n!=""){n+","}n+=t.get("observations")}});t.down("form").getForm().findField("observations").setValue(n)}function disconsolidate(e){var t=Ext.widget("listDisconsolidatePackage");Ext.getStore("GroupPackage").getProxy().setExtraParam("group",e);Ext.getStore("GroupPackage").load()}Ext.define("flybox.model.Application",{extend:"Ext.data.Model",fields:[{name:"idapplication",type:"int"},{name:"name",type:"string"}]});Ext.define("flybox.model.Authorized",{extend:"Ext.data.Model",fields:[{name:"idauthorized",type:"int"},{name:"user",reference:"flybox.model.User"},{name:"name",type:"string"}]});Ext.define("flybox.model.AuxReceivePackage",{extend:"Ext.data.Model",fields:[{name:"tracking",type:"string"}],idProperty:"tracking"});Ext.define("flybox.model.City",{extend:"Ext.data.Model",fields:[{name:"idcity",type:"int"},{name:"country",reference:"flybox.model.Country"},{name:"name",type:"string"},{name:"code",type:"string"},{name:"isCourrier",type:"boolean",defaultValue:false}]});Ext.define("flybox.model.Country",{extend:"Ext.data.Model",fields:[{name:"idcountry",type:"int"},{name:"name",type:"string"},{name:"codeIATA",type:"string"},{name:"minValueDeclared",type:"float"},{name:"maxValueDeclared",type:"float"},{name:"money",reference:"flybox.model.Money"},{name:"measuringSystem",reference:"flybox.model.MeasuringSystem"},{name:"maxWeight",type:"int"},{name:"milesByDollar",type:"float"},{name:"maxWeightDocs",type:"float"},{name:"maxLongitude",type:"float"},{name:"delivery",type:"boolean",defaultValue:false},{name:"codeOffice",type:"string"}]});Ext.define("flybox.model.Customer",{extend:"Ext.data.Model",fields:[{name:"iduser",type:"int"},{name:"name",type:"string"},{name:"lastname",type:"string"},{name:"typeID",reference:"flybox.model.TypeID"},{name:"id",type:"string"},{name:"country",reference:"flybox.model.Country"},{name:"city",reference:"flybox.model.City"},{name:"delivery_salepoint",type:"int"},{name:"economySector",reference:"flybox.model.EconomySector"},{name:"address",type:"string"},{name:"salePoint",reference:"flybox.model.SalePoint"},{name:"homePhone",type:"string"},{name:"phone",type:"string"},{name:"nameContact",type:"string"},{name:"phoneContact",type:"string"},{name:"email",type:"string"},{name:"alternateEmail",type:"string"},{name:"occupation",reference:"flybox.model.Occupation"},{name:"birthday",type:"date"},{name:"lifemiles",type:"string"},{name:"infoMethod",reference:"flybox.model.InfoMethod"},{name:"secretQuestion",reference:"flybox.model.SecretQuestion"},{name:"listCustomer",reference:"flybox.model.ListCustomer"},{name:"facebookUserID",type:"string"}]});Ext.define("flybox.model.DeliveryCompany",{extend:"Ext.data.Model",fields:[{name:"iddeliverycompany",type:"int"},{name:"name",type:"string"},{name:"idcountry",type:"int"},{name:"country",reference:"flybox.model.Country"}]});Ext.define("flybox.model.Dispatch",{extend:"Ext.data.Model",fields:[{name:"iddispatch",type:"int"},{name:"miles",type:"int"},{name:"tracking",type:"string"},{name:"weight",type:"float"},{name:"description",type:"string"},{name:"voucher",type:"string"},{name:"collect",type:"boolean"},{name:"value",type:"float"},{name:"declared_value",type:"float"},{name:"product",reference:"flybox.model.Product"},{name:"locker",reference:"flybox.model.Locker"},{name:"typePackage",reference:"flybox.model.TypePackage"},{name:"cityOrigin",reference:"flybox.model.City"},{name:"payment",reference:"flybox.model.Payment"},{name:"cityDelivery",reference:"flybox.model.City"},{name:"address",type:"string"},{name:"dateDispatch",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"userDispatch",reference:"flybox.model.User"},{name:"securityStamp",type:"string"},{name:"daysStorage",type:"int"}]});Ext.define("flybox.model.EconomySector",{extend:"Ext.data.Model",fields:[{name:"ideconomysector",type:"int"},{name:"name",type:"string"}]});Ext.define("flybox.model.FieldTemplate",{extend:"Ext.data.Model",fields:[{name:"idfield",type:"int"},{name:"name",type:"string"},{name:"template",reference:"flybox.model.Template"}]});Ext.define("flybox.model.Group",{extend:"Ext.data.Model",fields:[{name:"idgroup",type:"int"},{name:"name",type:"string"},{name:"active",type:"boolean",defaultValue:false}]});Ext.define("flybox.model.GroupModule",{extend:"Ext.data.Model",fields:[{name:"idgroupmodule",type:"int"},{name:"group",reference:"flybox.model.Group"},{name:"levelaccess",reference:"flybox.model.LevelAccess"}]});Ext.define("flybox.model.GroupTracking",{extend:"Ext.data.Model",fields:[{name:"idgrouptracking",type:"int"},{name:"name",type:"string"}]});Ext.define("flybox.model.InfoMethod",{extend:"Ext.data.Model",fields:[{name:"idinfomethod",type:"int"},{name:"name",type:"string"}]});Ext.define("flybox.model.Item",{extend:"Ext.data.Model",fields:[{name:"iditem",type:"int"},{name:"package",reference:"flybox.model.Package"},{name:"description",type:"string"},{name:"amount",type:"int",defaultValue:1},{name:"unitValue",type:"float"}]});Ext.define("flybox.model.LevelAccess",{extend:"Ext.data.Model",fields:[{name:"idlevelaccess",type:"int"},{name:"name",type:"string"}]});Ext.define("flybox.model.ListCustomer",{extend:"Ext.data.Model",fields:[{name:"idlistcustomer",type:"int"},{name:"name",type:"string"},{name:"daysStorageFree",type:"int"},{name:"daysAbondonment",type:"int"},{name:"dayValue",type:"float"}]});Ext.define("flybox.model.Locker",{extend:"Ext.data.Model",fields:[{name:"idlocker",type:"int"},{name:"typeLocker",reference:"flybox.model.TypeLocker"},{name:"stateLocker",reference:"flybox.model.StateLocker"},{name:"user",reference:"flybox.model.User"},{name:"email",type:"string"},{name:"dateAdded",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"dateReject",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"rejectionReason",reference:"flybox.model.RejectionReason"},{name:"comments",type:"string"}]});Ext.define("flybox.model.MeasuringSystem",{extend:"Ext.data.Model",fields:[{name:"idmeasuringsystem",type:"int"},{name:"name",type:"string"}]});Ext.define("flybox.model.Module",{extend:"Ext.data.Model",fields:[{name:"idmodule",type:"int",defaultValue:0},{name:"name",type:"string"},{name:"idparent",type:"int",allowNull:true},{name:"class",type:"string"},{name:"script",type:"string"},{name:"idapplication",reference:"flybox.model.Application"}],idProperty:"idmodule"});Ext.define("flybox.model.Money",{extend:"Ext.data.Model",fields:[{name:"idmoney",type:"int"},{name:"name",type:"string"}]});Ext.define("flybox.model.Occupation",{extend:"Ext.data.Model",fields:[{name:"idoccupation",type:"int"},{name:"name",type:"string"}]});Ext.define("flybox.model.Package",{extend:"Ext.data.Model",fields:[{name:"idpackage",type:"int"},{name:"locker",reference:"flybox.model.Locker"},{name:"product",reference:"flybox.model.Product"},{name:"payment",reference:"flybox.model.Payment"},{name:"statePackage",reference:"flybox.model.StatePackage"},{name:"typePackage",reference:"flybox.model.TypePackage"},{name:"cityOrigin",reference:"flybox.model.City"},{name:"description",type:"string"},{name:"tracking",type:"string"},{name:"provide",reference:"flybox.model.Provide"},{name:"deliveryCompany",reference:"flybox.model.DeliveryCompany"},{name:"weight",type:"float"},{name:"lenght",type:"float"},{name:"height",type:"float"},{name:"width",type:"float"},{name:"declaredValue",type:"float"},{name:"datePrealert",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"dateReceive",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"userReceive",reference:"flybox.model.User"},{name:"dateEnter",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"userEnter",reference:"flybox.model.User"},{name:"dateAuthorization",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"weightVolumen",type:"float"},{name:"observations",type:"string"},{name:"consolidate",type:"boolean"},{name:"ubication",refecence:"flybox.model.Ubication"},{name:"autodispatch",type:"boolean"},{name:"cityDelivery",reference:"flybox.model.City"},{name:"address",type:"string"}]});Ext.define("flybox.model.Page",{extend:"Ext.data.Model",fields:[{name:"idpage",type:"int"},{name:"title",type:"string"},{name:"url",type:"string"},{name:"html",type:"string"},{name:"idtemplate",type:"int",defaultValue:1},{name:"keywords",type:"string"},{name:"description",type:"string"}]});Ext.define("flybox.model.Payment",{extend:"Ext.data.Model",fields:[{name:"idpayment",type:"int"},{name:"name",type:"string"},{name:"code",type:"string"}]});Ext.define("flybox.model.Prealert",{extend:"Ext.data.Model",fields:[{name:"idprealert",type:"int"},{name:"locker",reference:"flybox.model.Locker"},{name:"user",reference:"flybox.model.User"},{name:"typePackage",reference:"flybox.model.TypePackage",defaultValue:2},{name:"cityOrigin",reference:"flybox.model.City"},{name:"description",type:"string"},{name:"tracking",type:"string"},{name:"provide",reference:"flybox.model.Provide"},{name:"deliveryCompany",reference:"flybox.model.DeliveryCompany"},{name:"declaredValue",type:"float"},{name:"date",type:"string"},{name:"observations",type:"string"},{name:"product",reference:"flybox.model.Product"},{name:"autodispatch",type:"boolean",defaultValue:false},{name:"cityDelivery",reference:"flybox.model.City"},{name:"address",type:"string"},{name:"payment",reference:"flybox.model.Payment"}]});Ext.define("flybox.model.Printer",{extend:"Ext.data.Model",fields:[{name:"idprinter",type:"int"},{name:"name",type:"string"}]});Ext.define("flybox.model.Product",{extend:"Ext.data.Model",fields:[{name:"idproduct",type:"int"},{name:"name",type:"string"},{name:"code",type:"int"},{name:"maxConsolidate",type:"int"}]});Ext.define("flybox.model.Productivity",{extend:"Ext.data.Model",fields:[{name:"iduser",type:"int"},{name:"name",type:"string"},{name:"recibidos",type:"int"},{name:"ingresados",type:"int"},{name:"despachados",type:"int"}],idProperty:"iduser"});Ext.define("flybox.model.Provide",{extend:"Ext.data.Model",fields:[{name:"idprovide",type:"int"},{name:"name",type:"string"}]});Ext.define("flybox.model.RejectionReason",{extend:"Ext.data.Model",fields:[{name:"idrejectionreason",type:"int"},{name:"name",type:"string"}]});Ext.define("flybox.model.RequestPending",{extend:"Ext.data.Model",fields:[{name:"idrequestpending",type:"int"},{name:"locker",reference:"flybox.model.Locker"},{name:"tracking",type:"string"},{name:"description",type:"string"},{name:"date",type:"date",dateFormat:"Y-m-d H:i:s"}]});Ext.define("flybox.model.Resource",{extend:"Ext.data.Model",fields:[{name:"idresource",type:"int"},{name:"path",type:"string"},{name:"typeResource",reference:"flybox.model.TypeResource"}]});Ext.define("flybox.model.SalePoint",{extend:"Ext.data.Model",fields:[{name:"idsalepoint",type:"int"},{name:"idcity",reference:"flybox.model.City"},{name:"name",type:"string"},{name:"address",type:"string"}]});Ext.define("flybox.model.SecretQuestion",{extend:"Ext.data.Model",fields:[{name:"idsecretquestion",type:"int"},{name:"name",type:"string"}]});Ext.define("flybox.model.StateLocker",{extend:"Ext.data.Model",fields:[{name:"idstatelocker",type:"int"},{name:"name",type:"string"}]});Ext.define("flybox.model.StateTracking",{extend:"Ext.data.Model",fields:[{name:"idstatetracking",type:"int"},{name:"name",type:"string"},{name:"groupTracking",reference:"flybox.model.GroupTracking"}]});Ext.define("flybox.model.Template",{extend:"Ext.data.Model",fields:[{name:"idtemplate",type:"int"},{name:"name",type:"string"},{name:"html",type:"string"}]});Ext.define("flybox.model.TypeID",{extend:"Ext.data.Model",fields:[{name:"idtypeid",type:"int"},{name:"name",type:"string"}]});Ext.define("flybox.model.TypeLocker",{extend:"Ext.data.Model",fields:[{name:"idtypelocker",type:"int"},{name:"name",type:"string"}]});Ext.define("flybox.model.TypePackage",{extend:"Ext.data.Model",fields:[{name:"idtypepackage",type:"int"},{name:"name",type:"string"},{name:"code",type:"int"}]});Ext.define("flybox.model.TypeResource",{extend:"Ext.data.Model",fields:[{name:"idtyperesource",type:"int"},{name:"name",type:"string"},{name:"folder",type:"string"}]});Ext.define("flybox.model.TypeUbication",{extend:"Ext.data.Model",fields:[{name:"idtypeubication",type:"int"},{name:"name",type:"string"}]});Ext.define("flybox.model.Ubication",{extend:"Ext.data.Model",fields:[{name:"idubication",type:"int"},{name:"warehouse",reference:"flybox.model.WareHouse"},{name:"code",type:"string"},{name:"width",type:"float"},{name:"height",type:"float"},{name:"lenght",type:"float"},{name:"limit",type:"int"},{name:"typeUbication",reference:"flybox.model.TypeUbication"},{name:"order",type:"int"}]});Ext.define("flybox.model.User",{extend:"Ext.data.Model",fields:[{name:"iduser",type:"int"},{name:"login",type:"string"},{name:"name",type:"string"},{name:"active",type:"boolean",defaultValue:false},{name:"email",type:"string"},{name:"lastLogin",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"logged",type:"boolean",defaultValue:false}]});Ext.define("flybox.model.WareHouse",{extend:"Ext.data.Model",fields:[{name:"idwarehouse",type:"int"},{name:"name",type:"string"},{name:"limit",type:"int"},{name:"order",type:"int"}]});Ext.define("flybox.model.Picking",{extend:"Ext.data.Model",fields:[{name:"idconsolidate",type:"int"},{name:"idgroup",type:"int"},{name:"idpackage",type:"int"},{name:"idlocker",type:"int"},{name:"cityDelivery",reference:"flybox.model.City"},{name:"address",type:"string"},{name:"user",reference:"flybox.model.User"},{name:"tracking",type:"string"}]});Ext.define("flybox.store.DeprisaStore",{extend:"Ext.data.Store",remoteSort:true,remoteFilter:true,object:"",proxy:{type:"ajax",url:"stores/list_objects.aspx",extraParams:{object:""},reader:{type:"json",root:"data",successProperty:"success"}},constructor:function(e){e=Ext.apply({proxy:{extraParams:{object:e.object}}},e);this.callParent([e])},listeners:{load:function(e,t,n,r){if(!n){Ext.MessageBox.show({title:"Error",msg:"Sesión expirada",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}}}});var products=1;var numArticles=1;Ext.Loader.setConfig({enabled:true});Ext.Loader.setPath("Ext.ux","./js/extjs/build/ux");Ext.apply(Ext.form.field.VTypes,{daterange:function(e,t){var n=t.parseDate(e);if(!n){return false}if(t.startDateField&&(!this.dateRangeMax||n.getTime()!=this.dateRangeMax.getTime())){var r=t.up("form").down("#"+t.startDateField);r.setMaxValue(n);r.validate();this.dateRangeMax=n}else if(t.endDateField&&(!this.dateRangeMin||n.getTime()!=this.dateRangeMin.getTime())){var i=t.up("form").down("#"+t.endDateField);i.setMinValue(n);i.validate();this.dateRangeMin=n}return true},daterangeText:"La fecha de inicio debe ser inferior a la fecha de fin",password:function(e,t){if(t.initialPassField){var n=t.up("form").down("#"+t.initialPassField);return e==n.getValue()}return true},passwordText:"La contraseña y la confirmación no coinciden"});Ext.create("Ext.app.Controller",{control:{"listApplications button[action=insert]":{click:"insert"},"listApplications button[action=clean]":{click:"cleanFilters"},listApplications:{itemdblclick:"editDbl"},"listApplications actioncolumn[action=groups]":{click:"groups"},"listApplications actioncolumn[action=modules]":{click:"modules"},"listApplications actioncolumn[action=edit]":{click:"edit"},"listApplications actioncolumn[action=remove]":{click:"remove"},"formApplication button[action=cancel]":{click:"cancel"},"formApplication button[action=save]":{click:"save"},"listGroupsApplication grid#gridDestination dataview":{drop:"insertGroup"},"listGroupsApplication grid#gridSource dataview":{drop:"removeGroup"},"listModules button[action=insert]":{click:"insertModule"},"listModules button[action=clean]":{click:"cleanFiltersModules"},listModules:{itemdblclick:"editDblModule"},"listModules actioncolumn[action=groups]":{click:"groupsModule"},"listModules actioncolumn[action=edit]":{click:"editModule"},"listModules actioncolumn[action=remove]":{click:"removeModule"},"formModule button[action=cancel]":{click:"cancel"},"formModule button[action=save]":{click:"saveModule"},"listGroupsModule button[action=insert]":{click:"insertGroupModule"},"listGroupsModule button[action=clean]":{click:"cleanFiltersGroupsModule"},listGroupsModule:{itemdblclick:"editDblGroupModule"},"listGroupsModule actioncolumn[action=edit]":{click:"editGroupModule"},"listGroupsModule actioncolumn[action=remove]":{click:"removeGroupModule"},"formGroupModule button[action=cancel]":{click:"cancel"},"formGroupModule button[action=save]":{click:"saveGroupModule"}},groups:function(e,t,n,r,i){Ext.getStore("GroupsApplication").getProxy().setExtraParam("idapplication",e.getStore().getAt(n).get("idapplication"));Ext.getStore("GroupsApplication").load();Ext.getStore("NoGroupsApplication").getProxy().setExtraParam("idapplication",e.getStore().getAt(n).get("idapplication"));Ext.getStore("NoGroupsApplication").load();panel=Ext.widget("listGroupsApplication");panel.setTitle("Listado grupos asignados a la aplicación "+e.getStore().getAt(n).get("name"))},modules:function(e,t,n,r,i){Ext.getStore("Module").getProxy().setExtraParam("idapplication",e.getStore().getAt(n).get("idapplication"));Ext.getStore("Module").load();Ext.getStore("ModuleTree").getProxy().setExtraParam("idapplication",e.getStore().getAt(n).get("idapplication"));Ext.getStore("ModuleTree").load();var s=false;var o=Ext.getCmp("contenido");var u=null;Ext.each(o.items.items,function(e,t,n){if(e.alias=="widget.listModules"){s=true;u=e}});if(!s){u=Ext.widget("listModules");o.add(u)}u.setTitle("Listado módulos de la aplicación "+e.getStore().getAt(n).get("name"));Ext.getCmp("contenido").setActiveTab(u)},cleanFilters:function(e,t){e.up("grid").filters.clearFilters();Ext.getStore("Application").load()},insert:function(e,t){Ext.widget("formApplication").down("form").loadRecord(Ext.create("flybox.model.Application"))},cancel:function(e,t){e.up("window").close()},edit:function(e,t,n,r,i){Ext.widget("formApplication").down("form").loadRecord(e.getStore().getAt(n))},editDbl:function(e,t){Ext.widget("formApplication").down("form").loadRecord(t)},save:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idapplication").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Application").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},remove:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("idapplication"),object:"apps"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Application").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})},insertGroup:function(e,t,n,r){Ext.each(t.records,function(e,t,n){Ext.Ajax.request({url:"update/save_object.aspx",params:{idapplication:Ext.getStore("GroupsApplication").getProxy().extraParams.idapplication,object:"groupApplication",id:0,idgroup:e.get("idgroup")},success:function(e,t,n){var r=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})},failure:function(e,t,n){var r=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}})})},removeGroup:function(e,t,n,r){Ext.each(t.records,function(e,t,n){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{idapplication:Ext.getStore("GroupsApplication").getProxy().extraParams.idapplication,object:"groupApplication",idgroup:e.get("idgroup")},success:function(e,t,n){var r=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})},failure:function(e,t,n){var r=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}})})},insertModule:function(e,t){var n=Ext.widget("formModule");n.down("form").loadRecord(Ext.create("flybox.model.Module"));n.down("form").getForm().findField("idapplication").setValue(Ext.getStore("Module").getProxy().extraParams.idapplication)},cleanFiltersModules:function(e,t){e.up("treepanel").filters.clearFilters();Ext.getStore("Module").load()},editDblModule:function(e,t){var n=Ext.widget("formModule");n.down("form").getForm().loadRecord(t);n.down("form").getForm().findField("idapplication").setValue(Ext.getStore("Module").getProxy().extraParams.idapplication)},editModule:function(e,t,n,r,i){var s=Ext.widget("formModule");s.down("form").getForm().loadRecord(e.getStore().getAt(n));s.down("form").getForm().findField("idapplication").setValue(Ext.getStore("Module").getProxy().extraParams.idapplication)},saveModule:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(Ext.isNumeric(e.up("form").getForm().findField("idmodule").getValue())?e.up("form").getForm().findField("idmodule").getValue():0);e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Module").load();Ext.getStore("ModuleTree").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},removeModule:function(e,t,n,r){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getSelectionModel().getLastSelected().get("idmodule"),object:"modules"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Module").load();Ext.getStore("ModuleTree").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})},groupsModule:function(e,t,n,r,i){Ext.getStore("GroupsModule").getProxy().setExtraParam("idmodule",e.getStore().getAt(n).get("idmodule"));Ext.getStore("GroupsModule").load();var s=false;var o=Ext.getCmp("contenido");var u=null;Ext.each(o.items.items,function(e,t,n){if(e.alias=="widget.listGroupsModule"){s=true;u=e}});if(!s){u=Ext.widget("listGroupsModule");o.add(u)}u.setTitle("Listado grupos asignados al módulo "+e.getStore().getAt(n).get("name"));Ext.getCmp("contenido").setActiveTab(u)},insertGroupModule:function(e,t){Ext.getStore("Group").load();Ext.getStore("LevelAccess").load();var n=Ext.widget("formGroupModule");n.down("form").loadRecord(Ext.create("flybox.model.GroupModule"));n.down("form").getForm().findField("idmodule").setValue(Ext.getStore("GroupsModule").getProxy().extraParams.idmodule)},cleanFiltersGroupsModule:function(e,t){e.up("treepanel").filters.clearFilters();Ext.getStore("Module").load()},saveGroupModule:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idgroupmodule").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("GroupsModule").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},editDblGroupModule:function(e,t){Ext.getStore("Group").load({callback:function(){Ext.getStore("LevelAccess").load({callback:function(){var e=Ext.widget("formGroupModule");e.down("form").getForm().loadRecord(t);e.down("form").getForm().findField("idmodule").setValue(Ext.getStore("GroupsModule").getProxy().extraParams.idmodule);e.down("form").getForm().findField("idgroup").setValue(t.get("group").idgroup);e.down("form").getForm().findField("idlevelaccess").setValue(t.get("levelAccess").idlevelaccess)}})}})},editGroupModule:function(e,t,n,r,i){Ext.getStore("Group").load({callback:function(){Ext.getStore("LevelAccess").load({callback:function(){var t=Ext.widget("formGroupModule");t.down("form").getForm().loadRecord(e.getStore().getAt(n));t.down("form").getForm().findField("idmodule").setValue(Ext.getStore("GroupsModule").getProxy().extraParams.idmodule);t.down("form").getForm().findField("idgroup").setValue(e.getStore().getAt(n).get("group").idgroup);t.down("form").getForm().findField("idlevelaccess").setValue(e.getStore().getAt(n).get("levelAccess").idlevelaccess)}})}})},removeGroupModule:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("idgroupmodule"),object:"groupsModule"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("GroupsModule").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})}});Ext.create("Ext.app.Controller",{control:{listAuthorizedPackages:{itemdblclick:"editDbl"},"listAuthorizedPackages actioncolumn[action=edit]":{click:"edit"},"listDisconsolidatePackage button[action=cancel]":{click:"cancel"},"listDisconsolidatePackage actioncolumn[action=remove]":{click:"remove"},"formReportAuthorized button[action=save]":{click:"saveReport"},"formReportAuthorized button[action=cancel]":{click:"cancel"},"formAuthorizedPackage button[action=save]":{click:"savePackage"},"formAuthorizedPackage button[action=cancel]":{click:"cancel"},"formAuthorizedPackage grid":{itemdblclick:"editDblProduct"},"formAuthorizedPackage actioncolumn[action=edit]":{click:"editProduct"},"formAuthorizedPackage actioncolumn[action=remove]":{click:"removeProduct"}},cleanFilters:function(e,t){e.up("grid").filters.clearFilters();Ext.getStore("AuthorizedPackage").load()},cancel:function(e,t){e.up("window").close()},save:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("AuthorizedPackage").load();Ext.getStore("Productivity").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},edit:function(e,t,n,r,i){Ext.getStore("Product").getProxy().setExtraParam("idpackage",e.getStore().getAt(n).get("idpackage"));Ext.getStore("Product").load();Ext.getStore("TypePackage").load({start:0,limit:100,callback:function(){var t=Ext.widget("formAuthorizedPackage").down("form").loadRecord(e.getStore().getAt(n));if(e.getStore().getAt(n).get("idcityorigin")==4){t.findField("weight").setFieldLabel("Peso (Lb.)")}else{t.findField("weight").setFieldLabel("Peso (Kg.)")}}})},savePackage:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("AuthorizedPackage").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},editDbl:function(e,t){Ext.getStore("Product").getProxy().setExtraParam("idpackage",t.get("idpackage"));Ext.getStore("Product").load();Ext.getStore("TypePackage").load({start:0,limit:100,callback:function(){var e=Ext.widget("formAuthorizedPackage").down("form").loadRecord(t);if(t.get("idcityorigin")==4){e.findField("weight").setFieldLabel("Peso (Lb.)")}else{e.findField("weight").setFieldLabel("Peso (Kg.)")}}})},editProduct:function(e,t,n,r,i){var s=Ext.widget("formProductPackage").down("form").loadRecord(e.getStore().getAt(n))},editDblProduct:function(e,t,n,r,i){var s=Ext.widget("formProductPackage").down("form").loadRecord(t)},removeProduct:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/product_package.aspx",params:{id:e.getStore().getAt(n).get("idproduct")},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Product").load();Ext.getStore("AuthorizedPackage").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})},saveProduct:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Product").load();Ext.getStore("AuthorizedPackage").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},remove:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el paquete de este grupo?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/group_package.aspx",params:{id:e.getStore().getAt(n).get("idpackage")},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("GroupPackage").load();Ext.getStore("AuthorizedPackage").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})},saveReport:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){window.open("./reports/"+i.msg.file,"_blank")}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}}});Ext.create("Ext.app.Controller",{control:{"listCountries button[action=insert]":{click:"insert"},"listCountries button[action=clean]":{click:"cleanFilters"},listCountries:{itemdblclick:"editDbl"},"listCountries actioncolumn[action=cities]":{click:"cities"},"listCountries actioncolumn[action=groups]":{click:"groups"},"listCountries actioncolumn[action=edit]":{click:"edit"},"listCountries actioncolumn[action=remove]":{click:"remove"},"formCountry button[action=cancel]":{click:"cancel"},"formCountry button[action=save]":{click:"save"},"listGroupsCountry grid#gridDestination dataview":{drop:"insertGroup"},"listGroupsCountry grid#gridSource dataview":{drop:"removeGroup"},"listCities button[action=insert]":{click:"insertCity"},"listCities button[action=clean]":{click:"cleanFiltersCities"},listCities:{itemdblclick:"editDblCity"},"listCities actioncolumn[action=edit]":{click:"editCity"},"listCities actioncolumn[action=remove]":{click:"removeCity"},"listCities actioncolumn[action=salesPoint]":{click:"salesPoint"},"formCity button[action=cancel]":{click:"cancel"},"formCity button[action=save]":{click:"saveCity"},"listSalesPoint button[action=insert]":{click:"insertSalePoint"},"listSalesPoint button[action=clean]":{click:"cleanFiltersSalesPoint"},"listSalesPoint ":{itemdblclick:"editDblSalePoint"},"listSalesPoint actioncolumn[action=edit]":{click:"editSalePoint"},"listSalesPoint actioncolumn[action=remove]":{click:"removeSalePoint"},"formSalePoint button[action=cancel]":{click:"cancel"},"formSalePoint button[action=save]":{click:"saveSalePoint"}},groups:function(e,t,n,r,i){Ext.getStore("GroupsCountry").getProxy().setExtraParam("idcountry",e.getStore().getAt(n).get("idcountry"));Ext.getStore("GroupsCountry").load();Ext.getStore("NoGroupsCountry").getProxy().setExtraParam("idcountry",e.getStore().getAt(n).get("idcountry"));Ext.getStore("NoGroupsCountry").load();var s=Ext.widget("listGroupsCountry");s.setTitle("Listado grupos del país "+e.getStore().getAt(n).get("name"))},insertGroup:function(e,t,n,r){Ext.each(t.records,function(e,t,n){Ext.Ajax.request({url:"update/save_object.aspx",params:{idcountry:Ext.getStore("GroupsCountry").getProxy().extraParams.idcountry,object:"groupsCountry",idgroup:e.get("idgroup"),id:0},success:function(e,t,n){var r=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})},failure:function(e,t,n){var r=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}})})},removeGroup:function(e,t,n,r){Ext.each(t.records,function(e,t,n){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{idcountry:Ext.getStore("GroupsCountry").getProxy().extraParams.idcountry,object:"groupsCountry",idgroup:e.get("idgroup")},success:function(e,t,n){var r=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})},failure:function(e,t,n){var r=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}})})},cities:function(e,t,n,r,i){Ext.getStore("City").getProxy().setExtraParam("idcountry",e.getStore().getAt(n).get("idcountry"));Ext.getStore("City").load();var s=false;var o=Ext.getCmp("contenido");var u=null;Ext.each(o.items.items,function(e,t,n){if(e.alias=="widget.listCities"){s=true;u=e}});if(!s){u=Ext.widget("listCities");o.add(u)}u.setTitle("Listado ciudades del país "+e.getStore().getAt(n).get("name"));Ext.getCmp("contenido").setActiveTab(u)},insert:function(e,t){Ext.getStore("Money").load({callback:function(){Ext.getStore("MeasuringSystem").load({callback:function(){var e=Ext.widget("formCountry");e.down("form").loadRecord(Ext.create("flybox.model.Country"))}})}})},cleanFilters:function(e,t){Ext.getStore("Country").load();e.up("grid").filters.clearFilters()},cleanFiltersSalesPoint:function(e,t){Ext.getStore("SalePoint").load();e.up("grid").filters.clearFilters()},cleanFiltersCities:function(e,t){Ext.getStore("City").load();e.up("grid").filters.clearFilters()},cancel:function(e,t){e.up("window").close()},edit:function(e,t,n,r,i){Ext.getStore("Money").load({callback:function(){Ext.getStore("MeasuringSystem").load({callback:function(){var t=Ext.widget("formCountry");t.down("form").loadRecord(e.getStore().getAt(n));t.down("form").getForm().findField("idmoney").setValue(e.getStore().getAt(n).get("money").idmoney);t.down("form").getForm().findField("idmeasuringsystem").setValue(e.getStore().getAt(n).get("measuringSystem").idmeasuringsystem)}})}})},editDbl:function(e,t){Ext.getStore("Money").load({callback:function(){Ext.getStore("MeasuringSystem").load({callback:function(){var e=Ext.widget("formCountry");e.down("form").loadRecord(t);e.down("form").getForm().findField("idmoney").setValue(t.get("money").idmoney);e.down("form").getForm().findField("idmeasuringsystem").setValue(t.get("measuringSystem").idmeasuringsystem)}})}})},save:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idcountry").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Country").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},remove:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("idcountry"),object:"countries"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Country").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})},insertCity:function(e,t){var n=Ext.widget("formCity");n.down("form").loadRecord(Ext.create("flybox.model.City"));n.down("form").getForm().findField("idcountry").setValue(Ext.getStore("City").getProxy().extraParams.idcountry)},editCity:function(e,t,n,r,i){var s=Ext.widget("formCity");s.down("form").loadRecord(e.getStore().getAt(n));s.down("form").getForm().findField("idcountry").setValue(Ext.getStore("City").getProxy().extraParams.idcountry)},editDblCity:function(e,t){var n=Ext.widget("formCity");n.down("form").loadRecord(t);n.down("form").getForm().findField("idcountry").setValue(Ext.getStore("City").getProxy().extraParams.idcountry)},saveCity:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idcity").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("City").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},removeCity:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.Ajax.request({url:"stores/list_objects.aspx",method:"GET",params:{idcity:e.getStore().getAt(n).get("idcity"),object:"user_in_city"},success:function(t){var r=Ext.JSON.decode(t.responseText);if(r.total>0){Ext.MessageBox.confirm("Reubicación","En esta ciudad se encuentra registrados "+r.total+" usuarios, ¿Desea reubicarlos?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("idcity"),object:"user_city"},success:function(t){var r=Ext.JSON.decode(t.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("idcity"),object:"cities"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("City").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}});Ext.getStore("City").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})}else{Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("idcity"),object:"cities"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("City").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})},salesPoint:function(e,t,n,r,i){Ext.getStore("SalePoint").getProxy().setExtraParam("idcity",e.getStore().getAt(n).get("idcity"));Ext.getStore("SalePoint").load();var s=false;var o=Ext.getCmp("contenido");var u=null;Ext.each(o.items.items,function(e,t,n){if(e.alias=="widget.listSalesPoint"){s=true;u=e}});if(!s){u=Ext.widget("listSalesPoint");o.add(u)}u.setTitle("Listado puntos de venta de la ciudad "+e.getStore().getAt(n).get("name"));Ext.getCmp("contenido").setActiveTab(u)},insertSalePoint:function(e,t){var n=Ext.widget("formSalePoint");n.down("form").loadRecord(Ext.create("flybox.model.SalePoint"));n.down("form").getForm().findField("idcity").setValue(Ext.getStore("SalePoint").getProxy().extraParams.idcity)},editSalePoint:function(e,t,n,r,i){var s=Ext.widget("formSalePoint");s.down("form").loadRecord(e.getStore().getAt(n));s.down("form").getForm().findField("idcity").setValue(e.getStore().getAt(n).get("city").idcity)},editDblSalePoint:function(e,t){var n=Ext.widget("formSalePoint");n.down("form").loadRecord(t);n.down("form").getForm().findField("idcity").setValue(t.get("city").idcity)},saveSalePoint:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idsalepoint").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("SalePoint").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},removeSalePoint:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("idsalepoint"),object:"salesPoint"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("SalePoint").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})}});Ext.create("Ext.app.Controller",{control:{"listDeliveryCompanies button[action=insert]":{click:"insert"},"listDeliveryCompanies button[action=clean]":{click:"cleanFilters"},listDeliveryCompanies:{itemdblclick:"editDbl"},"listDeliveryCompanies actioncolumn[action=edit]":{click:"edit"},"listDeliveryCompanies actioncolumn[action=remove]":{click:"remove"},"formDeliveryCompany button[action=cancel]":{click:"cancel"},"formDeliveryCompany button[action=save]":{click:"save"}},insert:function(e,t){Ext.getStore("Country").load({callback:function(){Ext.widget("formDeliveryCompany").down("form").loadRecord(Ext.create("flybox.model.DeliveryCompany"))}})},cleanFilters:function(e,t){e.up("grid").filters.clearFilters();Ext.getStore("DeliveryCompany").load()},cancel:function(e,t){e.up("window").close()},edit:function(e,t,n,r,i){Ext.getStore("Country").load({callback:function(){var t=e.getStore().getAt(n);var r=Ext.widget("formDeliveryCompany");r.down("form").loadRecord(t);r.down("form").getForm().findField("idcountry").setValue(t.get("country").idcountry)}})},editDbl:function(e,t){Ext.getStore("Country").load({callback:function(){var e=Ext.widget("formDeliveryCompany");e.down("form").loadRecord(t);e.down("form").getForm().findField("idcountry").setValue(t.get("country").idcountry)}})},save:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("iddeliverycompany").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("DeliveryCompany").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},remove:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("iddeliverycompany"),object:"deliveryCompanies"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("DeliveryCompany").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})}});Ext.create("Ext.app.Controller",{control:{"listDispatchedPackages actioncolumn[action=printer]":{click:"reprintLabel"},"listDispatchedPackages button[action=clean]":{click:"cleanFilters"},"formDispatchedPackage button[action=cancel]":{click:"cancel"},"formFilterCountryMiles button[text=Buscar]":{click:"findMiles"},"formMiles button[action=cancel]":{click:"cancel"},"formMiles button[action=save]":{click:"generateMiles"}},cleanFilters:function(e,t){e.up("grid").filters.clearFilters();Ext.getStore("DispatchedPackage").load()},cancel:function(e,t){e.up("window").close()},findMiles:function(e,t){if(e.up("form").getForm().isValid()){Ext.getStore("FE_Miles").getProxy().setExtraParam("date_begin",e.up("form").getForm().findField("date_begin").getValue());Ext.getStore("FE_Miles").getProxy().setExtraParam("date_end",e.up("form").getForm().findField("date_end").getValue());Ext.getStore("FE_Miles").load()}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},generateMiles:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){window.open("reports/"+i.msg.file,"_blank")}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},reprintLabel:function(e,t,n,r,i){Ext.Ajax.request({url:"update/save_object.aspx",params:{object:"printLabelDispatched",id:e.getStore().getAt(n).get("iddispatch")},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})},failed:function(e,t,n){var r=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}});Ext.create("Ext.app.Controller",{control:{"listEconomySectors button[action=insert]":{click:"insert"},"listEconomySectors button[action=clean]":{click:"cleanFilters"},listEconomySectors:{itemdblclick:"editDbl"},"listEconomySectors actioncolumn[action=edit]":{click:"edit"},"listEconomySectors actioncolumn[action=remove]":{click:"remove"},"formEconomySector button[action=cancel]":{click:"cancel"},"formEconomySector button[action=save]":{click:"save"}},cleanFilters:function(e,t){e.up("grid").filters.clearFilters();Ext.getStore("EconomySector").load()},insert:function(e,t){Ext.widget("formEconomySector").down("form").loadRecord(Ext.create("flybox.model.EconomySector"))},cancel:function(e,t){e.up("window").close()},edit:function(e,t,n,r,i){Ext.widget("formEconomySector").down("form").loadRecord(e.getStore().getAt(n))},editDbl:function(e,t){Ext.widget("formEconomySector").down("form").loadRecord(t)},save:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("ideconomysector").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("EconomySector").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},remove:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("ideconomysector"),object:"economySectors"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("EconomySector").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})}});Ext.create("Ext.app.Controller",{control:{"listGroups button[action=insert]":{click:"insert"},"listGroups button[action=clean]":{click:"cleanFilters"},listGroups:{itemdblclick:"editDbl"},"listGroups actioncolumn[action=countries]":{click:"countries"},"listGroups actioncolumn[action=applications]":{click:"applications"},"listGroups actioncolumn[action=users]":{click:"users"},"listGroups actioncolumn[action=edit]":{click:"edit"},"listGroups actioncolumn[action=remove]":{click:"remove"},"formGroup button[action=cancel]":{click:"cancel"},"formGroup button[action=save]":{click:"save"},"listUsersGroup grid#gridDestination dataview":{drop:"insertUser"},"listUsersGroup grid#gridSource dataview":{drop:"removeUser"},"listApplicationsGroup grid#gridDestination dataview":{drop:"insertApplication"},"listApplicationsGroup grid#gridSource dataview":{drop:"removeApplication"},"listCountriesGroup grid#gridDestination dataview":{drop:"insertCountry"},"listCountriesGroup grid#gridSource dataview":{drop:"removeCountry"}},countries:function(e,t,n,r,i){Ext.getStore("CountriesGroup").getProxy().setExtraParam("idgroup",e.getStore().getAt(n).get("idgroup"));Ext.getStore("CountriesGroup").load({callback:function(){Ext.getStore("NoCountriesGroup").getProxy().setExtraParam("idgroup",e.getStore().getAt(n).get("idgroup"));Ext.getStore("NoCountriesGroup").load({callback:function(){panel=Ext.widget("listCountriesGroup");panel.setTitle("Listado paises asignados al grupo "+e.getStore().getAt(n).get("name"))}})}})},applications:function(e,t,n,r,i){Ext.getStore("ApplicationsGroup").getProxy().setExtraParam("idgroup",e.getStore().getAt(n).get("idgroup"));Ext.getStore("ApplicationsGroup").load();Ext.getStore("NoApplicationsGroup").getProxy().setExtraParam("idgroup",e.getStore().getAt(n).get("idgroup"));Ext.getStore("NoApplicationsGroup").load();panel=Ext.widget("listApplicationsGroup");panel.setTitle("Listado aplicaciones asignadas al grupo "+e.getStore().getAt(n).get("name"))},users:function(e,t,n,r,i){Ext.getStore("UsersGroup").getProxy().setExtraParam("idgroup",e.getStore().getAt(n).get("idgroup"));Ext.getStore("UsersGroup").load();Ext.getStore("NoUsersGroup").getProxy().setExtraParam("idgroup",e.getStore().getAt(n).get("idgroup"));Ext.getStore("NoUsersGroup").load();panel=Ext.widget("listUsersGroup");panel.setTitle("Listado usuarios asignados al grupo "+e.getStore().getAt(n).get("name"))},insert:function(e,t){Ext.widget("formGroup").down("form").loadRecord(Ext.create("flybox.model.Group"))},cleanFilters:function(e,t){Ext.getStore("Group").load();e.up("grid").filters.clearFilters()},cancel:function(e,t){e.up("window").close()},edit:function(e,t,n,r,i){Ext.widget("formGroup").down("form").loadRecord(e.getStore().getAt(n))},editDbl:function(e,t){Ext.widget("formGroup").down("form").loadRecord(t)},save:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idgroup").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Group").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},remove:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("idgroup"),object:"groups"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Group").load()}})},failed:function(e,t,n){var r=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})},insertUser:function(e,t,n,r){Ext.each(t.records,function(e,t,n){Ext.Ajax.request({url:"update/save_object.aspx",params:{idgroup:Ext.getStore("UsersGroup").getProxy().extraParams.idgroup,id:0,object:"userGroup",iduser:e.get("iduser")},success:function(e,t,n){var r=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})},failure:function(e,t,n){var r=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}})})},removeUser:function(e,t,n,r){Ext.each(t.records,function(e,t,n){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{idgroup:Ext.getStore("UsersGroup").getProxy().extraParams.idgroup,object:"userGroup",iduser:e.get("iduser")},success:function(e,t,n){var r=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})},failure:function(e,t,n){var r=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}})})},insertApplication:function(e,t,n,r){Ext.each(t.records,function(e,t,n){Ext.Ajax.request({url:"update/save_object.aspx",params:{idgroup:Ext.getStore("ApplicationsGroup").getProxy().extraParams.idgroup,object:"applicationGroup",id:0,idapplication:e.get("idapplication")},success:function(e,t,n){var r=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})},failure:function(e,t,n){var r=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}})})},removeApplication:function(e,t,n,r){Ext.each(t.records,function(e,t,n){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{idgroup:Ext.getStore("ApplicationsGroup").getProxy().extraParams.idgroup,object:"applicationGroup",idapplication:e.get("idapplication")},success:function(e,t,n){var r=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})},failure:function(e,t,n){var r=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}})})},insertCountry:function(e,t,n,r){Ext.each(t.records,function(e,t,n){Ext.Ajax.request({url:"update/save_object.aspx",params:{idgroup:Ext.getStore("CountriesGroup").getProxy().extraParams.idgroup,object:"countryGroup",id:0,idcountry:e.get("idcountry")},success:function(e,t,n){var r=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})},failure:function(e,t,n){var r=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}})})},removeCountry:function(e,t,n,r){Ext.each(t.records,function(e,t,n){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{idgroup:Ext.getStore("CountriesGroup").getProxy().extraParams.idgroup,object:"countryGroup",idcountry:e.get("idcountry")},success:function(e,t,n){var r=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})},failure:function(e,t,n){var r=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}})})}});Ext.create("Ext.app.Controller",{control:{"listGroupsTracking button[action=insert]":{click:"insert"},"listGroupsTracking button[action=clean]":{click:"cleanFilters"},listGroupsTracking:{itemdblclick:"editDbl"},"listGroupsTracking actioncolumn[action=edit]":{click:"edit"},"listGroupsTracking actioncolumn[action=remove]":{click:"remove"},"formGroupTracking button[action=cancel]":{click:"cancel"},"formGroupTracking button[action=save]":{click:"save"}},insert:function(e,t){Ext.widget("formGroupTracking").down("form").loadRecord(Ext.create("flybox.model.GroupTracking"))},cleanFilters:function(e,t){e.up("grid").filters.clearFilters();Ext.getStore("GroupTracking").load()},cancel:function(e,t){e.up("window").close()},edit:function(e,t,n,r,i){Ext.widget("formGroupTracking").down("form").loadRecord(e.getStore().getAt(n))},editDbl:function(e,t){Ext.widget("formGroupTracking").down("form").loadRecord(t)},save:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idgrouptracking").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("GroupTracking").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},remove:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("idgrouptracking"),object:"groupsTracking"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("GroupTracking").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})}});Ext.create("Ext.app.Controller",{control:{"listInfoMethods button[action=insert]":{click:"insert"},"listInfoMethods button[action=clean]":{click:"cleanFilters"},listInfoMethods:{itemdblclick:"editDbl"},"listInfoMethods actioncolumn[action=edit]":{click:"edit"},"listInfoMethods actioncolumn[action=remove]":{click:"remove"},"formInfoMethod button[action=cancel]":{click:"cancel"},"formInfoMethod button[action=save]":{click:"save"}},cleanFilters:function(e,t){e.up("grid").filters.clearFilters();Ext.getStore("InfoMethod").load()},insert:function(e,t){Ext.widget("formInfoMethod").down("form").loadRecord(Ext.create("flybox.model.InfoMethod"))},cancel:function(e,t){e.up("window").close()},edit:function(e,t,n,r,i){Ext.widget("formInfoMethod").down("form").loadRecord(e.getStore().getAt(n))},editDbl:function(e,t){Ext.widget("formInfoMethod").down("form").loadRecord(t)},save:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idinfomethod").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("InfoMethod").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},remove:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("idinfomethod"),object:"infoMethods"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("InfoMethod").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})}});Ext.create("Ext.app.Controller",{control:{"listLevelsAccess button[action=insert]":{click:"insert"},"listLevelsAccess button[action=clean]":{click:"cleanFilters"},listLevelsAccess:{itemdblclick:"editDbl"},"listLevelsAccess actioncolumn[action=edit]":{click:"edit"},"listLevelsAccess actioncolumn[action=remove]":{click:"remove"},"formLevelAccess button[action=cancel]":{click:"cancel"},"formLevelAccess button[action=save]":{click:"save"}},cleanFilters:function(e,t){e.up("grid").filters.clearFilters()},insert:function(e,t){Ext.widget("formLevelAccess").down("form").loadRecord(Ext.create("flybox.model.LevelAccess"))},cancel:function(e,t){e.up("window").close()},edit:function(e,t,n,r,i){Ext.widget("formLevelAccess").down("form").loadRecord(e.getStore().getAt(n))},editDbl:function(e,t){Ext.widget("formLevelAccess").down("form").loadRecord(t)},save:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idlevelaccess").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("LevelAccess").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},remove:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("idlevelaccess"),object:"levelsAccess"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("LevelAccess").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})}});Ext.create("Ext.app.Controller",{control:{"listListCustomers button[action=insert]":{click:"insert"},"listListCustomers button[action=clean]":{click:"cleanFilters"},listListCustomers:{itemdblclick:"editDbl"},"listListCustomers actioncolumn[action=edit]":{click:"edit"},"listListCustomers actioncolumn[action=remove]":{click:"remove"},"formListCustomer button[action=cancel]":{click:"cancel"},"formListCustomer button[action=save]":{click:"save"}},insert:function(e,t){Ext.widget("formListCustomer").down("form").loadRecord(Ext.create("flybox.model.ListCustomer"))},cleanFilters:function(e,t){e.up("grid").filters.clearFilters()},cancel:function(e,t){e.up("window").close()},edit:function(e,t,n,r,i){Ext.widget("formListCustomer").down("form").loadRecord(e.getStore().getAt(n))},editDbl:function(e,t){Ext.widget("formListCustomer").down("form").loadRecord(t)},save:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idlistcustomer").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("ListCustomer").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},remove:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("idlistcustomer"),object:"listCustomers"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("ListCustomer").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})}});Ext.create("Ext.app.Controller",{control:{"listLockers button[action=clean]":{click:"cleanFilters"},listLockers:{itemdblclick:"editDbl"},"listLockers actioncolumn[action=user]":{click:"user"},"listLockers actioncolumn[action=edit]":{click:"edit"},"formLocker button[action=save]":{click:"save"},"formLocker button[action=cancel]":{click:"cancel"},"formLocker combo[name=idstatelocker]":{change:"changeStateLocker"},"formCustomer combo[name=idtypelocker]":{change:"changeTypeLocker"},"formCustomer combo[name=idcountry]":{change:"changeCountry"},"formCustomer combo[name=idcity]":{change:"changeCity"},"formCustomer combo[name=delivery_salepoint]":{change:"changeDeliverySalePoint"},"formCustomer button[action=chageSecretQuestion]":{click:"chageSecretQuestion"},"formCustomer button[action=changePassword]":{click:"changePassword"},"formCustomer button[action=save]":{click:"saveCustomer"},"formCustomer button[action=cancel]":{click:"cancel"},"formCustomer button[action=addAuthorized]":{click:"addAuthorizedAdmon"},"formCustomer grid actioncolumn[action=edit]":{click:"editAuthorizedAdmon"},"formCustomer grid":{itemdblclick:"editDblAuthorizedAdmon"},"formCustomer grid actioncolumn[action=remove]":{click:"removeAuthorizedAdmon"},"formReportLocker button[action=save]":{click:"saveReport"},"formReportLocker button[action=cancel]":{click:"cancel"},"formReportBehavior button[action=save]":{click:"saveReportBehavior"},"formReportBehavior button[action=cancel]":{click:"cancel"},"formCustomerUserData combo[name=idtypelocker]":{change:"changeTypeLockerUserData"},"formCustomerUserData combo[name=idcountry]":{change:"changeCountryCustomer"},"formCustomerUserData combo[name=idcity]":{change:"changeCityCustomer"},"formCustomerUserData combo[name=delivery_salepoint]":{change:"changeDeliverySalePointCustomer"},"formCustomerUserData button[name=addAuthorized]":{click:"addAuthorized"},"formCustomerUserData button[name=changeSecretQuestion]":{click:"changeSecretQuestionCustomer"},"formCustomerUserData button[name=changePassword]":{click:"changePasswordCustomer"},"formCustomerUserData button[name=save]":{click:"saveCustomerData"},"formCustomerUserData grid actioncolumn[action=edit]":{click:"editAuthorized"},"formCustomerUserData grid":{itemdblclick:"editDblAuthorized"},"formCustomerUserData grid actioncolumn[action=remove]":{click:"removeAuthorized"},formAuthorized:{afterrender:"afterRenderForm"},"formAuthorized button[action=save]":{click:"saveAuthorized"},"formAuthorized button[action=cancel]":{click:"cancel"},"formAuthorizedAdmon button[action=save]":{click:"saveAuthorizedAdmon"},"formAuthorizedAdmon button[action=cancel]":{click:"cancel"},formChangeSecretQuestion:{afterrender:"afterRenderForm"},"formChangeSecretQuestion button[action=save]":{click:"saveChangeSecretQuestion"},"formChangeSecretQuestion button[action=cancel]":{click:"cancel"},formChangePasswordCustomer:{afterrender:"afterRenderForm"},"formChangePasswordCustomer button[action=save]":{click:"saveChangePassword"},"formChangePasswordCustomer button[action=cancel]":{click:"cancel"}},cleanFilters:function(e,t){e.up("grid").filters.clearFilters();Ext.getStore("Locker").load()},cancel:function(e,t){e.up("window").close()},edit:function(e,t,n,r,i){Ext.getStore("TypeLocker").load({callback:function(){Ext.getStore("StateLocker").load({callback:function(){Ext.getStore("RejectionReason").load({callback:function(){var t=Ext.widget("formLocker");t.down("form").loadRecord(e.getStore().getAt(n));t.down("form").getForm().findField("idtypelocker").setValue(e.getStore().getAt(n).get("type").idtypelocker);t.down("form").getForm().findField("user").setValue(e.getStore().getAt(n).get("user").name);t.down("form").getForm().findField("idstatelocker").setValue(e.getStore().getAt(n).get("stateLocker").idstatelocker);t.down("form").getForm().findField("iduser").setValue(e.getStore().getAt(n).get("user").iduser)}})}})}})},editDbl:function(e,t){Ext.getStore("TypeLocker").load({callback:function(){Ext.getStore("StateLocker").load({callback:function(){Ext.getStore("RejectionReason").load({callback:function(){var e=Ext.widget("formLocker");e.down("form").loadRecord(t);e.down("form").getForm().findField("idtypelocker").setValue(t.get("type").idtypelocker);e.down("form").getForm().findField("user").setValue(t.get("user").name);e.down("form").getForm().findField("idstatelocker").setValue(t.get("stateLocker").idstatelocker);e.down("form").getForm().findField("iduser").setValue(t.get("user").iduser)}})}})}})},user:function(e,t,n,r,i){var s=Ext.widget("formCustomer");var o=new Ext.LoadMask(s,{msg:"cargando"});o.show();Ext.getStore("Customer").getProxy().setExtraParam("iduser",e.getStore().getAt(n).get("user").iduser);Ext.getStore("Authorized").getProxy().setExtraParam("iduser",e.getStore().getAt(n).get("user").iduser);Ext.getStore("Authorized").load({callback:function(){Ext.getStore("Customer").load({callback:function(t,r){Ext.getStore("TypeLocker").load({callback:function(){Ext.getStore("TypeID").load({callback:function(){Ext.getStore("Country").load({callback:function(){Ext.getStore("EconomySector").load({start:0,limit:100,callback:function(){Ext.getStore("Occupation").load({start:0,limit:100,callback:function(){Ext.getStore("InfoMethod").load({callback:function(){Ext.getStore("ListCustomer").load({callback:function(){s.down("form").loadRecord(t[0]);s.down("form").getForm().findField("idtypelocker").setValue(e.getStore().getAt(n).get("type").idtypelocker);s.down("form").getForm().findField("iduser").setValue(t[0].get("user").iduser);s.down("form").getForm().findField("id").setValue(t[0].get("user").iduser);s.down("form").getForm().findField("idtypeid").setValue(t[0].get("typeID").idtypeid);s.down("form").getForm().findField("facebookUserID").setValue(t[0].get("facebookUserID"));s.down("form").getForm().findField("identification").setValue(t[0].get("id"));s.down("form").getForm().findField("idcountry").setValue(t[0].get("country").idcountry);s.down("form").getForm().findField("idcity").setValue(t[0].get("city").idcity);s.down("form").getForm().findField("ideconomysector").setValue(t[0].get("economySector").ideconomysector);s.down("form").getForm().findField("delivery_salepoint").setValue(t[0].get("salePoint").idsalepoint==0?0:1);if(t[0].get("salePoint").idsalepoint!=0){Ext.getStore("SalePoint").getProxy().setExtraParam("idcity",t[0].get("city").idcity);Ext.getStore("SalePoint").load({callback:function(){s.down("form").getForm().findField("idsalepoint").setValue(t[0].get("salePoint").idsalepoint)}});s.down("form").getForm().findField("idsalepoint").setValue(t[0].get("salePoint").idsalepoint)}s.down("form").getForm().findField("idoccupation").setValue(t[0].get("occupation").idoccupation);s.down("form").getForm().findField("email").setValue(t[0].get("user").email);s.down("form").getForm().findField("idinfomethod").setValue(t[0].get("infoMethod").idinfomethod);s.down("form").getForm().findField("idlistcustomer").setValue(t[0].get("listCustomer").idlistcustomer);o.hide()}})}})}})}})}})}})}})}})}})},chageSecretQuestion:function(e,t){Ext.getStore("SecretQuestion").load({callback:function(){Ext.create("Ext.window.Window",{title:"Cambiar pregunta y respuesta recreta",iconCls:"edit",width:300,modal:true,layout:"fit",autoShow:true,items:[{xtype:"form",url:"update/save_object.aspx",defaults:{labelAlign:"right"},frame:true,items:[{xtype:"hiddenfield",name:"iduser",value:e.up("form").getForm().findField("iduser").getValue()},{xtype:"hiddenfield",name:"id",value:0},{xtype:"hiddenfield",name:"object",value:"changeSecretQuestion"},{xtype:"combo",name:"idsecretquestion",forceSelection:true,typeAhead:true,allowBlank:false,store:"SecretQuestion",fieldLabel:"Pregunta secreta *",valueField:"idsecretquestion",displayField:"name",queryMode:"local"},{xtype:"textfield",name:"secret_answer",inputType:"password",value:"",allowBlank:true,fieldLabel:"Respuesta secreta *"}],buttons:[{text:"Guardar",handler:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}}},{text:"Cancelar",handler:function(e,t){e.up("window").close()}}],bbar:["* Campos obligatorios"]}]})}})},changePassword:function(e,t){Ext.create("Ext.window.Window",{title:"Cambiar contraseña",iconCls:"edit",width:300,modal:true,layout:"fit",autoShow:true,items:[{xtype:"form",url:"update/change_user_pass.aspx",defaults:{labelAlign:"right"},frame:true,items:[{xtype:"hiddenfield",name:"iduser",value:e.up("form").getForm().findField("iduser").getValue()},{xtype:"textfield",name:"pass",itemId:"pass",regex:/(?!^[0-9]*$)(?!^[a-zA-Z]*$)^([a-zA-Z0-9_-]{8,})$/,regexText:"La contraseña debe tener números y letras y mínimo 8 caracteres",vtype:"alphanum",value:"",allowBlank:false,inputType:"password",anchor:"90%",fieldLabel:"* Contraseña"},{xtype:"textfield",name:"confirm",value:"",allowBlank:false,vtype:"password",initialPassField:"pass",inputType:"password",anchor:"90%",fieldLabel:"* Confirmación"}],buttons:[{text:"Guardar",handler:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}}},{text:"Cancelar",handler:function(e,t){e.up("window").close()}}],bbar:["* Campos obligatorios"]}]})},save:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idlocker").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Locker").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},saveReport:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){window.open("./reports/"+i.msg.file,"_blank")}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},saveReportBehavior:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){window.open("./reports/"+i.msg.file,"_blank")}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},saveCustomer:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("iduser").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Locker").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},changeTypeLocker:function(e,t,n,r){if(t==1){e.up("form").getForm().findField("name").setVisible(true);e.up("form").getForm().findField("name").setFieldLabel("Nombres *");e.up("form").getForm().findField("lastname").setVisible(true);e.up("form").getForm().findField("lastname").allowBlank=false;e.up("form").getForm().findField("idtypeid").setVisible(true);e.up("form").getForm().findField("idtypeid").allowBlank=false;e.up("form").getForm().findField("identification").setFieldLabel("Identificación *");e.up("form").getForm().findField("identification").setVisible(true);e.up("form").getForm().findField("idcountry").setVisible(true);e.up("form").getForm().findField("idcity").setVisible(true);e.up("form").getForm().findField("ideconomysector").setVisible(false);e.up("form").getForm().findField("ideconomysector").allowBlank=true;e.up("form").getForm().findField("delivery_salepoint").setVisible(true);e.up("form").getForm().findField("address").setVisible(true);e.up("form").getForm().findField("homePhone").setVisible(true);e.up("form").getForm().findField("phone").setVisible(true);e.up("form").getForm().findField("nameContact").setVisible(false);e.up("form").getForm().findField("nameContact").allowBlank=true;e.up("form").getForm().findField("phoneContact").setVisible(false);e.up("form").getForm().findField("phoneContact").allowBlank=true;e.up("form").getForm().findField("idoccupation").setVisible(true);e.up("form").getForm().findField("email").setVisible(true);e.up("form").getForm().findField("alternateEmail").setVisible(true);e.up("form").getForm().findField("idoccupation").setVisible(true);e.up("form").getForm().findField("idoccupation").allowBlank=false;e.up("form").getForm().findField("birthday").setVisible(true);e.up("form").getForm().findField("birthday").allowBlank=false;e.up("form").getForm().findField("lifemiles").setVisible(true);e.up("form").getForm().findField("idinfomethod").setVisible(true)}else{e.up("form").getForm().findField("name").setVisible(true);e.up("form").getForm().findField("name").setFieldLabel("Nombre compañía *");e.up("form").getForm().findField("lastname").setVisible(false);e.up("form").getForm().findField("lastname").allowBlank=true;e.up("form").getForm().findField("idtypeid").setVisible(false);e.up("form").getForm().findField("idtypeid").allowBlank=true;e.up("form").getForm().findField("identification").setFieldLabel("NIT *");e.up("form").getForm().findField("identification").setVisible(true);e.up("form").getForm().findField("idcountry").setVisible(true);e.up("form").getForm().findField("idcity").setVisible(true);e.up("form").getForm().findField("ideconomysector").setVisible(true);e.up("form").getForm().findField("ideconomysector").allowBlank=false;e.up("form").getForm().findField("delivery_salepoint").setVisible(true);e.up("form").getForm().findField("address").setVisible(true);e.up("form").getForm().findField("homePhone").setVisible(true);e.up("form").getForm().findField("phone").setVisible(true);e.up("form").getForm().findField("email").setVisible(true);e.up("form").getForm().findField("alternateEmail").setVisible(true);e.up("form").getForm().findField("nameContact").setVisible(true);e.up("form").getForm().findField("nameContact").allowBlank=false;e.up("form").getForm().findField("phoneContact").setVisible(true);e.up("form").getForm().findField("phoneContact").allowBlank=false;e.up("form").getForm().findField("idoccupation").setVisible(false);e.up("form").getForm().findField("idoccupation").allowBlank=true;e.up("form").getForm().findField("birthday").setVisible(false);e.up("form").getForm().findField("birthday").allowBlank=true;e.up("form").getForm().findField("lifemiles").setVisible(true);e.up("form").getForm().findField("idinfomethod").setVisible(true)}},changeStateLocker:function(e,t,n,r){if(t==2){e.up("form").getForm().findField("dateReject").setVisible(true);e.up("form").getForm().findField("idrejectionreason").setVisible(true);e.up("form").getForm().findField("idrejectionreason").allowBlank=false}else{e.up("form").getForm().findField("dateReject").setVisible(false);e.up("form").getForm().findField("idrejectionreason").setVisible(false);e.up("form").getForm().findField("idrejectionreason").allowBlank=true}},changeCountry:function(e,t,n,r){if(Ext.isNumber(t)){Ext.getStore("City").getProxy().setExtraParam("idcountry",t);Ext.getStore("City").load({start:0,limit:1e4})}},changeCity:function(e,t,n,r){if(Ext.isNumber(t)){Ext.getStore("SalePoint").getProxy().setExtraParam("idcity",t);Ext.getStore("SalePoint").load()}},changeDeliverySalePoint:function(e,t,n,r){if(t==1){e.up("form").getForm().findField("idsalepoint").setVisible(true);e.up("form").getForm().findField("address").setVisible(false);e.up("form").getForm().findField("address").allowBlank=true;e.up("form").getForm().findField("idsalepoint").allowBlank=false}else{e.up("form").getForm().findField("idsalepoint").setVisible(false);e.up("form").getForm().findField("address").setVisible(true);e.up("form").getForm().findField("address").allowBlank=false;e.up("form").getForm().findField("idsalepoint").allowBlank=true}},changeTypeLockerUserData:function(e,t,n,r){if(t==1){e.up("form").getForm().findField("type_locker").setValue("<h2>Registro de cliente personal</h2>");e.up("form").getForm().findField("type_locker").setVisible(true);e.up("form").getForm().findField("basic_data").setVisible(true);e.up("form").getForm().findField("name").setVisible(true);e.up("form").getForm().findField("name").setFieldLabel("Nombres *");e.up("form").getForm().findField("lastname").setVisible(true);e.up("form").getForm().findField("lastname").allowBlank=false;e.up("form").getForm().findField("idtypeid").setVisible(true);e.up("form").getForm().findField("idtypeid").allowBlank=false;e.up("form").getForm().findField("identification").setFieldLabel("Identificación *");e.up("form").getForm().findField("identification").setVisible(true);e.up("form").getForm().findField("idcountry").setVisible(true);e.up("form").getForm().findField("idcity").setVisible(true);e.up("form").getForm().findField("ideconomysector").setVisible(false);e.up("form").getForm().findField("ideconomysector").allowBlank=true;e.up("form").getForm().findField("shipping_data").setVisible(true);e.up("form").getForm().findField("delivery_salepoint").setVisible(true);e.up("form").getForm().findField("address").setVisible(true);e.up("form").getForm().findField("homePhone").setVisible(true);e.up("form").getForm().findField("phone").setVisible(true);e.up("form").getForm().findField("contact_data").setValue("<h2>Datos personales</h2>");e.up("form").getForm().findField("contact_data").setVisible(true);e.up("form").getForm().findField("leyend").setVisible(true);e.up("form").getForm().findField("nameContact").setVisible(false);e.up("form").getForm().findField("nameContact").allowBlank=true;e.up("form").getForm().findField("phoneContact").setVisible(false);e.up("form").getForm().findField("phoneContact").allowBlank=true;e.up("form").getForm().findField("idoccupation").setVisible(true);e.up("form").getForm().findField("email").setVisible(true);e.up("form").getForm().findField("alternateEmail").setVisible(true);e.up("form").getForm().findField("idoccupation").setVisible(true);e.up("form").getForm().findField("idoccupation").allowBlank=false;e.up("form").getForm().findField("birthday").setVisible(true);e.up("form").getForm().findField("birthday").allowBlank=false;e.up("form").getForm().findField("lifemiles").setVisible(true);e.up("form").getForm().findField("idinfomethod").setVisible(true)}else{e.up("form").getForm().findField("type_locker").setValue("<h2>Registro de cliente empresarial</h2>");e.up("form").getForm().findField("type_locker").setVisible(true);e.up("form").getForm().findField("basic_data").setVisible(true);e.up("form").getForm().findField("name").setVisible(true);e.up("form").getForm().findField("name").setFieldLabel("Nombre compañía *");e.up("form").getForm().findField("lastname").setVisible(false);e.up("form").getForm().findField("lastname").allowBlank=true;e.up("form").getForm().findField("idtypeid").setVisible(false);e.up("form").getForm().findField("idtypeid").allowBlank=true;e.up("form").getForm().findField("identification").setFieldLabel("NIT *");e.up("form").getForm().findField("identification").setVisible(true);e.up("form").getForm().findField("idcountry").setVisible(true);e.up("form").getForm().findField("idcity").setVisible(true);e.up("form").getForm().findField("ideconomysector").setVisible(true);e.up("form").getForm().findField("ideconomysector").allowBlank=false;e.up("form").getForm().findField("shipping_data").setVisible(true);e.up("form").getForm().findField("delivery_salepoint").setVisible(true);e.up("form").getForm().findField("address").setVisible(true);e.up("form").getForm().findField("homePhone").setVisible(true);e.up("form").getForm().findField("phone").setVisible(true);e.up("form").getForm().findField("contact_data").setValue("<h2>Datos de contacto</h2>");e.up("form").getForm().findField("contact_data").setVisible(true);e.up("form").getForm().findField("leyend").setVisible(true);e.up("form").getForm().findField("email").setVisible(true);e.up("form").getForm().findField("alternateEmail").setVisible(true);e.up("form").getForm().findField("nameContact").setVisible(true);e.up("form").getForm().findField("nameContact").allowBlank=false;e.up("form").getForm().findField("phoneContact").setVisible(true);e.up("form").getForm().findField("phoneContact").allowBlank=false;e.up("form").getForm().findField("idoccupation").setVisible(false);e.up("form").getForm().findField("idoccupation").allowBlank=true;e.up("form").getForm().findField("birthday").setVisible(false);e.up("form").getForm().findField("birthday").allowBlank=true;e.up("form").getForm().findField("lifemiles").setVisible(true);e.up("form").getForm().findField("idinfomethod").setVisible(true)}},changeCountryCustomer:function(e,t,n,r){if(Ext.isNumber(t)){Ext.getStore("FE_City").getProxy().setExtraParam("idcountry",t);Ext.getStore("FE_City").load({start:0,limit:1e4})}},changeCityCustomer:function(e,t,n,r){if(Ext.isNumber(t)){Ext.getStore("FE_SalePoint").getProxy().setExtraParam("idcity",t);Ext.getStore("FE_SalePoint").load()}},changeDeliverySalePointCustomer:function(e,t,n,r){if(t==1){e.up("form").getForm().findField("idsalepoint").setVisible(true);e.up("form").getForm().findField("address").setVisible(false);e.up("form").getForm().findField("address").allowBlank=true;e.up("form").getForm().findField("idsalepoint").allowBlank=false}else{e.up("form").getForm().findField("idsalepoint").setVisible(false);e.up("form").getForm().findField("address").setVisible(true);e.up("form").getForm().findField("address").allowBlank=false;e.up("form").getForm().findField("idsalepoint").allowBlank=true}},addAuthorized:function(e,t){if(Ext.getStore("FE_Authorized").getCount()<3){Ext.widget("formAuthorized").down("form").loadRecord(Ext.create("flybox.model.Athorized"))}else{Ext.MessageBox.show({title:"Error",msg:"Solo puede adicionar un máximo de 3 autorizaciones",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},editAuthorized:function(e,t,n,r,i){Ext.widget("formAuthorized").down("form").loadRecord(e.getStore().getAt(n))},editDblAuthorized:function(e,t){Ext.widget("formAuthorized").down("form").loadRecord(t)},removeAuthorized:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el autorizado?",function(t){if(t=="yes"){Ext.Ajax.request({url:"ajax/delete_object.aspx",params:{id:e.getStore().getAt(n).get("idauthorized"),object:"authorized"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("FE_Authorized").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})},addAuthorizedAdmon:function(e,t){if(Ext.getStore("Authorized").getCount()<3){var n=Ext.widget("formAuthorizedAdmon");n.down("form").loadRecord(Ext.create("flybox.model.Authorized"));n.down("form").getForm().findField("iduser").setValue(Ext.getStore("Authorized").getProxy().extraParams.iduser)}else{Ext.MessageBox.show({title:"Error",msg:"Solo puede adicionar un máximo de 3 autorizaciones",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},editAuthorizedAdmon:function(e,t,n,r,i){var s=Ext.widget("formAuthorizedAdmon");s.down("form").loadRecord(e.getStore().getAt(n));s.down("form").getForm().findField("iduser").setValue(e.getStore().getAt(n).get("user").iduser)},editDblAuthorizedAdmon:function(e,t){var n=Ext.widget("formAuthorizedAdmon");n.down("form").loadRecord(t);n.down("form").getForm().findField("iduser").setValue(t.get("user").iduser)},removeAuthorizedAdmon:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el autorizado?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("idauthorized"),object:"authorizeds"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Authorized").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})},afterRenderForm:function(e,t){e.setPosition(Ext.getBody().getWidth()/2-e.getWidth()/2,(document.documentElement||document.body).scrollTop+100)},saveAuthorized:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idauthorized").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("FE_Authorized").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},saveAuthorizedAdmon:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idauthorized").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Authorized").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},saveChangeSecretQuestion:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},changeSecretQuestionCustomer:function(e,t){Ext.widget("formChangeSecretQuestion")},changePasswordCustomer:function(e,t){Ext.widget("formChangePasswordCustomer")},saveChangePassword:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},saveCustomerData:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("iduser").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(e,t,n){var r=Ext.JSON.decode(t.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){window.location="verpaquetesporautorizar.aspx"}})},failure:function(e,t){var n=Ext.JSON.decode(t.response.responseText);Ext.MessageBox.show({title:n.msg.title,msg:n.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}}});Ext.create("Ext.app.Controller",{control:{"listMeasuringsSystem button[action=insert]":{click:"insert"},"listMeasuringsSystem button[action=clean]":{click:"cleanFilters"},listMeasuringsSystem:{itemdblclick:"editDbl"},"listMeasuringsSystem actioncolumn[action=group]":{click:"group"},"listMeasuringsSystem actioncolumn[action=edit]":{click:"edit"},"listMeasuringsSystem actioncolumn[action=remove]":{click:"remove"},"formMeasuringSystem button[action=cancel]":{click:"cancel"},"formMeasuringSystem button[action=save]":{click:"save"}},insert:function(e,t){Ext.widget("formMeasuringSystem").down("form").loadRecord(Ext.create("flybox.model.MeasuringSystem"))},cleanFilters:function(e,t){e.up("grid").filters.clearFilters();Ext.getStore("MeasuringSystem").load()},cancel:function(e,t){e.up("window").close()},edit:function(e,t,n,r,i){Ext.widget("formMeasuringSystem").down("form").loadRecord(e.getStore().getAt(n))},editDbl:function(e,t){Ext.widget("formMeasuringSystem").down("form").loadRecord(t)},save:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idmeasuringsystem").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("MeasuringSystem").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},remove:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("idmeasuringsystem"),object:"measuringsSystem"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("MeasuringSystem").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})}});Ext.create("Ext.app.Controller",{control:{"menu menuitem[action=users]":{click:"users"},"menu menuitem[action=groups]":{click:"groups"},"menu menuitem[action=apps]":{click:"apps"},"menu menuitem[action=levelsAccess]":{click:"levelsAccess"},"menu menuitem[action=typesLocker]":{click:"typesLocker"},"menu menuitem[action=typesID]":{click:"typesID"},"menu menuitem[action=moneys]":{click:"moneys"},"menu menuitem[action=measuringsSystem]":{click:"measuringsSystem"},"menu menuitem[action=countries]":{click:"countries"},"menu menuitem[action=occupations]":{click:"occupations"},"menu menuitem[action=economySectors]":{click:"economySectors"},"menu menuitem[action=secretQuestions]":{click:"secretQuestions"},"menu menuitem[action=infoMethods]":{click:"infoMethods"},"menu menuitem[action=typesPackage]":{click:"typesPackage"},"menu menuitem[action=templates]":{click:"templates"},"menu menuitem[action=lockers]":{click:"lockers"},"menu menuitem[action=rejectionReasons]":{click:"rejectionReasons"},"menu menuitem[action=statesTracking]":{click:"statesTracking"},"menu menuitem[action=groupsTracking]":{click:"groupsTracking"},"menu menuitem[action=deliveryCompanies]":{click:"deliveryCompanies"},"menu menuitem[action=wareHouses]":{click:"wareHouses"},"menu menuitem[action=products]":{click:"products"},"menu menuitem[action=listCustomers]":{click:"listCustomers"},"menu menuitem[action=provides]":{click:"provides"},"menu menuitem[action=typesUbication]":{click:"typesUbication"},"menu menuitem[action=payments]":{click:"payments"},"menu menuitem[action=printers]":{click:"printers"},"menu menuitem[action=enterPackage]":{click:"enterPackage"},"menu menuitem[action=enteredPackages]":{click:"enteredPackages"},"menu menuitem[action=authorizedPackages]":{click:"authorizedPackages"},"menu menuitem[action=dispatchs]":{click:"dispatchs"},"menu menuitem[action=receivePackages]":{click:"receivePackages"},"menu menuitem[action=receivedPackages]":{click:"receivedPackages"},"menu menuitem[action=pendings]":{click:"pendingPackages"},"menu menuitem[action=prealerts]":{click:"prealerts"},"menu menuitem[action=requestsPending]":{click:"requestsPending"},"menu menuitem[action=dgPackages]":{click:"dgPackages"},"menu menuitem[action=missings]":{click:"missings"},"menu menuitem[action=admonPackages]":{click:"admonPackages"},"menu menuitem[action=picking]":{click:"listPackagesPicking"},"menu menuitem[action=miles]":{click:"miles"},"menu menuitem[action=rptAuthorized]":{click:"rptAuthorized"},"menu menuitem[action=rptAllPackage]":{click:"rptAllPackage"},"menu menuitem[action=rptProductivity]":{click:"rptProductivity"},"menu menuitem[action=rptLocker]":{click:"rptLocker"},"menu menuitem[action=rptBehavior]":{click:"rptBehavior"},"menu menuitem[action=storageAbandonment]":{click:"storageAbandonment"},"menu menuitem[action=rptReceivedPackages]":{click:"rptReceivedPackages"},"menu menuitem[action=rptPackageNoAuthorized]":{click:"rptPackageNoAuthorized"},"menu menuitem[action=typesResource]":{click:"typesResource"},"menu menuitem[action=resources]":{click:"resources"},"menu menuitem[action=pages]":{click:"pages"},"menu menuitem[action=changePass]":{click:"changePass"},"menu menuitem[action=printerUser]":{click:"printerUser"},"menu menuitem[action=logout]":{click:"logout"}},users:function(){this.openGrid("listUsers")},groups:function(){this.openGrid("listGroups")},apps:function(){this.openGrid("listApplications")},levelsAccess:function(){this.openGrid("listLevelsAccess")},typesLocker:function(){this.openGrid("listTypesLocker")},typesID:function(){this.openGrid("listTypesID")},moneys:function(){this.openGrid("listMoneys")},measuringsSystem:function(){this.openGrid("listMeasuringsSystem")},countries:function(){this.openGrid("listCountries")},occupations:function(){this.openGrid("listOccupations")},economySectors:function(){this.openGrid("listEconomySectors")},secretQuestions:function(){this.openGrid("listSecretQuestions")},infoMethods:function(){this.openGrid("listInfoMethods")},typesPackage:function(){this.openGrid("listTypesPackage")},templates:function(){this.openGrid("listTemplates")},lockers:function(){this.openGrid("listLockers")},rejectionReasons:function(){this.openGrid("listRejectionReasons")},statesTracking:function(){this.openGrid("listStatesTracking")},groupsTracking:function(){this.openGrid("listGroupsTracking")},deliveryCompanies:function(){this.openGrid("listDeliveryCompanies")},wareHouses:function(){this.openGrid("listWareHouses")},products:function(){this.openGrid("listProducts")},listCustomers:function(){this.openGrid("listListCustomers")},payments:function(){this.openGrid("listPayments")},typesResource:function(){this.openGrid("listTypesResource")},resources:function(){this.openGrid("listResources")},pages:function(){this.openGrid("listPages")},enterPackage:function(){Ext.MessageBox.prompt("Tracking No.","Ingrese el tracking al que se le desea hacer el ingreso",function(e,t,n){if(e=="ok"&&t!=""){if(t.substr(0,8)=="42033126"&&t.length>28){t=t.substr(8,t.length)}Ext.Ajax.request({url:"stores/list_objects.aspx",method:"get",params:{tracking:t,object:"packageByTracking"},success:function(e){var t=Ext.JSON.decode(e.responseText);if(t.total==0){Ext.MessageBox.show({title:"Error",msg:"No es posible ingresar este tracking ya que no se encuentra como recibido",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}else{Ext.getStore("Payment").load({callback:function(){Ext.getStore("TypeUbication").load({callback:function(){Ext.getStore("Provide").load({callback:function(){Ext.getStore("TypePackage").load({start:0,limit:100,callback:function(){Ext.getStore("Item").getProxy().setExtraParam("idpackage",t.data[0].idpackage);Ext.getStore("Item").load({callback:function(){var e=Ext.widget("formEnterPackage");var n=Ext.create("flybox.model.Package",{idpackage:t.data[0].idpackage,locker:t.data[0].locker,product:t.data[0].product,statePackage:t.data[0].statePackage,typePackage:t.data[0].typePackage,cityOrigin:t.data[0].cityOrigin,description:t.data[0].description,tracking:t.data[0].tracking,provide:t.data[0].provide,deliveryCompany:t.data[0].deliveryCompany,weight:t.data[0].weight,lenght:t.data[0].lenght,height:t.data[0].height,width:t.data[0].width,declaredValue:t.data[0].declaredValue,datePrealert:t.data[0].datePrealert,dateReceive:t.data[0].dateReceive,userReceive:t.data[0].userReceive,dateEnter:t.data[0].dateEnter,userEnter:t.data[0].userEnter,dateAuthorization:t.data[0].dateAuthorization,weightVolumen:t.data[0].weightVolumen,observations:t.data[0].observations,consolidate:t.data[0].consolidate,autodispatch:t.data[0].autodispatch,payment:t.data[0].payment});e.down("form").loadRecord(n);e.down("form").getForm().findField("idlocker").setReadOnly(n.get("locker").idlocker!=0);e.down("form").getForm().findField("prealerted").setValue(n.get("locker").idlocker!=0);e.down("form").getForm().findField("idcityorigin").setValue(n.get("cityOrigin").idcity);e.down("form").getForm().findField("iddeliverycompany").setValue(n.get("deliveryCompany").iddeliverycompany);e.down("form").getForm().findField("idpayment").setValue(n.get("payment").idpayment);e.down("form").getForm().findField("idpayment").setReadOnly(true);e.down("form").getForm().findField("provide").setValue(n.get("provide").idprovide);e.down("form").getForm().findField("provide").setReadOnly(n.get("locker").idlocker!=0);e.down("form").getForm().findField("idproduct").setValue(n.get("product").idproduct);e.down("form").getForm().findField("idlocker").setValue(n.get("locker").idlocker);e.down("form").getForm().findField("idtypepackage").setValue(n.get("typePackage").idtypepackage);e.down("form").getForm().findField("autodispatch").setReadOnly(true);if(Ext.util.Cookies.get("lastTypeUbication")!=null){e.down("form").getForm().findField("idtypeubication").setValue(parseInt(Ext.util.Cookies.get("lastTypeUbication")))}else{e.down("form").getForm().findField("idtypeubication").setValue(1)}}})}})}})}})}})}},failed:function(e,t,n){Ext.MessageBox.show({title:"Error",msg:"No es posible leer el tracking",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}})}})},enteredPackages:function(){this.openGrid("listEnteredPackages")},pendingPackages:function(){this.openGrid("listPendingPackages")},dgPackages:function(){this.openGrid("listDGPackages")},authorizedPackages:function(){this.openGrid("listAuthorizedPackages")},dispatchs:function(){this.openGrid("listDispatchedPackages")},receivePackages:function(){Ext.getStore("DeliveryCompanyReceivePackage").load({callback:function(){Ext.widget("formSelectDeliveryCompany")}})},receivedPackages:function(){this.openGrid("listReceivedPackages")},provides:function(){this.openGrid("listProvides")},prealerts:function(){this.openGrid("listPrealerts")},requestsPending:function(){this.openGrid("listRequestsPending")},admonPackages:function(){this.openGrid("listAdmonPackages")},listPackagesPicking:function(){this.openGrid("listPackagesPicking")},miles:function(){Ext.widget("formMiles")},rptAuthorized:function(){Ext.widget("formReportAuthorized")},rptAllPackage:function(){Ext.widget("formReportAllPackage")},rptReceivedPackages:function(){this.openGrid("listReportReceivedPackages")},rptProductivity:function(){Ext.widget("formReportProductivity")},rptLocker:function(){Ext.widget("formReportLocker")},rptBehavior:function(){Ext.widget("formReportBehavior")},changePass:function(){Ext.create("Ext.window.Window",{title:"Cambiar contraseña",iconCls:"edit",alias:"widget.formChangePass",width:300,modal:true,layout:"fit",autoShow:true,items:[{xtype:"form",url:"update/user_pass.aspx",defaults:{labelAlign:"right"},frame:true,items:[{xtype:"hiddenfield",name:"iduser",value:0},{xtype:"textfield",name:"pass",itemId:"pass",vtype:"alphanum",value:"",allowBlank:false,inputType:"password",anchor:"90%",fieldLabel:"* Contraseña"},{xtype:"textfield",name:"confirm",value:"",allowBlank:false,vtype:"password",initialPassField:"pass",inputType:"password",anchor:"90%",fieldLabel:"* Confirmación"}],buttons:[{text:"Guardar",handler:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}}},{text:"Cancelar",handler:function(e,t){e.up("window").close()}}],bbar:["* Campos obligatorios"]}]})},printerUser:function(e,t,n,r,i){Ext.getStore("Printer").load({callback:function(){Ext.Ajax.request({method:"GET",url:"stores/list_objects.aspx",params:{id:0,object:"printerUser"},success:function(e){var t=Ext.JSON.decode(e.responseText);var n=Ext.widget("formPrinterUser");n.down("form").getForm().findField("iduser").setValue(0);n.down("form").getForm().findField("idprinter").setValue(t.data[0].idprinter==0?"":t.data[0].idprinter)},failed:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:p.response.result.msg.title,msg:p.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}})}})},logout:function(){window.location="logout.aspx"},openGrid:function(e){var t=false;var n=Ext.getCmp("contenido");var r=null;Ext.each(n.items.items,function(n,i,s){if(n.alias=="widget."+e){t=true;r=n}});if(!t){r=Ext.widget(e);n.add(r)}Ext.getCmp("contenido").setActiveTab(r)},typesUbication:function(){this.openGrid("listTypesUbication")},printers:function(){this.openGrid("listPrinters")},missings:function(){this.openGrid("listMissingPackages")},storageAbandonment:function(){Ext.Ajax.request({url:"stores/list_objects.aspx",method:"get",params:{object:"storageAbandonment"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){window.open("./reports/"+t.msg.file,"_blank")}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})},rptPackageNoAuthorized:function(){Ext.Ajax.request({url:"stores/list_objects.aspx",method:"get",params:{object:"rptPackageNoAuthorized"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){window.open("./reports/"+t.msg.file,"_blank")}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}});Ext.create("Ext.app.Controller",{control:{"listMoneys button[action=insert]":{click:"insert"},"listMoneys button[action=clean]":{click:"cleanFilters"},listMoneys:{itemdblclick:"editDbl"},"listMoneys actioncolumn[action=group]":{click:"group"},"listMoneys actioncolumn[action=edit]":{click:"edit"},"listMoneys actioncolumn[action=remove]":{click:"remove"},"formMoney button[action=cancel]":{click:"cancel"},"formMoney button[action=save]":{click:"save"}},insert:function(e,t){Ext.widget("formMoney").down("form").loadRecord(Ext.create("flybox.model.Money"))},cleanFilters:function(e,t){e.up("grid").filters.clearFilters()},cancel:function(e,t){e.up("window").close()},edit:function(e,t,n,r,i){Ext.widget("formMoney").down("form").loadRecord(e.getStore().getAt(n))},editDbl:function(e,t){Ext.widget("formMoney").down("form").loadRecord(t)},save:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idmoney").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Money").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},remove:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("idmoney"),object:"moneys"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Money").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})}});Ext.create("Ext.app.Controller",{control:{"listOccupations button[action=insert]":{click:"insert"},"listOccupations button[action=clean]":{click:"cleanFilters"},listOccupations:{itemdblclick:"editDbl"},"listOccupations actioncolumn[action=edit]":{click:"edit"},"listOccupations actioncolumn[action=remove]":{click:"remove"},"formOccupation button[action=cancel]":{click:"cancel"},"formOccupation button[action=save]":{click:"save"}},cleanFilters:function(e,t){e.up("grid").filters.clearFilters();Ext.getStore("Occupation").load()},insert:function(e,t){Ext.widget("formOccupation").down("form").loadRecord(Ext.create("flybox.model.Occupation"))},cancel:function(e,t){e.up("window").close()},edit:function(e,t,n,r,i){Ext.widget("formOccupation").down("form").loadRecord(e.getStore().getAt(n))},editDbl:function(e,t){Ext.widget("formOccupation").down("form").loadRecord(t)},save:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idoccupation").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Occupation").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},remove:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("idoccupation"),object:"occupations"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Occupation").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})}});Ext.create("Ext.app.Controller",{control:{"listPrealertPackages button[action=insert]":{click:"insert"},"listPrealertPackages button[action=clean]":{click:"cleanFilters"},listPrealertPackages:{itemdblclick:"editDbl"},"listPrealertPackages actioncolumn[action=edit]":{click:"edit"},"formPrealertPackage button[action=cancel]":{click:"cancel"},"formPrealertPackage numberfield[name=lenght]":{change:"calcWeightVolumen"},"formPrealertPackage numberfield[name=height]":{change:"calcWeightVolumen"},"formPrealertPackage numberfield[name=width]":{change:"calcWeightVolumen"},"formPrealertPackage combo[name=idtypepackage]":{change:"changeTypePackage"},"listEnteredPackages button[action=clean]":{click:"cleanFiltersEntereds"},"listEnteredPackages actioncolumn[action=reallowLocker]":{click:"reallowLocker"},"listEnteredPackages actioncolumn[action=print]":{click:"printLabel"},"listDGPackages actioncolumn[action=print]":{click:"printLabel"},"listDGPackages actioncolumn[action=reEnterDG]":{click:"reEnterDG"},"listPendingPackages actioncolumn[action=print]":{click:"printLabel"},"listPendingPackages button[action=export]":{click:"_export"},"formEnterPackage numberfield[name=idlocker]":{change:"changeLocker"},"formEnterPackage numberfield[name=lenght]":{change:"calcWeightVolumen"},"formEnterPackage numberfield[name=height]":{change:"calcWeightVolumen"},"formEnterPackage numberfield[name=width]":{change:"calcWeightVolumen"},"formEnterPackage combo[name=idcountry]":{change:"changeCountry"},"formEnterPackage combo[name=idtypepackage]":{change:"changeTypePackage"},"formEnterPackage button[action=cancel]":{click:"cancel"},"formEnterPackage button[action=insert]":{click:"insertItem"},"formEnterPackage grid actioncolumn[action=edit]":{click:"editItem"},"formEnterPackage grid actioncolumn[action=remove]":{click:"removeItem"},"formEnterPackage grid":{itemdblclick:"editDblItem"},"formEnterPackage button[action=save]":{click:"ubicatePackage"},"formEnterPackage combo[name=idtypeubication]":{change:"changeTypeUbication"},"formItem button[action=save]":{click:"saveItem"},"formItem button[action=saveAndNew]":{click:"saveItemAndNew"},"formItem button[action=cancel]":{click:"cancel"},"formUbicationPackage button[action=save]":{click:"enterPackage"},"formFilterCountryAuthorizePackage combo[name=country]":{change:"changeCountryFilter"},"formFilterCountryAuthorizePackage combo[name=city]":{change:"changeCityFilter"},"formFilterCountryAuthorizedPackage combo[name=country]":{change:"changeCountryFilter"},"formFilterCountryAuthorizedPackage combo[name=city]":{change:"changeCityFilter1"},"formFilterCountryDispatchedPackage combo[name=country]":{change:"changeCountryFilter"},"formFilterCountryDispatchedPackage button[text=Buscar]":{click:"findDispatched"},"listEnteredPackagesCustomer actioncolumn[action=edit]":{click:"editEnteredPackage"},"listEnteredPackagesCustomer button[text=Despachar]":{click:"dispatchPackages"},"formEditEnteredPackage combo[name=idtypepackage]":{change:"changeTypePackageAuthorize"},"formEditEnteredPackage button[action=cancel]":{click:"cancel"},"formEditEnteredPackage grid":{beforerender:"onShowGridItems"},"formEditEnteredPackage button[text=Guardar]":{click:"savePackageEntered"},"formSecurityStamp button[action=save]":{click:"saveAutoDispatch"},"formSecurityStamp button[action=cancel]":{click:"cancel"},"listAuthorizedPackages button[action=clean]":{click:"cleanFiltersAuthorizeds"},"listAuthorizedPackages actioncolumn[action=missing]":{click:"missingAuthorized"},"listPendingPackages actioncolumn[action=allow]":{click:"allowLocker"},"listPendingPackages actioncolumn[action=returnPackage]":{click:"returnPackage1"},"formDispatchPackage button[action=cancel]":{click:"cancel"},"formDispatchPackage button[action=save]":{click:"saveDispatch"},"listDisconsolidatePackage button[text=Desconsolidar]":{click:"disconsolidate"},"formReportAuthorized button[action=save]":{click:"saveReportAuthorized"},"formReportAuthorized button[action=cancel]":{click:"cancel"},"formReportAllPackage button[action=save]":{click:"saveReportAllPackage"},"formReportAllPackage button[action=cancel]":{click:"cancel"},"formReportReceivedPackages button[action=save]":{click:"saveReportReceivedPackages"},"formReportReceivedPackages button[action=cancel]":{click:"cancel"},"formReportProductivity button[action=save]":{click:"saveReportProductivity"},"formReportProductivity button[action=cancel]":{click:"cancel"},"listAdmonPackages actioncolumn[action=changeState]":{click:"changeState"},"listAdmonPackages actioncolumn[action=returnPackage]":{click:"returnPackage"},"listAdmonPackages actioncolumn[action=edit]":{click:"editPackage"},"listAdmonPackages actioncolumn[action=remove]":{click:"removePackage"},"formChangeStatePackage button[action=save]":{click:"saveChangeStatePackage"},"formChangeStatePackage button[action=cancel]":{click:"cancel"},"listReceivedPackages actioncolumn[action=returnPackage]":{click:"returnPackage"},"formEditPackage button[action=save]":{click:"saveEditPackage"},"formEditPackage button[action=cancel]":{click:"cancel"},"formEditPackage numberfield[name=idlocker]":{change:"changeLocker"},"formEditPackage numberfield[name=lenght]":{change:"calcWeightVolumenEdit"},"formEditPackage numberfield[name=height]":{change:"calcWeightVolumenEdit"},"formEditPackage numberfield[name=width]":{change:"calcWeightVolumenEdit"},"formEditPackage combo[name=idtypepackage]":{change:"changeTypePackage"},"formEditPackage button[action=insert]":{click:"insertItem"},"formEditPackage grid actioncolumn[action=edit]":{click:"editItem"},"formEditPackage grid actioncolumn[action=remove]":{click:"removeItem"},"formEditPackage grid":{itemdblclick:"editDblItem"},"formEditPackage combo[name=idtypeubication]":{change:"changeTypeUbication"}},insert:function(e,t){Ext.getStore("CountryOrigin").load({start:0,limit:100,callback:function(){Ext.getStore("TypePackage").load({start:0,limit:100,callback:function(){var e=Ext.widget("formEnterPackage");e.down("form").loadRecord(Ext.create("flybox.model.PrealertPackage"));e.down("form").getForm().findField("idlocker").setValue(Ext.getStore("PrealertPackage").getProxy().extraParams.idlocker);e.down("form").getForm().findField("idcountry").select(Ext.getStore("CountryOrigin").getAt(0));Ext.getStore("City").getProxy().setExtraParam("idcountry",Ext.getStore("CountryOrigin").getAt(0).get("idcountry"));Ext.getStore("City").load({start:0,limit:100,callback:function(){e.down("form").getForm().findField("idcityorigin").select(Ext.getStore("City").getAt(0));e.down("form").getForm().findField("user").setValue(Ext.util.Cookies.get("user_locker"))}})}})}})},cleanFilters:function(e,t){e.up("grid").filters.clearFilters();Ext.getStore("PrealertPackage").load()},cleanFiltersEntereds:function(e,t){e.up("grid").filters.clearFilters();Ext.getStore("EnteredPackage").load()},cleanFiltersAuthorizeds:function(e,t){e.up("grid").filters.clearFilters();Ext.getStore("AuthorizedPackage").load()},cancel:function(e,t){e.up("window").close()},edit:function(e,t,n,r,i){Ext.getStore("Product").getProxy().setExtraParam("idpackage",e.getStore().getAt(n).get("idpackage"));Ext.getStore("Product").load();Ext.getStore("TypePackage").load({start:0,limit:100,callback:function(){var t=Ext.widget("formPrealertPackage").down("form").loadRecord(e.getStore().getAt(n));if(e.getStore().getAt(n).get("idcityorigin")==4){t.findField("weight").setFieldLabel("Peso (Lb.)")}else{t.findField("weight").setFieldLabel("Peso (Kg.)")}t.findField("idtypepackage").fireEvent("change",t.findField("idtypepackage"))}})},editDbl:function(e,t){Ext.getStore("Product").getProxy().setExtraParam("idpackage",t.get("idpackage"));Ext.getStore("Product").load();Ext.getStore("TypePackage").load({start:0,limit:100,callback:function(){var e=Ext.widget("formPrealertPackage").down("form").loadRecord(t);if(t.get("idcityorigin")==4){e.findField("weight").setFieldLabel("Peso (Lb.)")}else{e.findField("weight").setFieldLabel("Peso (Kg.)")}e.findField("idtypepackage").fireEvent("change",e.findField("idtypepackage"))}})},calcWeightVolumen:function(e,t,n,r){var i=e.up("form").getForm().findField("idtypeubication").getValue();var s=e.up("form").getForm().findField("lenght").getValue();var o=e.up("form").getForm().findField("height").getValue();var u=e.up("form").getForm().findField("width").getValue();if(e.up("form").getForm().findField("idcityorigin").getValue()==4){e.up("form").getForm().findField("weightVolumen").setValue(s*o*u/5e3*2.2)}else{e.up("form").getForm().findField("weightVolumen").setValue(s*o*u/5e3)}if((s>50||o>50||u>50)&&i!=3){e.up("form").getForm().findField("idtypeubication").setValue(2)}else{e.up("form").getForm().findField("idtypeubication").setValue(i)}},changeTypeUbication:function(e,t,n,r){if(Ext.isNumber(t)){switch(t){case 1:e.up("window").setTitle("Ingresar paquete - Normal");e.up("form").getForm().findField("idlocker").setVisible(true);e.up("form").getForm().findField("lenght").minValue=0;e.up("form").getForm().findField("height").minValue=0;e.up("form").getForm().findField("width").minValue=0;e.up("form").getForm().findField("weightVolumen").minValue=0;break;case 2:e.up("window").setTitle("Ingresar paquete - Sobredimensionado");e.up("form").getForm().findField("idlocker").setVisible(true);e.up("form").getForm().findField("lenght").minValue=0;e.up("form").getForm().findField("height").minValue=0;e.up("form").getForm().findField("width").minValue=0;e.up("form").getForm().findField("weightVolumen").minValue=0;break;case 3:e.up("window").setTitle("Ingresar paquete - Pendiente");e.up("form").getForm().findField("idlocker").setVisible(false);e.up("form").getForm().findField("lenght").minValue=0;e.up("form").getForm().findField("height").minValue=0;e.up("form").getForm().findField("width").minValue=0;e.up("form").getForm().findField("weightVolumen").minValue=0;break;case 4:e.up("window").setTitle("Ingresar paquete - Mercancía peligrosa");e.up("form").getForm().findField("idlocker").setVisible(true);e.up("form").getForm().findField("lenght").minValue=0;e.up("form").getForm().findField("height").minValue=0;e.up("form").getForm().findField("width").minValue=0;e.up("form").getForm().findField("weightVolumen").minValue=0;break;case 5:e.up("window").setTitle("Ingresar paquete - Sobres");e.up("form").getForm().findField("idlocker").setVisible(true);e.up("form").getForm().findField("lenght").minValue=0;e.up("form").getForm().findField("height").minValue=0;e.up("form").getForm().findField("width").minValue=0;e.up("form").getForm().findField("weightVolumen").minValue=0;break;default:e.up("window").setTitle("Ingresar paquete - Indeterminado");e.up("form").getForm().findField("idlocker").setVisible(true);e.up("form").getForm().findField("lenght").minValue=0;e.up("form").getForm().findField("height").minValue=0;e.up("form").getForm().findField("width").minValue=0;e.up("form").getForm().findField("weightVolumen").minValue=0;break}}},changeTypePackage:function(e,t,n,r){if(t==null){if(e.up("form").getForm().findField("idcityorigin").getValue()==4){e.up("form").getForm().findField("weight").setMaxValue(110)}else{e.up("form").getForm().findField("weight").setMaxValue(50)}}if(t==1){if(e.up("form").getForm().findField("idcityorigin").getValue()==4){e.up("form").getForm().findField("weight").setMaxValue(1)}else{e.up("form").getForm().findField("weight").setMaxValue(50)}}else{if(e.up("form").getForm().findField("idcityorigin").getValue()==4){e.up("form").getForm().findField("weight").setMaxValue(110)}else{e.up("form").getForm().findField("weight").setMaxValue(50)}}},changeLocker:function(e,t,n,r){Ext.Ajax.request({url:"stores/list_objects.aspx",method:"get",params:{locker:t,object:"authorizationsLocker"},success:function(t){var n=Ext.JSON.decode(t.responseText);var r="";Ext.each(n.data,function(e,t,n){if(r!=""){r+=","}r+=e.name});e.up("form").getForm().findField("authorizeds").setValue(r)},failed:function(e,t,n){var r=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:"Error",msg:"No se pudo cargar las personas autorizadas a usar este casillero",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}})},editItem:function(e,t,n,r,i){var s=Ext.widget("formItem");s.down("form").loadRecord(e.getStore().getAt(n));s.down("form").getForm().findField("idpackage").setValue(e.up("form").getForm().findField("idpackage").getValue());s.down("form").getForm().findField("description").focus()},editDblItem:function(e,t){var n=Ext.widget("formItem");n.down("form").loadRecord(t);n.down("form").getForm().findField("idpackage").setValue(e.up("form").getForm().findField("idpackage").getValue());n.down("form").getForm().findField("description").focus()},removeItem:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("iditem"),object:"items"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Item").load()}})},failed:function(e,t,n){var r=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})},insertItem:function(e,t){var n=Ext.widget("formItem");n.down("form").loadRecord(Ext.create("flybox.model.Item"));n.down("form").getForm().findField("idpackage").setValue(e.up("form").getForm().findField("idpackage").getValue());n.down("form").getForm().findField("description").focus()},saveItem:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("iditem").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Item").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},saveItemAndNew:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("iditem").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Item").load()}});var s=Ext.widget("formItem");s.down("form").loadRecord(Ext.create("flybox.model.Item"));s.down("form").getForm().findField("idpackage").setValue(e.up("form").getForm().findField("idpackage").getValue());s.down("form").getForm().findField("description").focus();e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},ubicatePackage:function(e,t){if(e.up("form").getForm().isValid()){Ext.util.Cookies.set("lastTypeUbication",e.up("form").getForm().findField("idtypeubication").getValue());e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idpackage").getValue());if(Ext.getStore("Item").getCount()<1&&e.up("form").getForm().findField("idtypeubication").getValue()!=3){Ext.MessageBox.show({title:"Error",msg:"Debe ingresar al menos un ítem",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}else{if(e.up("form").getForm().findField("idlocker").getValue()==0&&e.up("form").getForm().findField("idtypeubication").getValue()!=3){Ext.MessageBox.show({title:"Error",msg:"Debe ingresar el número del casillero",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}else{var n=e.up("form").getValues();if(e.up("form").getForm().findField("autodispatch").getValue()==1&&e.up("form").getForm().findField("idpayment").getValue()==1&&e.up("form").getForm().findField("idtypeubication").getValue()!=4){var r=Ext.widget("formSecurityStamp");r.down("form").getForm().findField("weight").setValue(n.weight);r.down("form").getForm().findField("lenght").setValue(n.lenght);r.down("form").getForm().findField("height").setValue(n.height);r.down("form").getForm().findField("width").setValue(n.width);r.down("form").getForm().findField("idpackage").setValue(n.idpackage);e.up("window").close()}else{Ext.getStore("WareHouse").load({callback:function(t){var r=Ext.widget("formUbicationPackage");r.setVisible(false);r=r.down("form").getForm();r.findField("idtypeubication").setValue(n.idtypeubication);r.findField("id").setValue(n.idpackage);r.findField("idpackage").setValue(n.idpackage);r.findField("idcityorigin").setValue(n.idcityorigin);r.findField("iddeliverycompany").setValue(n.iddeliverycompany);r.findField("idlocker").setValue(n.idlocker);r.findField("idproduct").setValue(n.idproduct);r.findField("idtypepackage").setValue(n.idtypepackage);r.findField("lenght").setValue(n.lenght);r.findField("height").setValue(n.height);r.findField("weight").setValue(n.weight);r.findField("width").setValue(n.width);r.findField("observations").setValue(n.observations);r.findField("provide").setValue(n.provide);r.findField("tracking").setValue(n.tracking);r.findField("consolidate").setValue(n.consolidate);Ext.Ajax.request({url:"stores/list_objects.aspx",method:"get",params:{object:"ubicatePackage",lenght:n.lenght,height:n.height,width:n.width,idtypeubication:n.idtypeubication,idlocker:n.idlocker},success:function(t){var n=Ext.JSON.decode(t.responseText);Ext.getStore("Ubication").getProxy().setExtraParam("idwarehouse",n.data[0].warehouse.idwarehouse);Ext.getStore("Ubication").load({start:0,limit:2e4,callback:function(t){r.findField("idwarehouse").setValue(n.data[0].warehouse.idwarehouse);r.findField("idubication").setValue(n.data[0].idubication);r.submit({waitMsg:"Guardando ...",success:function(e,t,n){var i=Ext.JSON.decode(t.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO});Ext.getStore("PendingPackage").load();Ext.getStore("ReceivePackage").load();Ext.MessageBox.prompt("Tracking No.","Ingrese el tracking al que se le desea hacer el ingreso",function(e,t,n){if(e=="ok"&&t!=""){if(t.substr(0,8)=="42033126"&&t.length>28){t=t.substr(8,t.length)}Ext.Ajax.request({url:"stores/list_objects.aspx",method:"get",params:{tracking:t,object:"packageByTracking"},success:function(e){var t=Ext.JSON.decode(e.responseText);if(t.total==0){Ext.MessageBox.show({title:"Error",msg:"No es posible ingresar este tracking ya que no se encuentra como recibido",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}else{Ext.getStore("Payment").load({callback:function(){Ext.getStore("TypeUbication").load({callback:function(){Ext.getStore("Provide").load({callback:function(){Ext.getStore("TypePackage").load({start:0,limit:100,callback:function(){Ext.getStore("Item").getProxy().setExtraParam("idpackage",t.data[0].idpackage);Ext.getStore("Item").load({callback:function(){var e=Ext.widget("formEnterPackage");var n=Ext.create("flybox.model.Package",{idpackage:t.data[0].idpackage,locker:t.data[0].locker,product:t.data[0].product,statePackage:t.data[0].statePackage,typePackage:t.data[0].typePackage,cityOrigin:t.data[0].cityOrigin,description:t.data[0].description,tracking:t.data[0].tracking,provide:t.data[0].provide,deliveryCompany:t.data[0].deliveryCompany,weight:t.data[0].weight,lenght:t.data[0].lenght,height:t.data[0].height,width:t.data[0].width,declaredValue:t.data[0].declaredValue,datePrealert:t.data[0].datePrealert,dateReceive:t.data[0].dateReceive,userReceive:t.data[0].userReceive,dateEnter:t.data[0].dateEnter,userEnter:t.data[0].userEnter,dateAuthorization:t.data[0].dateAuthorization,weightVolumen:t.data[0].weightVolumen,observations:t.data[0].observations,consolidate:t.data[0].consolidate,autodispatch:t.data[0].autodispatch,payment:t.data[0].payment});e.down("form").loadRecord(n);e.down("form").getForm().findField("idlocker").setReadOnly(n.get("locker").idlocker!=0);e.down("form").getForm().findField("prealerted").setValue(n.get("locker").idlocker!=0);e.down("form").getForm().findField("idcityorigin").setValue(n.get("cityOrigin").idcity);e.down("form").getForm().findField("iddeliverycompany").setValue(n.get("deliveryCompany").iddeliverycompany);e.down("form").getForm().findField("idpayment").setValue(n.get("payment").idpayment);e.down("form").getForm().findField("idpayment").setReadOnly(true);e.down("form").getForm().findField("provide").setValue(n.get("provide").idprovide);e.down("form").getForm().findField("provide").setReadOnly(n.get("locker").idlocker!=0);e.down("form").getForm().findField("idproduct").setValue(n.get("product").idproduct);e.down("form").getForm().findField("idlocker").setValue(n.get("locker").idlocker);e.down("form").getForm().findField("idtypepackage").setValue(n.get("typePackage").idtypepackage);e.down("form").getForm().findField("autodispatch").setReadOnly(true);if(Ext.util.Cookies.get("lastTypeUbication")!=null){r.down("form").getForm().findField("idtypeubication").setValue(parseInt(Ext.util.Cookies.get("lastTypeUbication")))}else{r.down("form").getForm().findField("idtypeubication").setValue(1)}}})}})}})}})}})}},failed:function(e,t,n){Ext.MessageBox.show({title:"Error",msg:"No es posible leer el tracking",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}})}})},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}});e.up("window").close()}}}}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},enterPackage:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idpackage").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO});e.up("window").close();Ext.getStore("PendingPackage").load();Ext.getStore("ReceivePackage").load();Ext.MessageBox.prompt("Tracking No.","Ingrese el tracking al que se le desea hacer el ingreso",function(e,t,n){if(e=="ok"&&t!=""){if(t.substr(0,8)=="42033126"&&t.length>28){t=t.substr(8,t.length)}Ext.Ajax.request({url:"stores/list_objects.aspx",method:"get",params:{tracking:t,object:"packageByTracking"},success:function(e){var t=Ext.JSON.decode(e.responseText);if(t.total==0){Ext.MessageBox.show({title:"Error",msg:"No es posible ingresar este tracking ya que no se encuentra como recibido",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}else{Ext.getStore("Payment").load({callback:function(){Ext.getStore("TypeUbication").load({callback:function(){Ext.getStore("Provide").load({callback:function(){Ext.getStore("TypePackage").load({start:0,limit:100,callback:function(){Ext.getStore("Item").getProxy().setExtraParam("idpackage",t.data[0].idpackage);Ext.getStore("Item").load({callback:function(){var e=Ext.widget("formEnterPackage");var n=Ext.create("flybox.model.Package",{idpackage:t.data[0].idpackage,locker:t.data[0].locker,product:t.data[0].product,statePackage:t.data[0].statePackage,typePackage:t.data[0].typePackage,cityOrigin:t.data[0].cityOrigin,description:t.data[0].description,tracking:t.data[0].tracking,provide:t.data[0].provide,deliveryCompany:t.data[0].deliveryCompany,weight:t.data[0].weight,lenght:t.data[0].lenght,height:t.data[0].height,width:t.data[0].width,declaredValue:t.data[0].declaredValue,datePrealert:t.data[0].datePrealert,dateReceive:t.data[0].dateReceive,userReceive:t.data[0].userReceive,dateEnter:t.data[0].dateEnter,userEnter:t.data[0].userEnter,dateAuthorization:t.data[0].dateAuthorization,weightVolumen:t.data[0].weightVolumen,observations:t.data[0].observations,consolidate:t.data[0].consolidate,autodispatch:t.data[0].autodispatch,payment:t.data[0].payment});e.down("form").loadRecord(n);e.down("form").getForm().findField("idtypeubication").setValue(1);e.down("form").getForm().findField("idlocker").setReadOnly(n.get("locker").idlocker!=0);e.down("form").getForm().findField("prealerted").setValue(n.get("locker").idlocker!=0);e.down("form").getForm().findField("idcityorigin").setValue(n.get("cityOrigin").idcity);e.down("form").getForm().findField("iddeliverycompany").setValue(n.get("deliveryCompany").iddeliverycompany);e.down("form").getForm().findField("idpayment").setValue(n.get("payment").idpayment);e.down("form").getForm().findField("idpayment").setReadOnly(true);e.down("form").getForm().findField("provide").setValue(n.get("provide").idprovide);e.down("form").getForm().findField("provide").setReadOnly(n.get("locker").idlocker!=0);e.down("form").getForm().findField("idproduct").setValue(n.get("product").idproduct);e.down("form").getForm().findField("idlocker").setValue(n.get("locker").idlocker);e.down("form").getForm().findField("idtypepackage").setValue(n.get("typePackage").idtypepackage);e.down("form").getForm().findField("autodispatch").setReadOnly(true)}})}})}})}})}})}},failed:function(e,t,n){Ext.MessageBox.show({title:"Error",msg:"No es posible leer el tracking",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}})}})},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},changeCountryFilter:function(e,t,n,r){if(Ext.isNumber(t)){Ext.getStore("FE_City").getProxy().setExtraParam("idcountry",t);Ext.getStore("FE_City").load({callback:function(n){e.up("form").getForm().findField("city").setValue(n[0].get("idcity"));declaredValueMax=e.findRecordByValue(t).get("maxValueDeclared");idcountry=e.findRecordByValue(t).get("idcountry")}})}},changeCityFilter:function(e,t,n,r){if(Ext.isNumber(t)){Ext.getStore("FE_EnteredPackage").getProxy().setExtraParam("idcityorigin",t);Ext.getStore("FE_EnteredPackage").load({start:0,limit:1e3})}},changeCityFilter1:function(e,t,n,r){if(Ext.isNumber(t)){Ext.getStore("FE_AuthorizedPackage").getProxy().setExtraParam("idcityorigin",t);Ext.getStore("FE_AuthorizedPackage").load()}},editEnteredPackage:function(e,t,n,r,i){Ext.getStore("FE_TypePackage").load({start:0,limit:100,callback:function(){Ext.getStore("FE_Item").getProxy().setExtraParam("idpackage",e.getStore().getAt(n).get("idpackage"));Ext.getStore("FE_Item").load({callback:function(){Ext.getStore("FE_Product").load({callback:function(){var t=Ext.widget("formEditEnteredPackage");t.down("form").getForm().findField("idtypepackage").setValue(e.getStore().getAt(n).get("typePackage").idtypepackage);t.down("form").getForm().findField("observations").setValue(e.getStore().getAt(n).get("observations"));t.down("form").getForm().findField("weight").setValue(e.getStore().getAt(n).get("weight"));t.down("form").getForm().findField("idproduct").setValue(e.getStore().getAt(n).get("product").idproduct);t.setPosition(Ext.getBody().getWidth()/2-t.getWidth()/2,(document.documentElement||document.body).scrollTop+100)}})}})}})},changeTypePackageAuthorize:function(e,t,n,r){if(t==1){e.up("form").down("grid").columns[2].setVisible(false)}else{e.up("form").down("grid").columns[2].setVisible(true)}},onShowGridItems:function(e){if(Ext.getStore("FE_Item").getAt(0).get("idtypepackage")==1){e.headerCt.getGridColumns()[2].setVisible(false)}else{e.headerCt.getGridColumns()[2].setVisible(true)}},savePackageEntered:function(e){if(e.up("form").getForm().findField("idtypepackage").getValue()==1&&e.up("form").getForm().findField("weight").getValue()>1){Ext.MessageBox.alert("Error","No se puede cambiar el tipo de envío ya que el paquete excede el peso máximo para documentos")}else{var t=0;var n=0;var r=true;if(e.up("form").getForm().findField("idtypepackage").getValue()!=1){Ext.getStore("FE_Item").each(function(e){if(e.get("unitValue")<1||e.get("unitValue")>declaredValueMax){r=false}else{n+=e.get("amount")*e.get("unitValue")}})}if(r){if(n>declaredValueMax){Ext.MessageBox.alert("Error","La suma total del valor declarado no puede ser superior a "+(idcountry==2?"US$ "+declaredValueMax:declaredValueMax+" €"))}else{Ext.getStore("FE_Item").each(function(e){t+=e.get("amount")*e.get("unitValue");Ext.Ajax.request({url:"ajax/save_object.aspx",params:{object:"declaredValueItem",iditem:e.get("iditem"),id:e.get("iditem"),unitValue:e.get("unitValue")}})});Ext.Ajax.request({url:"ajax/save_object.aspx",params:{object:"updateTypePackageEntered",idpackage:Ext.getStore("FE_Item").getProxy().extraParams.idpackage,id:Ext.getStore("FE_Item").getProxy().extraParams.idpackage,declaredValue:t,idtypepackage:e.up("form").getForm().findField("idtypepackage").getValue(),observations:e.up("form").getForm().findField("observations").getValue()},success:function(t){var n=Ext.JSON.decode(t.responseText);Ext.MessageBox.show({title:n.msg.title,msg:n.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("FE_EnteredPackage").load();e.up("window").close()}})},failed:function(e,t,n){var r=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}}else{Ext.MessageBox.alert("Error","Rectifica los valores declarados")}}},dispatchPackages:function(e){if(mustCompleteData){Ext.MessageBox.alert("Error",'Completa tu información personal en la pestaña "Mis Datos" para poder despachar tus paquetes',function(){window.location="datosusuario.aspx"})}else{if(e.up("grid").getSelectionModel().getSelection().length==0){Ext.MessageBox.alert("Error","Debes seleccionar al menos un paquete a despachar")}else{Ext.MessageBox.confirm("Despachar paquetes","¿Desea despachar estos paquetes?",function(t){if(t=="yes"){var n=true;var r=0;var i=0;var s="";var o=false;var u=false;var a=false;var f=false;var l=false;var c=0;var h=0;Ext.Array.each(e.up("grid").getSelectionModel().getSelection(),function(e){if(e.get("storage")<0){i+=0-e.get("storage")}if(c==0){c=e.get("product").idproduct}else{if(e.get("product").idproduct!=c){l=true}}if(s!=""){s+=","}s+=e.get("idpackage");if(e.get("declaredValue")==0&&e.get("typePackage").idtypepackage!=1){n=false}else{r+=e.get("declaredValue")}if(e.get("typePackage").idtypepackage==1){o=true}if(e.get("typePackage").idtypepackage==2){u=true}if(e.get("typePackage").idtypepackage>2){a=true}if(a&&o){f=true}if(a&&u){f=true}if(!e.get("consolidate")){h++}});if(h>0&&e.up("grid").getSelectionModel().getCount()>1){Ext.MessageBox.alert("Error","No puede consolidar los paquetes marcados como no consolidables")}else{if(l){Ext.MessageBox.alert("Error","No puede seleccionar paquetes de distintos tipos de productos")}else{if(!n){Ext.MessageBox.alert("Error","Todos los paquetes seleccionados deben tener valor declarado")}else{if(r>declaredValueMax){Ext.MessageBox.alert("Error","La suma total del valor declarado no puede ser superior a "+(idcountry==2?"US$ "+declaredValueMax:declaredValueMax+" €"))}else{if(f){Ext.MessageBox.alert("Error","Los paquetes seleccionados no deben tener diferentes tipos de envío")}else{Ext.Ajax.request({url:"ajax/save_object.aspx",params:{id:0,object:"authorizePackages",packages:s},success:function(e){var t=Ext.JSON.decode(e.responseText);var n=Ext.create("Ext.window.MessageBox",{modal:true,bodyStyle:"background: transparent; padding: 10px; margin: 3px;",html:t.msg.body,buttons:[{text:"Cambiar dirección",handler:function(){Ext.getStore("FE_CityDelivery").load({start:0,limit:1e4,callback:function(){var e=Ext.create("Ext.window.Window",{title:"Cambiar dirección",width:400,modal:true,layout:"fit",autoShow:true,items:[{xtype:"form",url:"ajax/update_address_dispatch.aspx",defaults:{labelAlign:"right",width:350},frame:true,items:[{xtype:"panel",html:"* Campos obligatorios",border:0,padding:10},{xtype:"combo",name:"idcity",store:"FE_CityDelivery",forceSelection:true,fieldLabel:"Ciudad *",valueField:"idcity",typeAhead:true,displayField:"name",allowBlank:false,queryMode:"local",listeners:{change:function(t,n,r,i){if(Ext.isNumber(n)){Ext.getStore("FE_SalePoint").getProxy().setExtraParam("idcity",n);Ext.getStore("FE_SalePoint").load({scope:this,callback:function(t,n,r){if(t.length==0){e.down("form").getForm().findField("idsalepoint").setDisabled(true)}else{e.down("form").getForm().findField("idsalepoint").setDisabled(false)}}})}}}},{xtype:"combo",name:"idsalepoint",store:"FE_SalePoint",typeAhead:true,fieldLabel:"Punto de venta",valueField:"idsalepoint",displayField:"name",queryMode:"local",listeners:{change:function(e,t,n,r){if(Ext.isNumber(t)){e.up("form").getForm().findField("address").setVisible(false)}else{e.up("form").getForm().findField("address").setVisible(true)}}}},{xtype:"textfield",name:"address",value:"",fieldLabel:"Dirección *"}]}],buttons:[{text:"Cambiar",handler:function(t){if(!Ext.isNumber(e.down("form").getForm().findField("idsalepoint").getValue())&&e.down("form").getForm().findField("address").getValue()==""){Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}else{if(e.down("form").getForm().isValid()){e.down("form").getForm().submit({waitMsg:"Guardando ...",success:function(e,n,r){var i=Ext.JSON.decode(n.response.responseText);var s=i.nameCity;var o=i.address;document.getElementById("cityDelivery").innerHTML=s;document.getElementById("addressDelivery").innerHTML=o;Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO});t.up("window").close()},failure:function(e,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});t.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}}}},{text:"Cancelar",handler:function(e){e.up("window").close()}}]});e.show()}})}},{text:"Autorizar",handler:function(){Ext.Ajax.request({url:"ajax/save_object.aspx",params:{confirm:1,id:0,object:"authorizePackages"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("FE_EnteredPackage").load()}});n.close();n.destroy()},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}},{text:"Cancelar",handler:function(){n.close();n.destroy()}}]});n.show({title:t.msg.title,width:440,height:450})},failed:function(e,t,n){var r=Ext.JSON.decode(response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}}}}}}})}}},saveAutoDispatch:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idpackage").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},allowLocker:function(e,t,n,r,i){Ext.Ajax.request({url:"stores/list_objects.aspx",method:"get",params:{idpackage:e.getStore().getAt(n).get("idpackage"),object:"packagePending"},success:function(e){var t=Ext.JSON.decode(e.responseText);if(t.total==0){Ext.MessageBox.show({title:"Error",msg:"No es posible ingresar este tracking ya que no se encuentra como recibido",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}else{Ext.getStore("Payment").load({callback:function(){Ext.getStore("TypeUbication").load({callback:function(){Ext.getStore("Provide").load({callback:function(){Ext.getStore("TypePackage").load({start:0,limit:100,callback:function(){var e=Ext.widget("formEnterPackage");var n=Ext.create("flybox.model.Package",{idpackage:t.data[0].idpackage,locker:t.data[0].locker,product:t.data[0].product,statePackage:t.data[0].statePackage,typePackage:t.data[0].typePackage,cityOrigin:t.data[0].cityOrigin,description:t.data[0].description,tracking:t.data[0].tracking,provide:t.data[0].provide,deliveryCompany:t.data[0].deliveryCompany,weight:t.data[0].weight,lenght:t.data[0].lenght,height:t.data[0].height,width:t.data[0].width,declaredValue:t.data[0].declaredValue,datePrealert:t.data[0].datePrealert,dateReceive:t.data[0].dateReceive,userReceive:t.data[0].userReceive,dateEnter:t.data[0].dateEnter,userEnter:t.data[0].userEnter,dateAuthorization:t.data[0].dateAuthorization,weightVolumen:t.data[0].weightVolumen,observations:t.data[0].observations,consolidate:t.data[0].consolidate,autodispatch:t.data[0].autodispatch,payment:t.data[0].payment});e.down("form").loadRecord(n);e.down("form").getForm().findField("idtypeubication").setValue(1);e.down("form").getForm().findField("idlocker").setReadOnly(n.get("locker").idlocker!=0);e.down("form").getForm().findField("prealerted").setValue(n.get("locker").idlocker!=0);e.down("form").getForm().findField("idcityorigin").setValue(n.get("cityOrigin").idcity);e.down("form").getForm().findField("iddeliverycompany").setValue(n.get("deliveryCompany").iddeliverycompany);e.down("form").getForm().findField("idpayment").setValue(n.get("payment").idpayment);e.down("form").getForm().findField("idpayment").setReadOnly(true);e.down("form").getForm().findField("provide").setValue(n.get("provide").idprovide);e.down("form").getForm().findField("provide").setReadOnly(n.get("locker").idlocker!=0);e.down("form").getForm().findField("idproduct").setValue(n.get("product").idproduct);e.down("form").getForm().findField("idlocker").setValue(n.get("locker").idlocker);e.down("form").getForm().findField("idtypepackage").setValue(n.get("typePackage").idtypepackage);e.down("form").getForm().findField("autodispatch").setReadOnly(true);Ext.getStore("Item").getProxy().setExtraParam("idpackage",n.get("idpackage"));Ext.getStore("Item").load()}})}})}})}})}},failed:function(e,t,n){Ext.MessageBox.show({title:"Error",msg:"No es posible leer el tracking",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}})},removePending:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("idpackage"),object:"pendings"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("PendingPackage").load()}})},failed:function(e,t,n){var r=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})},saveDispatch:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("group").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("AuthorizedPackage").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},disconsolidate:function(e,t){Ext.MessageBox.confirm("Despachar paquetes","¿Desea desconsolidar estos paquetes?",function(t){if(t=="yes"){var n="";Ext.Array.each(e.up("window").down("grid").getSelectionModel().getSelection(),function(e){if(n!=""){n+=","}n+=e.get("idpackage")});Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:n,object:"groupPackage"},success:function(t){var n=Ext.JSON.decode(t.responseText);Ext.MessageBox.show({title:n.msg.title,msg:n.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("GroupPackage").load();Ext.getStore("AuthorizedPackage").load();e.up("window").close()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})},missingAuthorized:function(e,t,n,r,i){Ext.MessageBox.confirm("Reportar paquete","¿Desea reportar el paquete como perdido?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("idpackage"),object:"missing"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("AuthorizedPackage").load()}})},failed:function(e,t,n){var r=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})},findDispatched:function(e,t){if(e.up("form").getForm().isValid()){Ext.getStore("FE_Dispatch").getProxy().setExtraParam("idcityorigin",e.up("form").getForm().findField("city").getValue());Ext.getStore("FE_Dispatch").getProxy().setExtraParam("date_begin",e.up("form").getForm().findField("date_begin").getValue());Ext.getStore("FE_Dispatch").getProxy().setExtraParam("date_end",e.up("form").getForm().findField("date_end").getValue());Ext.getStore("FE_Dispatch").load()}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},saveReportAuthorized:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){window.open("reports/"+i.msg.file)}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},printLabel:function(e,t,n,r,i){Ext.Ajax.request({url:"update/save_object.aspx",params:{object:"printLabel",id:e.getStore().getAt(n).get("idpackage")},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})},failed:function(e,t,n){var r=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})},saveReportAllPackage:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){window.open("reports/"+i.msg.file)}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},saveReportProductivity:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){window.open("reports/"+i.msg.file,"_blank")}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},saveReportReceivedPackages:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){window.open("reports/"+i.msg.file)}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},reallowLocker:function(e,t,n,r,i){Ext.MessageBox.prompt("Reubicar paquete","Ingrese el casillero al que desae mover el paquete",function(t,r,i){if(t=="ok"&&Ext.isNumeric(r)){Ext.Ajax.request({url:"update/save_object.aspx",params:{object:"reallowLocker",id:e.getStore().getAt(n).get("idpackage"),idlocker:r},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("EnteredPackage").load()}})},failed:function(e,t,n){var r=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese un número de casillero válido",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}})},calcWeightVolumenEdit:function(e,t,n,r){var i=e.up("form").getForm().findField("lenght").getValue();var s=e.up("form").getForm().findField("height").getValue();var o=e.up("form").getForm().findField("width").getValue();if(e.up("form").getForm().findField("idcityorigin").getValue()==4){e.up("form").getForm().findField("weightVolumen").setValue(i*s*o/5e3*2.2)}else{e.up("form").getForm().findField("weightVolumen").setValue(i*s*o/5e3)}},editPackage:function(e,t,n,r,i){Ext.getStore("Payment").load({callback:function(){Ext.getStore("TypeUbication").load({callback:function(){Ext.getStore("Provide").load({callback:function(){Ext.getStore("TypePackage").load({start:0,limit:100,callback:function(){Ext.getStore("Item").getProxy().setExtraParam("idpackage",e.getStore().getAt(n).get("idpackage"));Ext.getStore("Item").load({callback:function(){var t=Ext.widget("formEditPackage");t.down("form").loadRecord(e.getStore().getAt(n));t.down("form").getForm().findField("idlocker").setValue(e.getStore().getAt(n).get("locker").idlocker);t.down("form").getForm().findField("idcityorigin").setValue(e.getStore().getAt(n).get("cityOrigin").idcity);t.down("form").getForm().findField("idtypepackage").setValue(e.getStore().getAt(n).get("typePackage").idtypepackage)}})}})}})}})}})},removePackage:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar paquete","¿Desea eliminar el paquete?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("idpackage"),object:"admonPackages"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("AdmonPackage").load()}})},failed:function(e,t,n){var r=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})},saveEditPackage:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idpackage").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("AdmonPackage").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},returnPackage:function(e,t,n,r,i){Ext.MessageBox.prompt("Retornar paquete","Ingrese el motivo por el cual se debe retornar el paquete",function(t,r,i){if(t=="ok"&&r!=""){Ext.Ajax.request({url:"update/save_object.aspx",params:{object:"returnPackage",id:e.getStore().getAt(n).get("idpackage"),observations:r},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("AdmonPackage").load();Ext.getStore("ReceivePackage").load()}})},failed:function(e,t,n){var r=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese el motivo",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}})},changeState:function(e,t,n,r,i){var s=Ext.widget("formChangeStatePackage");s.down("form").getForm().findField("idpackage").setValue(e.getStore().getAt(n).get("idpackage"));s.down("form").getForm().findField("idstatepackage").setValue(e.getStore().getAt(n).get("statePackage").idstatepackage)},saveChangeStatePackage:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idpackage").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("AdmonPackage").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},returnPackage1:function(e,t,n,r,i){Ext.MessageBox.prompt("Retornar paquete","Ingrese el motivo por el cual se debe retornar el paquete",function(t,r,i){if(t=="ok"&&r!=""){Ext.Ajax.request({url:"update/save_object.aspx",params:{object:"returnPackage1",id:e.getStore().getAt(n).get("idpackage"),observations:r},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("PendingPackage").load()}})},failed:function(e,t,n){var r=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese el motivo",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}})},reEnterDG:function(e,t,n,r,i){Ext.MessageBox.confirm("Reingresar paquete","¿Desea reingresar el paquete como normal?",function(t){if(t=="yes"){Ext.Ajax.request({url:"update/save_object.aspx",params:{object:"reEnterDG",id:e.getStore().getAt(n).get("idpackage")},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO});Ext.getStore("DGPackage").load()},failed:function(e,t,n){var r=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})},_export:function(){Ext.Ajax.request({url:"stores/list_objects.aspx",method:"get",params:{object:"rptPendings"},success:function(e,t,n){var r=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){window.open("./reports/"+r.msg.file,"_blank")}});b.up("window").close()},failure:function(e,t){var n=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:n.msg.title,msg:n.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}})}});Ext.create("Ext.app.Controller",{control:{"listPages button[action=insert]":{click:"insert"},"listPages button[action=clean]":{click:"cleanFilters"},listPages:{itemdblclick:"editDbl"},"listPages actioncolumn[action=edit]":{click:"edit"},"listPages actioncolumn[action=remove]":{click:"remove"},"formPage button[action=cancel]":{click:"cancel"},"formPage button[action=save]":{click:"save"}},insert:function(e,t){Ext.widget("formPage").down("form").loadRecord(Ext.create("flybox.model.Page"))},cleanFilters:function(e,t){e.up("grid").filters.clearFilters();Ext.getStore("Page").load()},cancel:function(e,t){e.up("window").close()},edit:function(e,t,n,r,i){var s=Ext.widget("formPage");s.down("form").loadRecord(e.getStore().getAt(n));s.down("form").getForm().findField("html").setValue(e.getStore().getAt(n).get("html"))},editDbl:function(e,t){var n=Ext.widget("formPage");n.down("form").loadRecord(t);n.down("form").getForm().findField("html").setValue(t.get("html"))},save:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idpage").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Page").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},remove:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("idpage"),object:"pages"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Page").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})}});Ext.create("Ext.app.Controller",{control:{"listPayments button[action=insert]":{click:"insert"},"listPayments button[action=clean]":{click:"cleanFilters"},listPayments:{itemdblclick:"editDbl"},"listPayments actioncolumn[action=edit]":{click:"edit"},"listPayments actioncolumn[action=remove]":{click:"remove"},"formPayment button[action=cancel]":{click:"cancel"},"formPayment button[action=save]":{click:"save"}},insert:function(e,t){Ext.widget("formPayment").down("form").loadRecord(Ext.create("flybox.model.Payment"))},cleanFilters:function(e,t){e.up("grid").filters.clearFilters()},cancel:function(e,t){e.up("window").close()},edit:function(e,t,n,r,i){Ext.widget("formPayment").down("form").loadRecord(e.getStore().getAt(n))},editDbl:function(e,t){Ext.widget("formPayment").down("form").loadRecord(t)},save:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idpayment").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Payment").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},remove:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("idpayment"),object:"payments"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Payment").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})}});Ext.create("Ext.app.Controller",{control:{"listPrealerts button[action=clean]":{click:"cleanFilters"},"listPrealerts actioncolumn[action=remove]":{click:"remove"},"formPreviewValue combo[name=country]":{change:"changeCountry"},"formPreviewValue button[text=Calcular]":{click:"previewCost"},"formPrealert combo[name=country]":{change:"changeCountryPrealert"},"formPrealert combo[name=idcitydelivery]":{change:"changeCityDeliveryPrealert"},"formPrealert combo[name=typePackage]":{change:"changeTypePackage"},"formPrealert combo[name=delivery_salepoint]":{change:"changeDeliverySalePoint"},"formPrealert combo[name=idsalepoint]":{change:"changeSalePoint"},"formPrealert #newsArticles button[name=addArticle]":{click:"addArticle"},"formPrealert button[text=Prealertar]":{click:"savePrealert"},"formPrealert button[text=Cancelar]":{click:"cancelPrealert"},"formPrealert textfield[name=tracking]":{change:"changeTracking"},"formPrealert radiofield[name=autodispatch]":{change:"changeAutodispatch"},"listPrealertsCustomer button[action=clean]":{click:"cleanFilters"},"listPrealertsCustomer button[action=insert]":{click:"FE_insert"},"listPrealertsCustomer actioncolumn[action=remove]":{click:"FE_remove"},"formFilterCountryPrealert combo[name=country]":{change:"changeCountryFilter"},"formFilterCountryPrealert combo[name=city]":{change:"changeCityFilter"}},cleanFilters:function(e,t){e.up("grid").filters.clearFilters()},remove:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("idprealert"),object:"prealerts"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Prealert").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})},changeCountry:function(e,t,n,r){if(t==2){e.up("form").getForm().findField("weight").setFieldLabel("Peso (Lb.) *");e.up("form").getForm().findField("declaredValue").setFieldLabel("Valor declarado (US$) *")}else{e.up("form").getForm().findField("weight").setFieldLabel("Peso (Kg.) *");e.up("form").getForm().findField("declaredValue").setFieldLabel("Valor declarado (€) *")}},previewCost:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().submit({waitMsg:"Procesando ...",success:function(e,t,n){var r=Ext.JSON.decode(t.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}},changeCountryPrealert:function(e,t,n,r){if(Ext.isNumber(t)){Ext.getStore("FE_City").getProxy().setExtraParam("idcountry",t);Ext.getStore("FE_City").load({callback:function(n){Ext.getStore("FE_DeliveryCompany").getProxy().setExtraParam("idcountry",t);Ext.getStore("FE_DeliveryCompany").load({callback:function(t){e.up("form").getForm().findField("city").setValue(n[0].get("idcity"))}})}})}},changeCityDeliveryPrealert:function(e,t,n,r){if(Ext.isNumber(t)){Ext.getStore("FE_SalePoint").getProxy().setExtraParam("idcity",t);Ext.getStore("FE_SalePoint").load({start:0,limit:1e3})}},changeDeliverySalePoint:function(e,t,n,r){if(e.up("form").getForm().findField("autodispatch").checked){e.up("form").getForm().findField("idcitydelivery").setVisible(true);e.up("form").getForm().findField("idcitydelivery").allowBlank=false;if(t==1){e.up("form").getForm().findField("idsalepoint").setVisible(true);e.up("form").getForm().findField("idsalepoint").allowBlank=false;e.up("form").getForm().findField("address").setVisible(false);e.up("form").getForm().findField("address").allowBlank=true}else{e.up("form").getForm().findField("idsalepoint").setVisible(false);e.up("form").getForm().findField("idsalepoint").allowBlank=true;e.up("form").getForm().findField("address").setVisible(true);e.up("form").getForm().findField("address").allowBlank=false}}else{e.up("form").getForm().findField("idcitydelivery").setVisible(false);e.up("form").getForm().findField("idcitydelivery").allowBlank=true;e.up("form").getForm().findField("delivery_salepoint").setVisible(false);e.up("form").getForm().findField("address").setVisible(false);e.up("form").getForm().findField("address").allowBlank=true;e.up("form").getForm().findField("idsalepoint").setVisible(false);e.up("form").getForm().findField("idsalepoint").allowBlank=true}},changeTypePackage:function(e,t,n,r){for(i=0;i<numArticles;i++){if(t==1){if(e.up("form").getForm().findField("unit_value_"+i)){e.up("form").getForm().findField("unit_value_"+i).setDisabled(true);e.up("form").getForm().findField("unit_value_"+i).minValue=0;e.up("form").getForm().findField("unit_value_"+i).setValue(0)}}else{if(e.up("form").getForm().findField("unit_value_"+i)){e.up("form").getForm().findField("unit_value_"+i).setDisabled(false);e.up("form").getForm().findField("unit_value_"+i).minValue=2}}}},addArticle:function(e,t){e.up("#newsArticles").add({xtype:"fieldcontainer",id:"articleDetail_"+numArticles,anchor:"100%",layout:"hbox",defaults:{labelAlign:"right"},items:[{xtype:"textfield",name:"article_"+numArticles,value:"",allowBlank:false,width:400,fieldLabel:"Artículo *",queryMode:"local",inputAttrTpl:'data-qtip="Artículo prealertado"'},{xtype:"numberfield",name:"amount_"+numArticles,value:1,hideTrigger:true,minValue:1,maxValue:6,allowBlank:false,fieldLabel:"Cantidad *",flex:1,inputAttrTpl:'data-qtip="Cantidad de producto prealertado"'},{xtype:"numberfield",name:"unit_value_"+numArticles,value:"",hideTrigger:true,minValue:1,maxValue:2e3,decimalPrecision:2,decimalSeparator:".",allowBlank:false,labelWidth:120,flex:1,fieldLabel:"Valor a declarar *",inputAttrTpl:'data-qtip="Valor por el cual se declara el producto"'},{xtype:"tbspacer",width:10},{xtype:"button",name:"remove_"+numArticles,text:"Eliminar",align:"right",handler:function(e,t){e.up("form").up("form").down("#newsArticles").remove("articleDetail_"+e.up("fieldcontainer").items.items[0].name.split("_")[1],true)},tooltip:"Eliminar este articulo"}]});if(e.up("form").up("form").getForm().findField("typePackage").getValue()==1){e.up("form").getForm().findField("unit_value_"+numArticles).setDisabled(true)}else{e.up("form").getForm().findField("unit_value_"+numArticles).setDisabled(false)}numArticles++},savePrealert:function(e,t){if(e.up("form").getForm().isValid()){var n=0;var r=0;var s=0;for(i=0;i<numArticles;i++){if(e.up("form").getForm().findField("unit_value_"+i)){r=e.up("form").getForm().findField("amount_"+i).getValue();s=e.up("form").getForm().findField("unit_value_"+i).getValue()}n+=r*s}if(n>2e3&&e.up("form").getForm().findField("country").getValue()==2||n>1500&&e.up("form").getForm().findField("country").getValue()==3){Ext.MessageBox.alert("Error","La suma total del valor declarado no puede ser superior a "+(e.up("form").getForm().findField("country").getValue()==2?"US$ 2.000":"Eur 1.500"))}else{e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(e,t,n){var r=Ext.JSON.decode(t.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){window.location="verpaquetesprealertados.aspx"}})},failure:function(e,t){var n=Ext.JSON.decode(t.response.responseText);Ext.MessageBox.show({title:n.msg.title,msg:n.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}});articles=1}}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},FE_insert:function(e,t){if(mustCompleteData){Ext.MessageBox.alert("Error",'Completa tu información personal en la pestaña "Mis Datos" para poder agilizar tus envíos',function(){window.location="datosusuario.aspx"})}else{window.location="prealertarpaquetes.aspx"}},FE_remove:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.Ajax.request({url:"ajax/delete_object.aspx",params:{id:e.getStore().getAt(n).get("idprealert"),object:"prealerts"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("FE_Prealert").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})},changeCountryFilter:function(e,t,n,r){if(Ext.isNumber(t)){Ext.getStore("FE_DeliveryCompany").getProxy().setExtraParam("idcountry",t);Ext.getStore("FE_City").getProxy().setExtraParam("idcountry",t);Ext.getStore("FE_City").load({callback:function(t){e.up("form").getForm().findField("city").setValue(t[0].get("idcity"))}})}},changeCityFilter:function(e,t,n,r){if(Ext.isNumber(t)){Ext.getStore("FE_Prealert").getProxy().setExtraParam("idcityorigin",t);Ext.getStore("FE_Prealert").load()}},cancelPrealert:function(e,t){window.location="verpaquetesprealertados.aspx"},changeAutodispatch:function(e,t,n){if(e.getValue()&&e.inputValue==1){e.up("form").getForm().findField("delivery_salepoint").setVisible(true);if(e.up("form").getForm().findField("delivery_salepoint").getValue()==1){e.up("form").getForm().findField("idsalepoint").setVisible(true);e.up("form").getForm().findField("idsalepoint").allowBlank=false;e.up("form").getForm().findField("address").setVisible(false);e.up("form").getForm().findField("address").allowBlank=true;e.up("form").getForm().findField("idcitydelivery").setVisible(false);e.up("form").getForm().findField("idcitydelivery").allowBlank=true}else{e.up("form").getForm().findField("idsalepoint").setVisible(false);e.up("form").getForm().findField("idsalepoint").allowBlank=true;e.up("form").getForm().findField("address").setVisible(true);e.up("form").getForm().findField("address").allowBlank=false;e.up("form").getForm().findField("idcitydelivery").setVisible(true);e.up("form").getForm().findField("idcitydelivery").allowBlank=false}e.up("form").getForm().findField("idpayment").setVisible(false);e.up("form").getForm().findField("idpayment").allowBlank=false}if(e.getValue()&&e.inputValue==0){e.up("form").getForm().findField("idcitydelivery").setVisible(false);e.up("form").getForm().findField("idcitydelivery").allowBlank=true;e.up("form").getForm().findField("delivery_salepoint").setVisible(false);e.up("form").getForm().findField("address").setVisible(false);e.up("form").getForm().findField("address").allowBlank=true;e.up("form").getForm().findField("idsalepoint").setVisible(false);e.up("form").getForm().findField("idsalepoint").allowBlank=true;e.up("form").getForm().findField("idpayment").setVisible(false);e.up("form").getForm().findField("idpayment").allowBlank=true}},changeTracking:function(e,t){e.setValue(e.getValue().toUpperCase().trim())},changeSalePoint:function(e,t){e.up("form").getForm().findField("address").setValue("CRR - "+Ext.getStore("FE_SalePoint").findRecord("idsalepoint",e.getValue()).get("address"))}});Ext.create("Ext.app.Controller",{control:{"listPrinters button[action=insert]":{click:"insert"},"listPrinters button[action=clean]":{click:"cleanFilters"},listPrinters:{itemdblclick:"editDbl"},"listPrinters actioncolumn[action=edit]":{click:"edit"},"listPrinters actioncolumn[action=remove]":{click:"remove"},"formPrinter button[action=cancel]":{click:"cancel"},"formPrinter button[action=save]":{click:"save"}},insert:function(e,t){Ext.widget("formPrinter").down("form").loadRecord(Ext.create("flybox.model.Printer"))},cleanFilters:function(e,t){e.up("grid").filters.clearFilters()},cancel:function(e,t){e.up("window").close()},edit:function(e,t,n,r,i){Ext.widget("formPrinter").down("form").loadRecord(e.getStore().getAt(n))},editDbl:function(e,t){Ext.widget("formPrinter").down("form").loadRecord(t)},save:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idprinter").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Printer").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},remove:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("idprinter"),object:"printers"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Printer").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})}});Ext.create("Ext.app.Controller",{control:{"listProducts button[action=insert]":{click:"insert"},"listProducts button[action=clean]":{click:"cleanFilters"},listProducts:{itemdblclick:"editDbl"},"listProducts actioncolumn[action=edit]":{click:"edit"},"listProducts actioncolumn[action=remove]":{click:"remove"},"formProduct button[action=cancel]":{click:"cancel"},"formProduct button[action=save]":{click:"save"}},insert:function(e,t){Ext.widget("formProduct").down("form").loadRecord(Ext.create("flybox.model.Product"))},cleanFilters:function(e,t){e.up("grid").filters.clearFilters()},cancel:function(e,t){e.up("window").close()},edit:function(e,t,n,r,i){Ext.widget("formProduct").down("form").loadRecord(e.getStore().getAt(n))},editDbl:function(e,t){Ext.widget("formProduct").down("form").loadRecord(t)},save:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idproduct").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Product").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},remove:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("idproduct"),object:"products"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Product").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})}});Ext.create("Ext.app.Controller",{control:{"listProvides button[action=insert]":{click:"insert"},"listProvides button[action=clean]":{click:"cleanFilters"},listProvides:{itemdblclick:"editDbl"},"listProvides actioncolumn[action=edit]":{click:"edit"},"listProvides actioncolumn[action=remove]":{click:"remove"},"formProvide button[action=cancel]":{click:"cancel"},"formProvide button[action=save]":{click:"save"}},insert:function(e,t){Ext.widget("formProvide").down("form").loadRecord(Ext.create("flybox.model.Provide"))},cleanFilters:function(e,t){e.up("grid").filters.clearFilters()},cancel:function(e,t){e.up("window").close()},edit:function(e,t,n,r,i){Ext.widget("formProvide").down("form").loadRecord(e.getStore().getAt(n))},editDbl:function(e,t){Ext.widget("formProvide").down("form").loadRecord(t)},save:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idprovide").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Provide").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},remove:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("idprovide"),object:"provides"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Provide").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})}});Ext.create("Ext.app.Controller",{control:{"listReceivedPackages button[action=clean]":{click:"cleanFilters"},"listReceivedPackages button[action=export]":{click:"_export"},"formSelectDeliveryCompany button[action=cancel]":{click:"cancel"},"formSelectDeliveryCompany button[action=save]":{click:"selectDeliveryCompany"},"formReceivePackage textfield[name=tracking]":{keypress:"addTracking"},"formReceivePackage button[action=cancel]":{click:"cancel"},"formReceivePackage button[action=save]":{click:"save"},"formReceivePackage form grid actioncolumn[action=remove]":{click:"removeTracking"},"formFilterCountryReceivePackage combo[name=country]":{change:"changeCountryFilter"},"formFilterCountryReceivePackage combo[name=city]":{change:"changeCityFilter"}},cleanFilters:function(e,t){e.up("grid").filters.clearFilters()},cancel:function(e,t){Ext.getStore("AuxReceivePackage").removeAll();e.up("window").close()},selectDeliveryCompany:function(e,t){if(e.up("form").getForm().isValid()){var n=Ext.widget("formReceivePackage");n.down("form").getForm().findField("iddeliverycompany").setValue(e.up("form").getForm().findField("iddeliverycompany").getValue());n.down("form").getForm().findField("delivery_company").setValue(e.up("form").getForm().findField("iddeliverycompany").findRecordByValue(e.up("form").getForm().findField("iddeliverycompany").getValue()).get("name"));e.up("window").close()}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},save:function(e,t){if(e.up("form").getForm().isValid()){if(Ext.getStore("AuxReceivePackage").count()>0){var n="";var r=true;Ext.getStore("AuxReceivePackage").each(function(e){if(r){r=false}else{n+=","}n+=e.get("tracking")});e.up("form").getForm().findField("trackings").setValue(n);e.up("form").getForm().findField("id").setValue(0);e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO});Ext.getStore("AuxReceivePackage").removeAll();e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({autoScroll:true,maxHeight:400,title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Debe ingresar al menos un tracking",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},addTracking:function(e,t){if(t.getKey()===Ext.EventObject.ENTER){var n=new String(e.getValue());e.setValue(n.toUpperCase());if(e.getValue()!=""){if(e.up("form").getForm().findField("iddeliverycompany").getValue()==2&&e.getValue().substr(0,8)=="42033126"){var r=new String(e.getValue());e.setValue(r.substring(8,r.length))}var i=false;Ext.getStore("AuxReceivePackage").each(function(t){if(t.get("tracking")==e.getValue()){i=true}});if(!i){Ext.getStore("AuxReceivePackage").add({tracking:e.getValue()})}e.setValue("");e.up("window").down("grid").getView().focusRow(Ext.getStore("AuxReceivePackage").count()-1);e.focus()}}},removeTracking:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.getStore("AuxReceivePackage").remove(e.getStore().getAt(n))}})},changeCountryFilter:function(e,t,n,r){if(Ext.isNumber(t)){Ext.getStore("FE_City").getProxy().setExtraParam("idcountry",t);Ext.getStore("FE_City").load({callback:function(t){e.up("form").getForm().findField("city").setValue(t[0].get("idcity"))}})}},changeCityFilter:function(e,t,n,r){if(Ext.isNumber(t)){Ext.getStore("FE_ReceivePackage").getProxy().setExtraParam("idcityorigin",t);Ext.getStore("FE_ReceivePackage").load()}},_export:function(){Ext.Ajax.request({url:"stores/list_objects.aspx",method:"get",params:{object:"rptReceiveds"},success:function(e,t,n){var r=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){window.open("./reports/"+r.msg.file,"_blank")}})},failure:function(e,t){var n=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:n.msg.title,msg:n.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}})}});Ext.create("Ext.app.Controller",{control:{"listRejectionReasons button[action=insert]":{click:"insert"},"listRejectionReasons button[action=clean]":{click:"cleanFilters"},listRejectionReasons:{itemdblclick:"editDbl"},"listRejectionReasons actioncolumn[action=edit]":{click:"edit"},"listRejectionReasons actioncolumn[action=remove]":{click:"remove"},"formRejectionReason button[action=cancel]":{click:"cancel"},"formRejectionReason button[action=save]":{click:"save"}},insert:function(e,t){Ext.widget("formRejectionReason").down("form").loadRecord(Ext.create("flybox.model.RejectionReason"))},cleanFilters:function(e,t){e.up("grid").filters.clearFilters()},cancel:function(e,t){e.up("window").close()},edit:function(e,t,n,r,i){Ext.widget("formRejectionReason").down("form").loadRecord(e.getStore().getAt(n))},editDbl:function(e,t){Ext.widget("formRejectionReason").down("form").loadRecord(t)},save:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idrejectionreason").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("RejectionReason").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},remove:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("idrejectionreason"),object:"rejectionReasons"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("RejectionReason").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})}});Ext.create("Ext.app.Controller",{control:{"listRequestsPending button[action=insert]":{click:"insert"},"listRequestsPending button[action=clean]":{click:"cleanFilters"},listRequestsPending:{itemdblclick:"editDbl"},"listRequestsPending actioncolumn[action=edit]":{click:"edit"},"listRequestsPending actioncolumn[action=remove]":{click:"remove"},"formFindPackageCustomer button[text=Solicitar búsqueda]":{click:"requestFinder"},"formRequestPending button[action=cancel]":{click:"cancel"},"listRequestsPending button[action=export]":{click:"_export"}},insert:function(e,t){Ext.widget("formRequestPending").down("form").loadRecord(Ext.create("flybox.model.RequestPending"))},cleanFilters:function(e,t){e.up("grid").filters.clearFilters()},cancel:function(e,t){e.up("window").close()},edit:function(e,t,n,r,i){var s=Ext.widget("formRequestPending");s.down("form").loadRecord(e.getStore().getAt(n));s.down("form").getForm().findField("locker").setValue(e.getStore().getAt(n).get("locker").idlocker)},editDbl:function(e,t){var n=Ext.widget("formRequestPending");n.down("form").loadRecord(t);n.down("form").getForm().findField("locker").setValue(t.get("locker").idlocker)},requestFinder:function(e){if(e.up("form").getForm().isValid()){e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){e.up("form").getForm().findField("tracking").setValue("");e.up("form").getForm().findField("description").setValue("")}})},failure:function(e,t){var n=Ext.JSON.decode(t.response.responseText);Ext.MessageBox.show({title:n.msg.title,msg:n.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},remove:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("idrequestpending"),object:"requestsPending"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("RequestPending").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})},_export:function(){Ext.Ajax.request({url:"stores/list_objects.aspx",method:"get",params:{object:"rptRequestPending"},success:function(e,t,n){var r=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){window.open("./reports/"+r.msg.file,"_blank")}});b.up("window").close()},failure:function(e,t){var n=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:n.msg.title,msg:n.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}})}});Ext.create("Ext.app.Controller",{control:{"listResources button[action=insert]":{click:"insert"},"listResources button[action=clean]":{click:"cleanFilters"},"listResources actioncolumn[action=remove]":{click:"remove"},"formResource button[action=cancel]":{click:"cancel"},"formResource button[action=save]":{click:"save"}},insert:function(e,t){Ext.getStore("TypeResource").load({callback:function(){Ext.widget("formResource").down("form").loadRecord(Ext.create("flybox.model.Resource"))}})},cleanFilters:function(e,t){e.up("grid").filters.clearFilters();Ext.getStore("Resource").load()},cancel:function(e,t){e.up("window").close()},save:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idresource").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Resource").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},remove:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("idresource"),object:"resources"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Resource").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})}});Ext.create("Ext.app.Controller",{control:{"listSecretQuestions button[action=insert]":{click:"insert"},"listSecretQuestions button[action=clean]":{click:"cleanFilters"},listSecretQuestions:{itemdblclick:"editDbl"},"listSecretQuestions actioncolumn[action=edit]":{click:"edit"},"listSecretQuestions actioncolumn[action=remove]":{click:"remove"},"formSecretQuestion button[action=cancel]":{click:"cancel"},"formSecretQuestion button[action=save]":{click:"save"}},cleanFilters:function(e,t){e.up("grid").filters.clearFilters();Ext.getStore("SecretQuestion").load()},insert:function(e,t){Ext.widget("formSecretQuestion").down("form").loadRecord(Ext.create("flybox.model.SecretQuestion"))},cancel:function(e,t){e.up("window").close()},edit:function(e,t,n,r,i){Ext.widget("formSecretQuestion").down("form").loadRecord(e.getStore().getAt(n))},editDbl:function(e,t){Ext.widget("formSecretQuestion").down("form").loadRecord(t)},save:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idsecretquestion").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("SecretQuestion").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},remove:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("idsecretquestion"),object:"secretQuestions"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("SecretQuestion").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})}});Ext.create("Ext.app.Controller",{control:{"listStatesLocker button[action=insert]":{click:"insert"},"listStatesLocker button[action=clean]":{click:"cleanFilters"},listStatesLocker:{itemdblclick:"editDbl"},"listStatesLocker actioncolumn[action=edit]":{click:"edit"},"listStatesLocker actioncolumn[action=remove]":{click:"remove"},"formStateLocker button[action=cancel]":{click:"cancel"},"formStateLocker button[action=save]":{click:"save"}},insert:function(e,t){Ext.widget("formStateLocker").down("form").loadRecord(Ext.create("flybox.model.StateLocker"))},cleanFilters:function(e,t){e.up("grid").filters.clearFilters();Ext.getStore("StateLocker").load()},cancel:function(e,t){e.up("window").close()},edit:function(e,t,n,r,i){Ext.widget("formStateLocker").down("form").loadRecord(e.getStore().getAt(n))},editDbl:function(e,t){Ext.widget("formStateLocker").down("form").loadRecord(t)},save:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idstatelocker").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("StateLocker").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},remove:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("idstatelocker"),object:"statesLocker"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("StateLocker").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})}});Ext.create("Ext.app.Controller",{control:{"listStatesTracking button[action=insert]":{click:"insert"},"listStatesTracking button[action=clean]":{click:"cleanFilters"},listStatesTracking:{itemdblclick:"editDbl"},"listStatesTracking actioncolumn[action=edit]":{click:"edit"},"listStatesTracking actioncolumn[action=remove]":{click:"remove"},"formStateTracking button[action=cancel]":{click:"cancel"},"formStateTracking button[action=save]":{click:"save"}},insert:function(e,t){Ext.getStore("GroupTracking").load({callback:function(){Ext.widget("formStateTracking").down("form").loadRecord(Ext.create("flybox.model.StateTracking"))}})},cleanFilters:function(e,t){e.up("grid").filters.clearFilters();Ext.getStore("StateTracking").load()},cancel:function(e,t){e.up("window").close()},edit:function(e,t,n,r,i){Ext.getStore("GroupTracking").load({callback:function(){var t=Ext.widget("formStateTracking");t.down("form").loadRecord(e.getStore().getAt(n));t.down("form").getForm().findField("idgrouptracking").setValue(e.getStore().getAt(n).get("groupTracking").idgrouptracking)}})},editDbl:function(e,t){Ext.getStore("GroupTracking").load({callback:function(){var e=Ext.widget("formStateTracking");e.down("form").loadRecord(t);e.down("form").getForm().findField("idgrouptracking").setValue(t.get("groupTracking").idgrouptracking)}})},save:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idstatetracking").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("StateTracking").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},remove:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("idstatetracking"),object:"statesTracking"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("StateTracking").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})}});Ext.create("Ext.app.Controller",{control:{"listTemplates button[action=insert]":{click:"insert"},"listTemplates button[action=clean]":{click:"cleanFilters"},listTemplates:{itemdblclick:"editDbl"},"listTemplates actioncolumn[action=fields]":{click:"fields"},"listTemplates actioncolumn[action=edit]":{click:"edit"},"listTemplates actioncolumn[action=remove]":{click:"remove"},"formTemplate button[action=cancel]":{click:"cancel"},"formTemplate button[action=save]":{click:"save"},"listFieldsTemplate button[action=insert]":{click:"insertField"},"listFieldsTemplate button[action=clean]":{click:"cleanFiltersField"},listFieldsTemplate:{itemdblclick:"editDblField"},"listFieldsTemplate actioncolumn[action=edit]":{click:"editField"},"listFieldsTemplate actioncolumn[action=remove]":{click:"removeField"},"formFieldTemplate button[action=cancel]":{click:"cancel"},"formFieldTemplate button[action=save]":{click:"saveField"}},fields:function(e,t,n,r,i){Ext.getStore("FieldTemplate").getProxy().setExtraParam("idtemplate",e.getStore().getAt(n).get("idtemplate"));Ext.getStore("FieldTemplate").load();var s=false;var o=Ext.getCmp("contenido");var u=null;Ext.each(o.items.items,function(e,t,n){if(e.alias=="widget.listFieldsTemplate"){s=true;u=e}});if(!s){u=Ext.widget("listFieldsTemplate");o.add(u)}u.setTitle("Listado campo de la plantilla "+e.getStore().getAt(n).get("name"));Ext.getCmp("contenido").setActiveTab(u)},insert:function(e,t){Ext.widget("formTemplate").down("form").loadRecord(Ext.create("flybox.model.Template"))},cleanFilters:function(e,t){e.up("grid").filters.clearFilters();Ext.getStore("Template").load()},cancel:function(e,t){e.up("window").close()},edit:function(e,t,n,r,i){Ext.widget("formTemplate").down("form").loadRecord(e.getStore().getAt(n))},editDbl:function(e,t){Ext.widget("formTemplate").down("form").loadRecord(t)},save:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idtemplate").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Template").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},remove:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("idtemplate"),object:"templates"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Template").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})},insertField:function(e,t){var n=Ext.widget("formFieldTemplate");n.down("form").loadRecord(Ext.create("flybox.model.FieldTemplate"));n.down("form").getForm().findField("idtemplate").setValue(Ext.getStore("FieldTemplate").getProxy().extraParams.idtemplate)},cleanFiltersField:function(e,t){e.up("grid").filters.clearFilters();Ext.getStore("FieldTemplate").load()},editField:function(e,t,n,r,i){Ext.widget("formFieldTemplate").down("form").loadRecord(e.getStore().getAt(n))},editDblField:function(e,t){Ext.widget("formFieldTemplate").down("form").loadRecord(t)},saveField:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idfield").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("FieldTemplate").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},removeField:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("idfield"),object:"fields"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("FieldTemplate").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})}});Ext.create("Ext.app.Controller",{control:{"listTypesID button[action=insert]":{click:"insert"},"listTypesID button[action=clean]":{click:"cleanFilters"},listTypesID:{itemdblclick:"editDbl"},"listTypesID actioncolumn[action=edit]":{click:"edit"},"listTypesID actioncolumn[action=remove]":{click:"remove"},"formTypeID button[action=cancel]":{click:"cancel"},"formTypeID button[action=save]":{click:"save"}},insert:function(e,t){Ext.widget("formTypeID").down("form").loadRecord(Ext.create("flybox.model.TypeID"))},cleanFilters:function(e,t){e.up("grid").filters.clearFilters()},cancel:function(e,t){e.up("window").close()},edit:function(e,t,n,r,i){Ext.widget("formTypeID").down("form").loadRecord(e.getStore().getAt(n))},editDbl:function(e,t){Ext.widget("formTypeID").down("form").loadRecord(t)},save:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idtypeid").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("TypeID").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},remove:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("idtypeid"),object:"typesID"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("TypeID").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})}});Ext.create("Ext.app.Controller",{control:{"listTypesLocker button[action=insert]":{click:"insert"},"listTypesLocker button[action=clean]":{click:"cleanFilters"},listTypesLocker:{itemdblclick:"editDbl"},"listTypesLocker actioncolumn[action=group]":{click:"group"},"listTypesLocker actioncolumn[action=edit]":{click:"edit"},"listTypesLocker actioncolumn[action=remove]":{click:"remove"},"formTypeLocker button[action=cancel]":{click:"cancel"},"formTypeLocker button[action=save]":{click:"save"}},insert:function(e,t){Ext.widget("formTypeLocker").down("form").loadRecord(Ext.create("flybox.model.TypeLocker"))},cleanFilters:function(e,t){e.up("grid").filters.clearFilters();Ext.getStore("TypeLocker").load()},cancel:function(e,t){e.up("window").close()},edit:function(e,t,n,r,i){Ext.widget("formTypeLocker").down("form").loadRecord(e.getStore().getAt(n))},editDbl:function(e,t){Ext.widget("formTypeLocker").down("form").loadRecord(t)},save:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idtypelocker").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("TypeLocker").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},remove:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("idtypelocker"),object:"typesLocker"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("TypeLocker").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})}});Ext.create("Ext.app.Controller",{control:{"listTypesPackage button[action=insert]":{click:"insert"},"listTypesPackage button[action=clean]":{click:"cleanFilters"},listTypesPackage:{itemdblclick:"editDbl"},"listTypesPackage actioncolumn[action=group]":{click:"group"},"listTypesPackage actioncolumn[action=edit]":{click:"edit"},"listTypesPackage actioncolumn[action=remove]":{click:"remove"},"formTypePackage button[action=cancel]":{click:"cancel"},"formTypePackage button[action=save]":{click:"save"}},insert:function(e,t){Ext.widget("formTypePackage").down("form").loadRecord(Ext.create("flybox.model.TypePackage"))},cleanFilters:function(e,t){e.up("grid").filters.clearFilters();Ext.getStore("TypePackage").load()},cancel:function(e,t){e.up("window").close()},edit:function(e,t,n,r,i){Ext.widget("formTypePackage").down("form").loadRecord(e.getStore().getAt(n))},editDbl:function(e,t){Ext.widget("formTypePackage").down("form").loadRecord(t)},save:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idtypepackage").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("TypePackage").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},remove:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("idtypepackage"),object:"typesPackage"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("TypePackage").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})}});Ext.create("Ext.app.Controller",{control:{"listTypesResource button[action=insert]":{click:"insert"},"listTypesResource button[action=clean]":{click:"cleanFilters"},listTypesResource:{itemdblclick:"editDbl"},"listTypesResource actioncolumn[action=edit]":{click:"edit"},"listTypesResource actioncolumn[action=remove]":{click:"remove"},"formTypeResource button[action=cancel]":{click:"cancel"},"formTypeResource button[action=save]":{click:"save"}},insert:function(e,t){Ext.widget("formTypeResource").down("form").loadRecord(Ext.create("flybox.model.TypeResource"))},cleanFilters:function(e,t){e.up("grid").filters.clearFilters();Ext.getStore("TypeResource").load()},cancel:function(e,t){e.up("window").close()},edit:function(e,t,n,r,i){Ext.widget("formTypeResource").down("form").loadRecord(e.getStore().getAt(n))},editDbl:function(e,t){Ext.widget("formTypeResource").down("form").loadRecord(t)},save:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idtyperesource").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("TypeResource").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},remove:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{object:"typesResource",id:e.getStore().getAt(n).get("idtyperesource")},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("TypeResource").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})}});Ext.create("Ext.app.Controller",{control:{"listTypesUbication button[action=insert]":{click:"insert"},"listTypesUbication button[action=clean]":{click:"cleanFilters"},listTypesUbication:{itemdblclick:"editDbl"},"listTypesUbication actioncolumn[action=edit]":{click:"edit"},"listTypesUbication actioncolumn[action=remove]":{click:"remove"},"formTypeUbication button[action=cancel]":{click:"cancel"},"formTypeUbication button[action=save]":{click:"save"}},insert:function(e,t){Ext.widget("formTypeUbication").down("form").loadRecord(Ext.create("flybox.model.TypeUbication"))},cleanFilters:function(e,t){e.up("grid").filters.clearFilters()},cancel:function(e,t){e.up("window").close()},edit:function(e,t,n,r,i){Ext.widget("formTypeUbication").down("form").loadRecord(e.getStore().getAt(n))},editDbl:function(e,t){Ext.widget("formTypeUbication").down("form").loadRecord(t)},save:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idtypeubication").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("TypeUbication").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},remove:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("idtypeubication"),object:"typesUbication"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("TypeUbication").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})}});Ext.create("Ext.app.Controller",{control:{"listUsers button[action=insert]":{click:"insert"},"listUsers button[action=clean]":{click:"cleanFilters"},listUsers:{itemdblclick:"editDbl"},"listUsers actioncolumn[action=group]":{click:"group"},"listUsers actioncolumn[action=printer]":{click:"printer"},"listUsers actioncolumn[action=edit]":{click:"edit"},"listUsers actioncolumn[action=remove]":{click:"remove"},"formUser button[action=cancel]":{click:"cancel"},"formUser button[action=save]":{click:"save"},"formUser button[action=changePass]":{click:"changePass"},"listGroupsUser grid#gridDestination dataview":{drop:"insertGroup"},"listGroupsUser grid#gridSource dataview":{drop:"removeGroup"},"formCustomerRegister combo[name=idcountry]":{change:"changeCountry"},"formCustomerRegister combo[name=idcity]":{change:"changeCity"},"formCustomerRegister combo[name=delivery_salepoint]":{change:"changeSalePoint"},"formCustomerRegister textfield[name=identification]":{blur:"blurID"},"formCustomerRegister textfield[name=email]":{blur:"blurEmail"},"formCustomerRegister button[text=Registrar]":{click:"registerCustomer"},"formRecoveryPass combo[name=idrecoverymethod]":{change:"changeRecoveryMethod"},"formRecoveryPass textfield[name=email]":{blur:"blurEmailRecoveryPass"},"formRecoveryPass button[text=Continuar]":{click:"recoveryPass"},"formChangePass button[text=Cambiar]":{click:"setNewPass"},"formPrinterUser button[action=cancel]":{click:"cancel"},"formPrinterUser button[action=save]":{click:"savePrinter"}},group:function(e,t,n,r,i){Ext.getStore("GroupsUser").getProxy().setExtraParam("iduser",e.getStore().getAt(n).get("iduser"));Ext.getStore("GroupsUser").load();Ext.getStore("NoGroupsUser").getProxy().setExtraParam("iduser",e.getStore().getAt(n).get("iduser"));Ext.getStore("NoGroupsUser").load();var s=Ext.widget("listGroupsUser");s.setTitle("Listado grupos del usuario "+e.getStore().getAt(n).get("name"))},printer:function(e,t,n,r,i){Ext.getStore("Printer").load({callback:function(){Ext.Ajax.request({method:"GET",url:"stores/list_objects.aspx",params:{id:e.getStore().getAt(n).get("iduser"),object:"printerUser"},success:function(t){var r=Ext.JSON.decode(t.responseText);var i=Ext.widget("formPrinterUser");i.down("form").getForm().findField("iduser").setValue(e.getStore().getAt(n).get("iduser"));i.down("form").getForm().findField("idprinter").setValue(r.data[0].idprinter==0?"":r.data[0].idprinter)},failed:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:p.response.result.msg.title,msg:p.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}})}})},insert:function(e,t){Ext.widget("formUser").down("form").loadRecord(Ext.create("flybox.model.User"))},cleanFilters:function(e,t){e.up("grid").filters.clearFilters();Ext.getStore("User").load()},cancel:function(e,t){e.up("window").close()},edit:function(e,t,n,r,i){Ext.widget("formUser").down("form").loadRecord(e.getStore().getAt(n))},editDbl:function(e,t){Ext.widget("formUser").down("form").loadRecord(t)},save:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("iduser").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("User").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},savePrinter:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("iduser").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},remove:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("iduser"),object:"users"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("User").load()}})},failed:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:p.response.result.msg.title,msg:p.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}})}})},changePass:function(e,t){Ext.create("Ext.window.Window",{title:"Cambiar contraseña",iconCls:"edit",alias:"widget.formChangePass",width:300,modal:true,layout:"fit",autoShow:true,items:[{xtype:"form",url:"update/user_pass.aspx",defaults:{labelAlign:"right"},frame:true,items:[{xtype:"panel",html:"* Campos obligatorios",border:0,padding:10},{xtype:"hiddenfield",name:"iduser",value:e.up("form").getForm().findField("iduser").getValue()},{xtype:"textfield",name:"pass",itemId:"pass",vtype:"alphanum",value:"",allowBlank:false,inputType:"password",anchor:"90%",fieldLabel:"* Contraseña"},{xtype:"textfield",name:"confirm",value:"",allowBlank:false,vtype:"password",initialPassField:"pass",inputType:"password",anchor:"90%",fieldLabel:"* Confirmación"}]}],buttons:[{text:"Guardar",handler:function(e,t){if(e.up("window").down("form").getForm().isValid()){e.up("window").down("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}}},{text:"Cancelar",handler:function(e,t){e.up("window").close()}}]})},insertGroup:function(e,t,n,r){Ext.each(t.records,function(e,t,n){Ext.Ajax.request({url:"update/save_object.aspx",params:{iduser:Ext.getStore("GroupsUser").getProxy().extraParams.iduser,object:"groupUser",idgroup:e.get("idgroup"),id:0},success:function(e,t,n){var r=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})},failure:function(e,t,n){var r=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}})})},removeGroup:function(e,t,n,r){Ext.each(t.records,function(e,t,n){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{iduser:Ext.getStore("GroupsUser").getProxy().extraParams.iduser,object:"groupUser",idgroup:e.get("idgroup")},success:function(e,t,n){var r=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})},failure:function(e,t,n){var r=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}})})},changeCountry:function(e,t,n,r){if(Ext.isNumber(t)){Ext.getStore("FE_City").getProxy().setExtraParam("idcountry",t);Ext.getStore("FE_City").load({start:0,limit:1e4,callback:function(t){e.up("form").getForm().findField("idcity").setValue(t[0].get("idcity"))}})}},changeCity:function(e,t,n,r){if(Ext.isNumber(t)){Ext.getStore("FE_SalePoint").getProxy().setExtraParam("idcity",t);Ext.getStore("FE_SalePoint").load()}},changeSalePoint:function(e,t,n,r){if(t==1){e.up("form").getForm().findField("idsalepoint").setVisible(true);e.up("form").getForm().findField("address").setVisible(false);e.up("form").getForm().findField("address").allowBlank=true;e.up("form").getForm().findField("idsalepoint").allowBlank=false}else{e.up("form").getForm().findField("idsalepoint").setVisible(false);e.up("form").getForm().findField("address").setVisible(true);e.up("form").getForm().findField("address").allowBlank=false;e.up("form").getForm().findField("idsalepoint").allowBlank=true}},registerCustomer:function(e,t){if(e.up("form").getForm().isValid()){if(!e.up("form").getForm().findField("agree_tyc").getValue()){Ext.MessageBox.show({title:"Error",msg:"Debes aceptar los términos y condiciones",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}else{e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(e,t,n){var r=Ext.JSON.decode(t.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){window.location="Paginas/Default.aspx"}})},failure:function(e,t){var n=Ext.JSON.decode(t.response.responseText);Ext.MessageBox.show({title:n.msg.title,msg:n.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}})}}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},blurID:function(e,t,n){if(e.getValue()!=""){Ext.Ajax.request({url:"ajax/validate_data_register.aspx",params:{id:e.getValue(),object:"id"},success:function(e){var t=Ext.JSON.decode(e.responseText);if(!t.success){Ext.MessageBox.show({title:"Documento inválido",msg:"El documento ya se encuentra registrado",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}}})}},blurEmail:function(e,t,n){if(e.getValue()!=""){Ext.Ajax.request({url:"ajax/validate_data_register.aspx",params:{email:e.getValue(),object:"email"},success:function(e){var t=Ext.JSON.decode(e.responseText);if(!t.success){Ext.MessageBox.show({title:"Email inválido",msg:"El email ya se encuentra registrado",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}}})}},changeRecoveryMethod:function(e,t,n,r){if(t==1){e.up("form").getForm().findField("idsecretquestion").setVisible(true);e.up("form").getForm().findField("idsecretquestion").allowBlank=false;e.up("form").getForm().findField("secret_answer").setVisible(true);e.up("form").getForm().findField("secret_answer").allowBlank=false}else{e.up("form").getForm().findField("idsecretquestion").setVisible(false);e.up("form").getForm().findField("idsecretquestion").allowBlank=true;e.up("form").getForm().findField("secret_answer").setVisible(false);e.up("form").getForm().findField("secret_answer").allowBlank=true}},blurEmailRecoveryPass:function(e,t,n){if(e.getValue()!=""){Ext.Ajax.request({url:"ajax/validate_data_register.aspx",params:{email:e.getValue(),object:"email"},success:function(t){var n=Ext.JSON.decode(t.responseText);if(n.success){Ext.MessageBox.show({title:"Email inválido",msg:"El email no se encuentra registrado en nuestro sistema",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR,fn:function(){e.focus(true)}})}else{Ext.getStore("FE_SecretQuestion").load();Ext.Ajax.request({url:"ajax/validate_data_register.aspx",params:{email:e.getValue(),object:"secretQuestion"},success:function(t){var n=Ext.JSON.decode(t.responseText);if(n.success){e.up("form").getForm().findField("idsecretquestion").setValue(n.secretQuestion.idsecretquestion);e.up("form").getForm().findField("idsecretquestion").setReadOnly(true)}else{Ext.MessageBox.show({title:"Error",msg:"Hubo un error al recuperar la pregunta secreta",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}}})}}})}},recoveryPass:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().submit({waitMsg:"Procesando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){if(e.up("form").getForm().findField("idrecoverymethod").getValue()==1){window.location="change_pass.aspx?"+i.link}}})},failure:function(e,t){var n=Ext.JSON.decode(t.response.responseText);Ext.MessageBox.show({title:n.msg.title,msg:n.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},setNewPass:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(e,t,n){var r=Ext.JSON.decode(t.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){window.location="Ingresar.aspx"}})},failure:function(e,t){var n=Ext.JSON.decode(t.response.responseText);Ext.MessageBox.show({title:n.msg.title,msg:n.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}}});Ext.create("Ext.app.Controller",{control:{"listWareHouses button[action=insert]":{click:"insert"},"listWareHouses button[action=clean]":{click:"cleanFilters"},listWareHouses:{itemdblclick:"editDbl"},"listWareHouses actioncolumn[action=ubications]":{click:"ubications"},"listWareHouses actioncolumn[action=edit]":{click:"edit"},"listWareHouses actioncolumn[action=remove]":{click:"remove"},"formWareHouse button[action=cancel]":{click:"cancel"},"formWareHouse button[action=save]":{click:"save"},"listUbications button[action=insert]":{click:"insertUbication"},"listUbications button[action=clean]":{click:"cleanFiltersUbication"},listUbications:{itemdblclick:"editDblUbication"},"listUbications actioncolumn[action=edit]":{click:"editUbication"},"listUbications actioncolumn[action=remove]":{click:"removeUbication"},"formUbication button[action=cancel]":{click:"cancel"},"formUbication button[action=save]":{click:"saveUbication"}},insert:function(e,t){Ext.widget("formWareHouse").down("form").loadRecord(Ext.create("flybox.model.WareHouse"))},cleanFilters:function(e,t){e.up("grid").filters.clearFilters();Ext.getStore("WareHouse").load()},cancel:function(e,t){e.up("window").close()},edit:function(e,t,n,r,i){Ext.widget("formWareHouse").down("form").loadRecord(e.getStore().getAt(n))},editDbl:function(e,t){Ext.widget("formWareHouse").down("form").loadRecord(t)},save:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idwarehouse").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("WareHouse").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},remove:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("idwarehouse"),object:"wareHouses"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("WareHouse").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})},ubications:function(e,t,n,r,i){Ext.getStore("Ubication").getProxy().setExtraParam("idwarehouse",e.getStore().getAt(n).get("idwarehouse"));Ext.getStore("Ubication").load();var s=false;var o=Ext.getCmp("contenido");var u=null;Ext.each(o.items.items,function(e,t,n){if(e.alias=="widget.listUbications"){s=true;u=e}});if(!s){u=Ext.widget("listUbications");o.add(u)}Ext.getCmp("contenido").setActiveTab(u);u.setTitle("Listado ubicaciones de la bodega "+e.getStore().getAt(n).get("name"))},insertUbication:function(e,t){var n=Ext.widget("formUbication");n.down("form").loadRecord(Ext.create("flybox.model.Ubication"));n.down("form").getForm().findField("idwarehouse").setValue(Ext.getStore("Ubication").getProxy().extraParams.idwarehouse)},cleanFiltersUbication:function(e,t){e.up("grid").filters.clearFilters();Ext.getStore("Ubication").load()},editUbication:function(e,t,n,r,i){Ext.getStore("TypeUbication").load({callback:function(){var t=Ext.widget("formUbication");t.down("form").loadRecord(e.getStore().getAt(n));t.down("form").getForm().findField("idwarehouse").setValue(Ext.getStore("Ubication").getProxy().extraParams.idwarehouse);t.down("form").getForm().findField("idtypeubication").setValue(e.getStore().getAt(n).get("typeUbication").idtypeubication)}})},editDblUbication:function(e,t){Ext.getStore("TypeUbication").load({callback:function(){var e=Ext.widget("formUbication");e.down("form").loadRecord(t);e.down("form").getForm().findField("idwarehouse").setValue(Ext.getStore("Ubication").getProxy().extraParams.idwarehouse);e.down("form").getForm().findField("idtypeubication").setValue(t.get("typeUbication").idtypeubication)}})},saveUbication:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idubication").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Ubication").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}},removeUbication:function(e,t,n,r,i){Ext.MessageBox.confirm("Eliminar registro","¿Desea eliminar el registro?",function(t){if(t=="yes"){Ext.Ajax.request({url:"delete/delete_object.aspx",params:{id:e.getStore().getAt(n).get("idubication"),object:"ubications"},success:function(e){var t=Ext.JSON.decode(e.responseText);Ext.MessageBox.show({title:t.msg.title,msg:t.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Ubication").load()}})},failed:function(e,t,n){Ext.MessageBox.show({title:t.response.result.msg.title,msg:t.response.result.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}})}})}});Ext.create("Ext.app.Controller",{control:{"listPackagesPicking button[action=clean]":{click:"cleanFilters"},listPackagesPicking:{itemdblclick:"editDbl"},"listPackagesPicking actioncolumn[action=edit]":{click:"edit"},"formPackagePicking button[action=cancel]":{click:"cancel"},"formPackagePicking button[action=save]":{click:"save"}},cleanFilters:function(e,t){e.up("grid").filters.clearFilters()},cancel:function(e,t){e.up("window").close()},edit:function(e,t,n,r,i){Ext.getStore("UsersPicking").load({start:0,limit:1e5,callback:function(){var t=e.getStore().getAt(n);var r=Ext.widget("formPackagePicking");r.down("form").loadRecord(t);r.down("form").getForm().findField("iduser").setValue(t.get("user").iduser)}})},editDbl:function(e,t){Ext.getStore("UsersPicking").load({start:0,limit:1e5,callback:function(){var e=Ext.widget("formPackagePicking");e.down("form").loadRecord(t);e.down("form").getForm().findField("iduser").setValue(t.get("user").iduser)}})},save:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().findField("id").setValue(e.up("form").getForm().findField("idconsolidate").getValue());e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO,fn:function(){Ext.getStore("Picking").load()}});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}}});Ext.application({requires:["Ext.container.Viewport","Ext.chart.*","Ext.ux.form.TinyMCE"],name:"flybox",launch:function(){Ext.create("flybox.store.DeprisaStore",{storeId:"Application",model:"flybox.model.Application",object:"apps"});Ext.create("flybox.store.DeprisaStore",{storeId:"ApplicationsGroup",model:"flybox.model.Application",object:"applicationsGroup"});Ext.create("flybox.store.DeprisaStore",{storeId:"Authorized",model:"flybox.model.Authorized",object:"authorizeds"});Ext.create("flybox.store.DeprisaStore",{storeId:"AuthorizedPackage",groupField:"group",model:"flybox.model.Package",object:"authorizedPackages"});Ext.create("flybox.store.DeprisaStore",{storeId:"AdmonPackage",model:"flybox.model.Package",object:"admonPackages"});Ext.create("Ext.data.Store",{storeId:"AuxReceivePackage",model:"flybox.model.AuxReceivePackage",remoteSort:true});Ext.create("flybox.store.DeprisaStore",{storeId:"City",model:"flybox.model.City",object:"cities"});Ext.create("flybox.store.DeprisaStore",{storeId:"CountriesGroup",model:"flybox.model.Country",object:"countriesGroup"});Ext.create("flybox.store.DeprisaStore",{storeId:"Country",model:"flybox.model.Country",object:"countries"});Ext.create("flybox.store.DeprisaStore",{storeId:"CountryOrigin",model:"flybox.model.Country",object:"countriesOrigin"});Ext.create("flybox.store.DeprisaStore",{storeId:"Customer",model:"flybox.model.Customer",object:"customers"});Ext.create("flybox.store.DeprisaStore",{storeId:"DeliveryCompany",model:"flybox.model.DeliveryCompany",object:"deliveryCompanies"});Ext.create("flybox.store.DeprisaStore",{storeId:"DeliveryCompanyReceivePackage",model:"flybox.model.DeliveryCompany",object:"deliveryCompaniesReceivePackage"});Ext.create("Ext.data.Store",{storeId:"DeliverySalePoint",fields:[{name:"iddeliverysalepoint",type:"int"},{name:"name",type:"string"}],data:[{iddeliverysalepoint:0,name:"No"},{iddeliverysalepoint:1,name:"Si"}]});Ext.create("flybox.store.DeprisaStore",{storeId:"DGPackage",model:"flybox.model.Package",object:"dgPackages"});Ext.create("flybox.store.DeprisaStore",{storeId:"Dispatch",model:"flybox.model.Dispatch",object:"dispatchs"});Ext.create("flybox.store.DeprisaStore",{storeId:"EconomySector",model:"flybox.model.EconomySector",object:"economySectors"});Ext.create("flybox.store.DeprisaStore",{storeId:"EnteredPackage",model:"flybox.model.Package",object:"enteredPackages"});Ext.create("flybox.store.DeprisaStore",{storeId:"FieldTemplate",model:"flybox.model.FieldTemplate",object:"fields"});Ext.create("flybox.store.DeprisaStore",{storeId:"Group",model:"flybox.model.Group",object:"groups"});Ext.create("flybox.store.DeprisaStore",{storeId:"GroupPackage",model:"flybox.model.Package",object:"groupPackage"});Ext.create("flybox.store.DeprisaStore",{storeId:"GroupsApplication",model:"flybox.model.Group",object:"groupsApplication"});Ext.create("flybox.store.DeprisaStore",{storeId:"GroupsCountry",model:"flybox.model.Group",object:"groupsCountry"});Ext.create("flybox.store.DeprisaStore",{storeId:"GroupsModule",model:"flybox.model.GroupModule",object:"groupsModule"});Ext.create("flybox.store.DeprisaStore",{storeId:"GroupsUser",model:"flybox.model.Group",object:"groupsUser"});Ext.create("flybox.store.DeprisaStore",{storeId:"GroupTracking",model:"flybox.model.GroupTracking",object:"groupsTracking"});Ext.create("flybox.store.DeprisaStore",{storeId:"InfoMethod",model:"flybox.model.InfoMethod",object:"infoMethods"});Ext.create("flybox.store.DeprisaStore",{storeId:"Item",model:"flybox.model.Item",object:"items"});Ext.create("flybox.store.DeprisaStore",{storeId:"LevelAccess",model:"flybox.model.LevelAccess",object:"levelsAccess"});Ext.create("flybox.store.DeprisaStore",{storeId:"ListCustomer",model:"flybox.model.ListCustomer",object:"listCustomers"});Ext.create("flybox.store.DeprisaStore",{storeId:"Locker",model:"flybox.model.Locker",object:"lockers"});Ext.create("flybox.store.DeprisaStore",{storeId:"MeasuringSystem",model:"flybox.model.MeasuringSystem",object:"measuringsSystem"});Ext.create("flybox.store.DeprisaStore",{storeId:"Missing",model:"flybox.model.Package",object:"missings"});Ext.create("flybox.store.DeprisaStore",{storeId:"Module",model:"flybox.model.Module",object:"modules"});Ext.create("Ext.data.TreeStore",{storeId:"ModuleTree",model:"flybox.model.Module",nodeParam:"module",remoteSort:true,proxy:{type:"ajax",url:"stores/module_tree.aspx",extraParams:{idapplication:0},reader:{type:"json",root:"module",successProperty:"success"},listeners:{exception:function(e,t,n,r){var i=Ext.JSON.decode(t.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}}}});Ext.create("flybox.store.DeprisaStore",{storeId:"Money",model:"flybox.model.Money",object:"moneys"});Ext.create("flybox.store.DeprisaStore",{storeId:"NoApplicationsGroup",model:"flybox.model.Application",object:"noApplicationsGroup"});Ext.create("flybox.store.DeprisaStore",{storeId:"NoCountriesGroup",model:"flybox.model.Country",object:"noCountriesGroup"});Ext.create("flybox.store.DeprisaStore",{storeId:"NoGroupsApplication",model:"flybox.model.Group",object:"noGroupsApplication"});Ext.create("flybox.store.DeprisaStore",{storeId:"NoGroupsCountry",model:"flybox.model.Group",object:"noGroupsCountry"});Ext.create("flybox.store.DeprisaStore",{storeId:"NoGroupsUser",model:"flybox.model.Group",object:"noGroupsUser"});Ext.create("flybox.store.DeprisaStore",{storeId:"NoUsersGroup",model:"flybox.model.User",object:"noUsersGroup"});Ext.create("flybox.store.DeprisaStore",{storeId:"UsersPicking",model:"flybox.model.User",object:"usersPicking",remoteFilter:false});Ext.create("flybox.store.DeprisaStore",{storeId:"Occupation",model:"flybox.model.Occupation",object:"occupations"});Ext.create("flybox.store.DeprisaStore",{storeId:"Package",model:"flybox.model.Package",object:"packages"});Ext.create("flybox.store.DeprisaStore",{storeId:"Page",model:"flybox.model.Page",object:"pages"});Ext.create("flybox.store.DeprisaStore",{storeId:"Payment",model:"flybox.model.Payment",object:"payments"});Ext.create("flybox.store.DeprisaStore",{storeId:"PendingPackage",model:"flybox.model.Package",object:"pendings"});Ext.create("flybox.store.DeprisaStore",{storeId:"Prealert",model:"flybox.model.Prealert",object:"prealerts"});Ext.create("flybox.store.DeprisaStore",{storeId:"Printer",model:"flybox.model.Printer",object:"printers"});Ext.create("flybox.store.DeprisaStore",{storeId:"Product",model:"flybox.model.Product",object:"products"});Ext.create("flybox.store.DeprisaStore",{storeId:"Productivity",model:"flybox.model.Productivity",object:"productivity"});Ext.create("flybox.store.DeprisaStore",{storeId:"Provide",model:"flybox.model.Provide",object:"provides"});Ext.create("flybox.store.DeprisaStore",{storeId:"ReceivePackage",model:"flybox.model.Package",object:"receivedPackages"});Ext.create("flybox.store.DeprisaStore",{storeId:"RejectionReason",model:"flybox.model.RejectionReason",object:"rejectionReasons"});Ext.create("flybox.store.DeprisaStore",{storeId:"RequestPending",model:"flybox.model.RequestPending",object:"requestsPending"});Ext.create("flybox.store.DeprisaStore",{storeId:"Resource",model:"flybox.model.Resource",object:"resources"});Ext.create("flybox.store.DeprisaStore",{storeId:"SalePoint",model:"flybox.model.SalePoint",object:"salesPoint"});Ext.create("flybox.store.DeprisaStore",{storeId:"SecretQuestion",model:"flybox.model.SecretQuestion",object:"secretQuestions"});Ext.create("flybox.store.DeprisaStore",{storeId:"StateLocker",model:"flybox.model.StateLocker",object:"statesLocker"});Ext.create("flybox.store.DeprisaStore",{storeId:"StateTracking",model:"flybox.model.StateTracking",object:"statesTracking"});Ext.create("flybox.store.DeprisaStore",{storeId:"Template",model:"flybox.model.Template",object:"templates"});Ext.create("flybox.store.DeprisaStore",{storeId:"TypeID",model:"flybox.model.TypeID",object:"typesID"});Ext.create("flybox.store.DeprisaStore",{storeId:"TypeLocker",model:"flybox.model.TypeLocker",object:"typesLocker"});Ext.create("flybox.store.DeprisaStore",{storeId:"TypePackage",model:"flybox.model.TypePackage",object:"typesPackage"});Ext.create("flybox.store.DeprisaStore",{storeId:"TypeResource",model:"flybox.model.TypeResource",object:"typesResource"});Ext.create("flybox.store.DeprisaStore",{storeId:"TypeUbication",model:"flybox.model.TypeUbication",object:"typesUbication"});Ext.create("flybox.store.DeprisaStore",{storeId:"Ubication",model:"flybox.model.Ubication",object:"ubications"});Ext.create("flybox.store.DeprisaStore",{storeId:"User",model:"flybox.model.User",object:"users"});Ext.create("flybox.store.DeprisaStore",{storeId:"UsersGroup",model:"flybox.model.User",object:"usersGroup"});Ext.create("flybox.store.DeprisaStore",{storeId:"WareHouse",model:"flybox.model.WareHouse",object:"wareHouses"});Ext.create("flybox.store.DeprisaStore",{storeId:"Picking",model:"flybox.model.Picking",object:"picking"});Ext.create("Ext.data.Store",{storeId:"StatePackage",fields:[{name:"idstatepackage",type:"int"},{name:"name",type:"string"}],data:[{idstatepackage:2,name:"Normal"},{idstatepackage:3,name:"Autorizado"},{idstatepackage:6,name:"Pendiente"},{idstatepackage:7,name:"DG"},{idstatepackage:8,name:"Perdido"},{idstatepackage:9,name:"Devuelto"}]});Ext.define("flybox.view.DeprisaGrid",{extend:"Ext.grid.Panel",alias:"",plugins:{ptype:"gridfilters",menuFilterText:"Filtros"},layout:"fit",closable:true,autoScroll:true,buttonsAds:[],buttonsIni:["-",{xtype:"button",text:"Insertar",iconCls:"insert",tooltip:"Insertar",action:"insert"},"-",{xtype:"button",icon:"css/clean.png",text:"Limpiar filtros",tooltip:"Limpiar filtros",action:"clean"}],bbar:{xtype:"pagingtoolbar",pageSize:25,displayInfo:true,items:[]},viewConfig:{enableTextSelection:true},constructor:function(e){this.bbar.store=this.store;this.bbar.items=this.buttonsIni.concat(this.buttonsAds);this.callParent(e)}});Ext.define("flybox.view.DeprisaForm",{extend:"Ext.window.Window",iconCls:"edit",width:600,maximizable:true,object:"",fields:[],buttons:[],modal:true,layout:"fit",autoShow:true,items:[{xtype:"form",autoScroll:true,url:"update/save_object.aspx",defaults:{labelAlign:"right"}}],initComponent:function(){this.items[0].items=[{xtype:"hiddenfield",name:"id",value:""},{xtype:"hiddenfield",name:"object",value:this.object},{xtype:"panel",html:"* Campos obligatorios",border:0,padding:10}].concat(this.fields);this.items[0].buttons=this.buttons;this.buttons=null;this.callParent()}});Ext.define("flybox.view.DeprisaItemSelector",{extend:"Ext.window.Window",maximizable:true,modal:true,width:Ext.getBody().getViewSize().width*.8,height:500,autoShow:true,layout:{type:"hbox",align:"stretch",padding:5},defaults:{flex:1},columns:[],storeSource:"",storeFinish:"",items:[{xtype:"grid",title:"No asignados",id:"gridSource",multiSelect:true,plugins:{ptype:"gridfilters",menuFilterText:"Filtros"},bbar:{xtype:"pagingtoolbar",pageSize:25,displayInfo:true},viewConfig:{plugins:{ptype:"gridviewdragdrop",dragGroup:"source",dropGroup:"destination"}}},{xtype:"grid",id:"gridDestination",multiSelect:true,title:"Asignados",plugins:{ptype:"gridfilters",menuFilterText:"Filtros"},store:"GroupsUser",bbar:{xtype:"pagingtoolbar",pageSize:25,displayInfo:true},viewConfig:{plugins:{ptype:"gridviewdragdrop",dragGroup:"destination",dropGroup:"source"}}}],constructor:function(e){this.items[0].columns=this.columns;this.items[0].store=this.storeSource;this.items[0].bbar.store=this.storeSource;this.items[1].columns=this.columns;this.items[1].store=this.storeFinish;this.items[1].bbar.store=this.storeFinish;this.callParent(e)}});Ext.define("flybox.view.application.Form",{extend:"flybox.view.DeprisaForm",alias:"widget.formApplication",title:"Editar aplicación",object:"apps",fields:[{xtype:"hiddenfield",name:"idapplication",value:0},{xtype:"textfield",name:"name",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Nombre"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.application.FormGroupModule",{extend:"flybox.view.DeprisaForm",alias:"widget.formGroupModule",title:"Editar grupo de un módulo",object:"groupsModule",fields:[{xtype:"hiddenfield",name:"idgroupmodule",value:0},{xtype:"hiddenfield",name:"idmodule",value:0},{xtype:"combo",name:"idgroup",value:"",store:"Group",valueField:"idgroup",displayField:"name",allowBlank:false,fieldLabel:"* Grupo",queryMode:"local",anchor:"90%",typeAhead:true,forceSelection:true},{xtype:"combo",name:"idlevelaccess",value:"",store:"LevelAccess",valueField:"idlevelaccess",displayField:"name",allowBlank:false,fieldLabel:"* Nivel de acceso",queryMode:"local",anchor:"90%",typeAhead:true,forceSelection:true}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.application.FormModule",{extend:"flybox.view.DeprisaForm",alias:"widget.formModule",title:"Editar módulo",object:"modules",fields:[{xtype:"hiddenfield",name:"idmodule",value:0},{xtype:"combo",name:"idparent",emptyText:"- Nuevo módulo -",value:"",anchor:"90%",store:"Module",valueField:"idmodule",displayField:"name",fieldLabel:"* Módulo padre",queryMode:"local",forceSelection:true,typeAhead:true},{xtype:"hiddenfield",name:"idapplication",value:0},{xtype:"textfield",name:"name",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Nombre"},{xtype:"textfield",name:"class",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Clase"},{xtype:"textfield",name:"script",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Script/Acción"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.application.Grid",{extend:"flybox.view.DeprisaGrid",iconCls:"apps",alias:"widget.listApplications",title:"Listado aplicaciones",store:"Application",columns:[{header:"ID",filter:"number",dataIndex:"idapplication"},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{xtype:"actioncolumn",width:20,action:"groups",tooltip:"Grupos",icon:"css/group.png",stopSelection:false,iconCls:"group"},{xtype:"actioncolumn",width:20,action:"modules",tooltip:"Módulos",icon:"css/module.png",stopSelection:false,iconCls:"module"},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:false,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",stopSelection:false,icon:"css/remove.png",iconCls:"remove"}]});Ext.define("flybox.view.application.Groups",{extend:"flybox.view.DeprisaItemSelector",alias:"widget.listGroupsApplication",title:"Listado grupos de la aplicación",iconCls:"group",columns:[{header:"ID",filter:"number",dataIndex:"idgroup"},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{header:"Activo",dataIndex:"active",filter:"boolean",renderer:function(e){if(e){return"Si"}else{return"No"}},flex:1}],storeSource:"NoGroupsApplication",storeFinish:"GroupsApplication"});Ext.define("flybox.view.application.GroupsModule",{extend:"flybox.view.DeprisaGrid",iconCls:"group",alias:"widget.listGroupsModule",title:"Listado grupos asignados a un módulo",store:"GroupsModule",columns:[{header:"ID",filter:"number",dataIndex:"idgroupmodule"},{header:"Grupo",dataIndex:"group",renderer:function(e){return e.name},flex:3},{header:"Nivel de acceso",dataIndex:"levelAccess",renderer:function(e){return e.name},flex:3},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:false,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",stopSelection:false,icon:"css/remove.png",iconCls:"remove"}]});Ext.define("flybox.view.application.Modules",{extend:"Ext.tree.Panel",iconCls:"module",plugins:{ptype:"gridfilters",menuFilterText:"Filtros"},alias:"widget.listModules",title:"Listado módulos",layout:"fit",store:"ModuleTree",closable:true,displayField:"name",rootVisible:false,useArrows:true,autoScroll:true,columns:[{header:"Nombre",xtype:"treecolumn",filter:"string",dataIndex:"name",flex:3},{header:"Clase",filter:"string",dataIndex:"class",flex:2},{header:"Script/Acción",filter:"string",dataIndex:"script",flex:3},{xtype:"actioncolumn",width:20,action:"groups",tooltip:"Grupos",icon:"css/group.png",stopSelection:false,iconCls:"group"},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:false,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",stopSelection:false,icon:"css/remove.png",iconCls:"remove"}],bbar:{xtype:"toolbar",items:[{xtype:"button",text:"Insertar",iconCls:"insert",tooltip:"Insertar",action:"insert"},"-",{xtype:"button",icon:"css/clean.png",text:"Limpiar filtros",tooltip:"Limpiar filtros",action:"clean"}]}});Ext.define("flybox.view.country.SalesPoint",{extend:"flybox.view.DeprisaGrid",iconCls:"city",alias:"widget.listSalesPoint",title:"Listado de puntos de venta",store:"SalePoint",columns:[{header:"ID",filter:"number",dataIndex:"idsalepoint"},{header:"Nombre",filter:"string",dataIndex:"name",flex:2},{header:"Dirección",filter:"string",dataIndex:"address",flex:3},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:false,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",stopSelection:false,icon:"css/remove.png",iconCls:"remove"}]});Ext.define("flybox.view.country.Groups",{extend:"flybox.view.DeprisaItemSelector",alias:"widget.listGroupsCountry",iconCls:"group",storeSource:"NoGroupsCountry",storeFinish:"GroupsCountry",columns:[{header:"ID",filter:"number",dataIndex:"idgroup"},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{header:"Activo",dataIndex:"active",filter:"boolean",renderer:function(e){if(e){return"Si"}else{return"No"}},flex:1}]});Ext.define("flybox.view.country.Grid",{extend:"flybox.view.DeprisaGrid",iconCls:"country",alias:"widget.listCountries",title:"Listado paises",store:"Country",columns:[{header:"ID",filter:"number",dataIndex:"idcountry"},{header:"Nombre",filter:"string",dataIndex:"name",flex:2},{header:"IATA",filter:"string",dataIndex:"codeIATA",flex:1},{header:"Mínimo declarado",filter:"number",dataIndex:"minValueDeclared",flex:1},{header:"Máximo declarado",filter:"number",dataIndex:"maxValueDeclared",flex:1},{header:"Moneda",filter:"string",dataIndex:"money",renderer:function(e){return e.name},flex:1},{header:"Sistema medida",filter:"string",dataIndex:"measuringSystem",renderer:function(e){return e.name},flex:1},{header:"Peso máximo",filter:"number",dataIndex:"maxWeight",flex:1},{header:"Millas por dolar",filter:"number",dataIndex:"milesByDollar",flex:1},{header:"Peso máximo documentos",filter:"number",dataIndex:"maxWeightDocs",flex:1},{header:"Máximo longitud",filter:"number",dataIndex:"maxLongitude",flex:1},{header:"País de entrega",filter:"boolean",dataIndex:"delivery",renderer:function(e){if(e){return"Si"}else{return"No"}},flex:1},{header:"Oficina Socrates",filter:"string",dataIndex:"codeOffice",flex:1},{xtype:"actioncolumn",width:20,action:"groups",tooltip:"Grupos",stopSelection:false,icon:"css/group.png",iconCls:"group"},{xtype:"actioncolumn",width:20,action:"cities",stopSelection:false,tooltip:"Ciudades",icon:"css/city.png",iconCls:"city"},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",stopSelection:false,icon:"css/edit.png",iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",stopSelection:false,icon:"css/remove.png",iconCls:"remove"}]});Ext.define("flybox.view.country.FormSalePoint",{extend:"flybox.view.DeprisaForm",alias:"widget.formSalePoint",title:"Editar punto de venta",object:"salesPoint",fields:[{xtype:"hiddenfield",name:"idsalepoint",value:0},{xtype:"hiddenfield",name:"idcity",value:0},{xtype:"textfield",name:"name",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Nombre"},{xtype:"textfield",name:"address",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Dirección"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.country.FormCity",{extend:"flybox.view.DeprisaForm",alias:"widget.formCity",title:"Editar ciudad",object:"cities",fields:[{xtype:"hiddenfield",name:"idcity",value:0},{xtype:"hiddenfield",name:"idcountry",value:0},{xtype:"textfield",name:"name",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Nombre"},{xtype:"textfield",name:"code",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Código"},{xtype:"combo",name:"isCourrier",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Solo courrier",store:[[false,"No"],[true,"Si"]],queryMode:"local",typeAHead:true,forceSelection:true}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.country.Form",{extend:"flybox.view.DeprisaForm",alias:"widget.formCountry",title:"Editar país",object:"countries",fields:[{xtype:"hiddenfield",name:"idcountry",value:0},{xtype:"textfield",name:"name",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Nombre"},{xtype:"textfield",name:"codeIATA",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Código IATA"},{xtype:"numberfield",name:"minValueDeclared",decimalPrecision:2,decimalSeparator:".",hideTrigger:true,value:0,allowBlank:false,anchor:"90%",fieldLabel:"* Mínimo declarado"},{xtype:"numberfield",name:"maxValueDeclared",decimalPrecision:2,decimalSeparator:".",hideTrigger:true,value:0,allowBlank:false,anchor:"90%",fieldLabel:"* Máximo declarado"},{xtype:"combo",name:"idmoney",anchor:"90%",value:"",store:"Money",valueField:"idmoney",displayField:"name",fieldLabel:"* Moneda",queryMode:"local",forceSelection:true},{xtype:"combo",name:"idmeasuringsystem",anchor:"90%",value:"",store:"MeasuringSystem",valueField:"idmeasuringsystem",displayField:"name",fieldLabel:"* Sistema de medida",queryMode:"local"},{xtype:"numberfield",decimalPrecision:2,decimalSeparator:".",hideTrigger:true,name:"maxWeight",value:0,allowBlank:false,anchor:"90%",fieldLabel:"* Peso máximo"},{xtype:"numberfield",decimalPrecision:2,decimalSeparator:".",hideTrigger:true,name:"milesByDollar",value:0,allowBlank:false,anchor:"90%",fieldLabel:"* Millas por dolar"},{xtype:"numberfield",decimalPrecision:2,decimalSeparator:".",hideTrigger:true,name:"maxWeightDocs",value:0,allowBlank:false,anchor:"90%",fieldLabel:"* Peso máximo documentos"},{xtype:"numberfield",decimalPrecision:2,decimalSeparator:".",hideTrigger:true,name:"maxLongitude",value:0,allowBlank:false,anchor:"90%",fieldLabel:"* Máximo longitud"},{xtype:"combo",name:"delivery",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* País de entrega",store:[[false,"No"],[true,"Si"]],queryMode:"local",typeAHead:true},{xtype:"textfield",name:"codeOffice",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Código oficina Socrates"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.country.Cities",{extend:"flybox.view.DeprisaGrid",iconCls:"city",alias:"widget.listCities",title:"Listado de ciudades",store:"City",columns:[{header:"ID",filter:"number",dataIndex:"idcity"},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{header:"Código",filter:"string",dataIndex:"code",flex:1},{header:"Solo courrier",filter:"boolean",dataIndex:"isCourrier",renderer:function(e){if(e){return"Si"}else{return"No"}},flex:1},{xtype:"actioncolumn",width:20,action:"salesPoint",tooltip:"Puntos de venta",stopSelection:false,icon:"css/salePoint.png",iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"edit",stopSelection:false,tooltip:"Editar",icon:"css/edit.png",iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",stopSelection:false,icon:"css/remove.png",iconCls:"remove"}]});Ext.define("flybox.view.delivery_company.Grid",{extend:"flybox.view.DeprisaGrid",iconCls:"deliveryCompany",alias:"widget.listDeliveryCompanies",title:"Listado empresas transportadoras",store:"DeliveryCompany",columns:[{header:"ID",filter:"number",dataIndex:"iddeliverycompany"},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{header:"País",filter:"string",dataIndex:"country",renderer:function(e){return e.name},flex:3},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:false,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",icon:"css/remove.png",stopSelection:false,iconCls:"remove"}]});Ext.define("flybox.view.delivery_company.Form",{extend:"flybox.view.DeprisaForm",alias:"widget.formDeliveryCompany",title:"Editar empresa transportadora",object:"deliveryCompanies",fields:[{xtype:"hiddenfield",name:"iddeliverycompany",value:0},{xtype:"textfield",name:"name",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Nombre"},{xtype:"combo",name:"idcountry",forceSelection:true,anchor:"90%",allowBlank:false,store:"Country",fieldLabel:"* País",valueField:"idcountry",displayField:"name",queryMode:"local"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.dispatch.Grid",{extend:"flybox.view.DeprisaGrid",iconCls:"dispatch",alias:"widget.listDispatchedPackages",title:"Listado paquetes despachados",store:"Dispatch",columns:[{header:"Casillero",dataIndex:"locker",filter:"string",renderer:function(e){return e.idlocker},flex:1},{header:"Guía socrates",filter:"string",dataIndex:"tracking",flex:1},{header:"Producto",filter:"string",dataIndex:"product",renderer:function(e){return e.name},flex:1},{header:"Partida arancelaria",dataIndex:"typePackage",renderer:function(e){return e.name},flex:1},{header:"Sello de seguridad",filter:"string",dataIndex:"securityStamp",flex:1},{header:"Fecha despacho",dataIndex:"dateDispatch",filter:{type:"date",fields:{lt:{text:"Antes de"},gt:{text:"Depués de "},eq:{text:"El día"}},dateFormat:"Y-m-d H:i:s"},flex:1,renderer:Ext.util.Format.dateRenderer("Y-m-d H:i:s")},{header:"Valor declarado",dataIndex:"declaredValue",flex:1},{header:"Peso",dataIndex:"weight",flex:1},{header:"Descripción",dataIndex:"description",filter:"string",renderer:function(e){var t=new String(e);var n=t.split(",");var r="<table border='1'><tr><th>Descripci&oacute;n</th><th>Cantidad</th><th>Valor unitario</th><th>Tracking</th></tr>";for(i=0;i<n.length;i++){var s=n[i].substr(0,n[i].indexOf("("));var o=n[i].substring(n[i].indexOf("(")+1,n[i].length-1).split("|");r+="<tr><td>"+s+"</td><td>"+o[0]+"</td><td>"+o[1]+"</td><td>"+o[2]+"</td></tr>"}r+="</table>";return r},flex:4},{xtype:"actioncolumn",width:20,action:"printer",tooltip:"Reimprimir label y factura",stopSelection:false,icon:"css/printer.png",iconCls:"printer"}]});Ext.define("flybox.view.dispatch.FormMiles",{extend:"Ext.window.Window",iconCls:"edit",alias:"widget.formMiles",title:"Seleccionar rango de fechas para generar el reporte",maximizable:true,width:600,modal:true,layout:"fit",autoShow:true,items:[{xtype:"form",url:"stores/list_objects.aspx",method:"get",defaults:{labelAlign:"right"},frame:true,items:[{xtype:"hiddenfield",name:"object",value:"miles"},{xtype:"panel",html:"* Campos obligatorios",border:0,padding:10},{xtype:"datefield",name:"date_begin",anchor:"95%",itemId:"startdt",vtype:"daterange",endDateField:"enddt",altFormats:"Y-m-d",format:"Y-m-d",submitFormat:"Y-m-d",allowBlank:false,fieldLabel:"Fecha inicio"},{xtype:"datefield",name:"date_end",itemId:"enddt",anchor:"95%",vtype:"daterange",startDateField:"startdt",altFormats:"Y-m-d",format:"Y-m-d",submitFormat:"Y-m-d",allowBlank:false,fieldLabel:"Fecha fin"}],buttons:[{text:"Generar",action:"save"},{text:"Cancelar",action:"cancel"}]}]});Ext.define("flybox.view.economy_sector.Grid",{extend:"flybox.view.DeprisaGrid",iconCls:"economySector",alias:"widget.listEconomySectors",title:"Listado de sectores de la economía",store:"EconomySector",columns:[{header:"ID",filter:"number",dataIndex:"ideconomysector"},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:false,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",stopSelection:false,icon:"css/remove.png",iconCls:"remove"}]});Ext.define("flybox.view.economy_sector.Form",{extend:"flybox.view.DeprisaForm",alias:"widget.formEconomySector",title:"Editar sector de la economía",object:"economySectors",fields:[{xtype:"hiddenfield",name:"ideconomysector",value:0},{xtype:"textfield",name:"name",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Nombre"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.group.Users",{extend:"flybox.view.DeprisaItemSelector",iconCls:"user",alias:"widget.listUsersGroup",columns:[{header:"ID",filter:"number",dataIndex:"iduser"},{header:"Login",filter:"string",dataIndex:"login",flex:3},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{header:"Activo",dataIndex:"active",filter:"boolean",renderer:function(e){if(e){return"Si"}else{return"No"}},flex:1}],storeSource:"NoUsersGroup",storeFinish:"UsersGroup"});Ext.define("flybox.view.group.Grid",{extend:"flybox.view.DeprisaGrid",iconCls:"group",alias:"widget.listGroups",title:"Listado grupos",store:"Group",columns:[{header:"ID",filter:"number",dataIndex:"idgroup"},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{header:"Activo",dataIndex:"active",filter:"boolean",renderer:function(e){if(e){return"Si"}else{return"No"}},flex:1},{xtype:"actioncolumn",width:20,action:"countries",tooltip:"Paises",icon:"css/country.png",stopSelection:false,iconCls:"country"},{xtype:"actioncolumn",width:20,action:"applications",tooltip:"Aplicaciones",icon:"css/apps.png",stopSelection:false,iconCls:"apps"},{xtype:"actioncolumn",width:20,action:"users",tooltip:"Usuarios",icon:"css/user.png",stopSelection:false,iconCls:"user"},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:false,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",icon:"css/remove.png",stopSelection:false,iconCls:"remove"}]});Ext.define("flybox.view.group.Form",{extend:"flybox.view.DeprisaForm",alias:"widget.formGroup",title:"Editar grupo",object:"groups",fields:[{xtype:"hiddenfield",name:"idgroup",value:0},{xtype:"textfield",name:"name",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Nombre"},{xtype:"combo",name:"active",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Activo",store:[[false,"No"],[true,"Si"]],queryMode:"local",forceSelection:true,typeAHead:true}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.group.Countries",{extend:"flybox.view.DeprisaItemSelector",alias:"widget.listCountriesGroup",title:"Listado paises del grupo",iconCls:"country",columns:[{header:"ID",filterable:true,dataIndex:"idcountry"},{header:"Nombre",filterable:true,dataIndex:"name",flex:3}],storeSource:"NoCountriesGroup",storeFinish:"CountriesGroup"});Ext.define("flybox.view.group.Applications",{extend:"flybox.view.DeprisaItemSelector",alias:"widget.listApplicationsGroup",title:"Listado aplicaciones del grupo",iconCls:"apps",columns:[{header:"ID",dataIndex:"idapplication"},{header:"Nombre",dataIndex:"name",flex:3}],storeSource:"NoApplicationsGroup",storeFinish:"ApplicationsGroup"});Ext.define("flybox.view.group_tracking.Grid",{extend:"flybox.view.DeprisaGrid",iconCls:"groupTracking",alias:"widget.listGroupsTracking",title:"Listado grupos de tracking",store:"GroupTracking",columns:[{header:"ID",filter:"number",dataIndex:"idgrouptracking"},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:false,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",stopSelection:false,icon:"css/remove.png",iconCls:"remove"}]});Ext.define("flybox.view.group_tracking.Form",{extend:"flybox.view.DeprisaForm",alias:"widget.formGroupTracking",title:"Editar grupo de tracking",object:"groupsTracking",fields:[{xtype:"hiddenfield",name:"idgrouptracking",value:0},{xtype:"textfield",name:"name",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Nombre"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.info_method.Grid",{extend:"flybox.view.DeprisaGrid",iconCls:"infoMethod",alias:"widget.listInfoMethods",title:"Listado de métodos de información",store:"InfoMethod",columns:[{header:"ID",filter:"number",dataIndex:"idinfomethod"},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:false,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",stopSelection:false,icon:"css/remove.png",iconCls:"remove"}]});Ext.define("flybox.view.info_method.Form",{extend:"flybox.view.DeprisaForm",alias:"widget.formInfoMethod",title:"Editar método de información",object:"infoMethods",fields:[{xtype:"hiddenfield",name:"idinfomethod",value:0},{xtype:"textfield",name:"name",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Nombre"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.level_access.Grid",{extend:"flybox.view.DeprisaGrid",iconCls:"levelAccess",alias:"widget.listLevelsAccess",title:"Listado niveles de acceso",store:"LevelAccess",columns:[{header:"ID",filter:"number",dataIndex:"idlevelaccess"},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:false,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",stopSelection:false,icon:"css/remove.png",iconCls:"remove"}]});Ext.define("flybox.view.level_access.Form",{extend:"flybox.view.DeprisaForm",alias:"widget.formLevelAccess",object:"levelsAccess",fields:[{xtype:"hiddenfield",name:"idlevelaccess",value:0},{xtype:"textfield",name:"name",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Nombre"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.list_customer.Grid",{extend:"flybox.view.DeprisaGrid",iconCls:"listCustomer",alias:"widget.listListCustomers",title:"Listado de listas de clientes",store:"ListCustomer",columns:[{header:"ID",filter:"number",dataIndex:"idlistcustomer"},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{header:"Días bodegaje",filter:"number",dataIndex:"daysStorageFree",flex:2},{header:"Días abandono",filter:"number",dataIndex:"daysAbandonment",flex:2},{header:"Valor día bodegaje",filter:"number",dataIndex:"dayValue",flex:2},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:false,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",stopSelection:false,icon:"css/remove.png",iconCls:"remove"}]});Ext.define("flybox.view.list_customer.Form",{extend:"flybox.view.DeprisaForm",alias:"widget.formListCustomer",title:"Editar lista de cliente",object:"listCustomers",fields:[{xtype:"hiddenfield",name:"idlistcustomer",value:0},{xtype:"textfield",name:"name",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Nombre"},{xtype:"numberfield",name:"daysStorageFree",value:0,minValue:1,hideTrigger:true,allowBlank:false,anchor:"90%",fieldLabel:"* Días bodegaje"},{xtype:"numberfield",name:"daysAbandonment",value:0,minValue:1,hideTrigger:true,allowBlank:false,anchor:"90%",fieldLabel:"* Días abandono"},{xtype:"numberfield",name:"dayValue",value:0,minValue:0,decimalPrecision:2,decimalSeparator:".",hideTrigger:true,allowBlank:false,anchor:"90%",fieldLabel:"* Valor día bodegaje"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.locker.Grid",{extend:"flybox.view.DeprisaGrid",iconCls:"locker",alias:"widget.listLockers",title:"Listado casilleros",store:"Locker",columns:[{header:"Casillero",filter:"number",dataIndex:"idlocker"},{header:"Usuario",filter:"string",dataIndex:"user",renderer:function(e){return e.name},flex:2},{header:"Email",filter:"string",dataIndex:"user",renderer:function(e){return e.email},flex:2},{header:"Tipo de casillero",filter:"string",dataIndex:"type",renderer:function(e){return e.name},flex:1},{header:"Estado",filter:"string",dataIndex:"stateLocker",renderer:function(e){return e.name},flex:1},{header:"Fecha creación",filter:"date",dataIndex:"dateAdded",filter:{type:"date",fields:{lt:{text:"Antes de"},gt:{text:"Depués de "},eq:{text:"El día"}},dateFormat:"Y-m-d H:i:s"},flex:1,renderer:Ext.util.Format.dateRenderer("Y-m-d H:i:s")},{header:"Fecha rechazo",filter:"date",dataIndex:"dateReject",filter:{type:"date",fields:{lt:{text:"Antes de"},gt:{text:"Depués de "},eq:{text:"El día"}},dateFormat:"Y-m-d H:i:s"},flex:1,renderer:Ext.util.Format.dateRenderer("Y-m-d H:i:s")},{header:"Motivo rechazo",filter:"string",dataIndex:"rejectionReason",renderer:function(e){return e.name},flex:1},{xtype:"actioncolumn",width:20,action:"user",tooltip:"Titular",icon:"css/user.png",iconCls:"user",stopSelection:false},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",iconCls:"edit",stopSelection:false}]});Ext.define("flybox.view.locker.FormReport",{extend:"Ext.window.Window",iconCls:"edit",alias:"widget.formReportLocker",title:"Generar reporte de casilleros",width:600,maximizable:true,modal:true,layout:"fit",autoShow:true,autoScroll:true,items:[{xtype:"form",autoScroll:true,url:"stores/list_objects.aspx",method:"get",frame:true,defaults:{labelAlign:"right"},items:[{xtype:"hiddenfield",name:"object",value:"rptLocker"},{xtype:"panel",html:"* Campos obligatorios",border:0,padding:10},{xtype:"datefield",name:"date_begin",anchor:"95%",itemId:"startdt",vtype:"daterange",endDateField:"enddt",altFormats:"Y-m-d",format:"Y-m-d",submitFormat:"Y-m-d",allowBlank:false,fieldLabel:"Fecha inicio"},{xtype:"datefield",anchor:"95%",name:"date_end",itemId:"enddt",vtype:"daterange",startDateField:"startdt",altFormats:"Y-m-d",format:"Y-m-d",submitFormat:"Y-m-d",allowBlank:false,fieldLabel:"Fecha fin"}],buttons:[{text:"Generar",action:"save"},{text:"Cancelar",action:"cancel"}]}]});Ext.define("flybox.view.package.FormBehavior",{extend:"Ext.window.Window",iconCls:"edit",alias:"widget.formReportBehavior",title:"Generar reporte de comportamiento de operaciones",width:600,maximizable:true,modal:true,layout:"fit",autoShow:true,autoScroll:true,items:[{xtype:"form",autoScroll:true,url:"stores/list_objects.aspx",method:"get",frame:true,defaults:{labelAlign:"right"},items:[{xtype:"hiddenfield",name:"object",value:"rptBehavior"},{xtype:"panel",html:"* Campos obligatorios",border:0,padding:10},{xtype:"datefield",name:"date_begin",anchor:"95%",itemId:"startdt",vtype:"daterange",endDateField:"enddt",altFormats:"Y-m-d",format:"Y-m-d",submitFormat:"Y-m-d",allowBlank:false,fieldLabel:"Fecha inicio"},{xtype:"datefield",anchor:"95%",name:"date_end",itemId:"enddt",vtype:"daterange",startDateField:"startdt",altFormats:"Y-m-d",format:"Y-m-d",submitFormat:"Y-m-d",allowBlank:false,fieldLabel:"Fecha fin"}],buttons:[{text:"Generar",action:"save"},{text:"Cancelar",action:"cancel"}]}]});Ext.define("flybox.view.locker.FormCustomer",{extend:"flybox.view.DeprisaForm",alias:"widget.formCustomer",height:600,width:800,object:"customer",title:"Editar titular del casillero",fields:[{layout:"column",border:false,defaults:{layout:"anchor",style:"margin: 3px 10px; padding: 3px 10px;",anchor:"100%",columnWidth:.5,labelWidth:135},items:[{xtype:"hiddenfield",name:"iduser",value:0},{xtype:"hiddenfield",name:"facebookUserID",value:""},{xtype:"combo",name:"idtypelocker",forceSelection:true,typeAhead:true,allowBlank:false,store:"TypeLocker",fieldLabel:"Tipo de casillero *",readOnly:true,valueField:"idtypelocker",displayField:"name",queryMode:"local"},{xtype:"textfield",name:"name",value:"",maxLength:200,minLength:2,allowBlank:false,fieldLabel:"Nombres *"},{xtype:"textfield",name:"lastname",value:"",maxLength:50,minLength:2,allowBlank:false,fieldLabel:"Apellidos *"},{xtype:"combo",name:"idtypeid",forceSelection:true,allowBlank:false,typeAhead:true,store:"TypeID",fieldLabel:"Tipo de identificación *",valueField:"idtypeid",readOnly:true,displayField:"name",queryMode:"local"},{xtype:"textfield",name:"identification",vtype:"alphanum",readOnly:true,maxLength:50,minLength:5,value:"",allowBlank:false,fieldLabel:"Identificación *"},{xtype:"combo",name:"idcountry",forceSelection:true,typeAhead:true,store:"Country",hidden:true,allowBlank:false,fieldLabel:"País *",valueField:"idcountry",displayField:"name",queryMode:"local"},{xtype:"combo",name:"idcity",forceSelection:true,typeAhead:true,store:"City",hidden:true,allowBlank:false,fieldLabel:"Ciudad *",valueField:"idcity",displayField:"name",queryMode:"local"},{xtype:"combo",name:"ideconomysector",hidden:true,forceSelection:true,typeAhead:true,allowBlank:false,store:"EconomySector",fieldLabel:"Sector de la economía *",valueField:"ideconomysector",displayField:"name",queryMode:"local"},{xtype:"combo",name:"delivery_salepoint",hidden:true,typeAhead:true,value:0,forceSelection:true,allowBlank:false,store:"DeliverySalePoint",fieldLabel:"Entrega en punto de venta *",valueField:"iddeliverysalepoint",displayField:"name",queryMode:"local"},{xtype:"textfield",name:"address",hidden:true,maxLength:200,value:"",allowBlank:true,fieldLabel:"Dirección de correspondencia *"},{xtype:"combo",name:"idsalepoint",typeAhead:true,hidden:true,forceSelection:true,allowBlank:true,store:"SalePoint",fieldLabel:"Punto de venta *",valueField:"idsalepoint",displayField:"name",queryMode:"local"},{xtype:"textfield",name:"homePhone",hidden:true,value:"",allowBlank:false,fieldLabel:"Telefono fijo *"},{xtype:"textfield",name:"phone",hidden:true,value:"",vtype:"alphanum",allowBlank:false,fieldLabel:"Celular *"},{xtype:"textfield",name:"nameContact",value:"",hidden:true,fieldLabel:"Nombre contacto *"},{xtype:"textfield",name:"phoneContact",value:"",hidden:true,fieldLabel:"Teléfono contacto *"},{xtype:"textfield",name:"email",vtype:"email",value:"",hidden:true,allowBlank:false,fieldLabel:"Correo electrónico *"},{xtype:"textfield",name:"alternateEmail",vtype:"email",value:"",hidden:true,fieldLabel:"Correo electrónico alterno"},{xtype:"combo",name:"idoccupation",hidden:true,forceSelection:true,typeAhead:true,allowBlank:false,store:"Occupation",fieldLabel:"Profesión *",valueField:"idoccupation",displayField:"name",queryMode:"local"},{xtype:"datefield",name:"birthday",hidden:true,altFormats:"Y-m-d",format:"Y-m-d",submitFormat:"Y-m-d",allowBlank:false,fieldLabel:"Fecha nacimiento (aaaa-mm-dd)*",queryMode:"local"},{xtype:"textfield",name:"lifemiles",hidden:true,value:"",fieldLabel:"Número tarjeta lifemiles"},{xtype:"combo",name:"idinfomethod",hidden:true,forceSelection:true,typeAhead:true,allowBlank:false,store:"InfoMethod",fieldLabel:"Cómo se enteró de nuestros servicios *",valueField:"idinfomethod",displayField:"name",queryMode:"local"},{xtype:"combo",name:"idlistcustomer",forceSelection:true,typeAhead:true,allowBlank:false,store:"ListCustomer",fieldLabel:"Lista de cliente *",valueField:"idlistcustomer",displayField:"name",queryMode:"local"},{xtype:"grid",columnWidth:1,store:"Authorized",columns:[{header:"Nombre",flex:1,dataIndex:"name"},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",iconCls:"edit",stopSelection:false},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",icon:"css/remove.png",iconCls:"remove",stopSelection:false}]}]}],buttons:[{text:"Adicionar persona autorizada",action:"addAuthorized"},{text:"Cambiar pregunta y respuesta secreta",action:"chageSecretQuestion"},{text:"Cambiar contraseña",action:"changePassword"},{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.locker.FormChangePassword",{extend:"Ext.window.Window",alias:"widget.formChangePasswordCustomer",title:"Cambiar contraseña",iconCls:"edit",width:600,modal:true,layout:"anchor",autoShow:true,items:[{xtype:"form",url:"ajax/save_object.aspx",defaults:{labelAlign:"right"},frame:true,items:[{xtype:"hiddenfield",name:"object",value:"change_user_pass"},{xtype:"hiddenfield",name:"id",value:"0"},{xtype:"textfield",name:"pass",itemId:"pass",regex:/(?!^[0-9]*$)(?!^[a-zA-Z]*$)^([a-zA-Z0-9_-]{8,})$/,regexText:"La contraseña debe tener números y letras y mínimo 8 caracteres",vtype:"alphanum",value:"",allowBlank:false,inputType:"password",anchor:"90%",fieldLabel:"* Contraseña"},{xtype:"textfield",name:"confirm",value:"",allowBlank:false,vtype:"password",initialPassField:"pass",inputType:"password",anchor:"90%",fieldLabel:"* Confirmación"},{xtype:"panel",html:"* Campos obligatorios",border:0,padding:10}],buttons:[{text:"Guardar",action:"save",handler:function(e,t){if(e.up("form").getForm().isValid()){e.up("form").getForm().submit({waitMsg:"Guardando ...",success:function(t,n,r){var i=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:i.msg.title,msg:i.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO});e.up("window").close()},failure:function(t,n){var r=Ext.JSON.decode(n.response.responseText);Ext.MessageBox.show({title:r.msg.title,msg:r.msg.body,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});e.up("window").close()}})}else{Ext.MessageBox.show({title:"Error",msg:"Ingrese los datos correctos",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}}},{text:"Cancelar",action:"cancel"}]}]});Ext.define("flybox.view.locker.FormAuthorizedAdmon",{extend:"flybox.view.DeprisaForm",alias:"widget.formAuthorizedAdmon",title:"Editar autorizado",object:"authorizeds",fields:[{xtype:"hiddenfield",name:"idauthorized",value:0},{xtype:"hiddenfield",name:"iduser",value:0},{xtype:"textfield",name:"name",anchor:"90%",value:"",allowBlank:false,fieldLabel:"* Nombre"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.locker.FormAuthorized",{extend:"Ext.window.Window",iconCls:"edit",alias:"widget.formAuthorized",title:"Editar autorizado",maximizable:true,modal:true,layout:"fit",autoShow:true,items:[{xtype:"form",url:"ajax/save_object.aspx",defaults:{labelAlign:"right"},frame:true,items:[{xtype:"hiddenfield",name:"object",value:"authorized"},{xtype:"hiddenfield",name:"idauthorized",value:0},{xtype:"hiddenfield",name:"id",value:0},{xtype:"panel",html:"* Campos obligatorios",border:0,padding:10},{xtype:"textfield",name:"name",anchor:"90%",value:"",allowBlank:false,fieldLabel:"Nombre *"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]}]});Ext.define("flybox.view.locker.Form",{extend:"flybox.view.DeprisaForm",iconCls:"edit",alias:"widget.formLocker",title:"Editar casillero",object:"lockers",fields:[{xtype:"hiddenfield",name:"idlocker",value:0},{xtype:"hiddenfield",name:"iduser",value:0},{xtype:"combo",anchor:"90%",name:"idtypelocker",forceSelection:true,allowBlank:false,store:"TypeLocker",fieldLabel:"Tipo de casillero *",valueField:"idtypelocker",displayField:"name",queryMode:"local",readOnly:true},{xtype:"textfield",name:"user",anchor:"90%",value:"",allowBlank:false,fieldLabel:"Cliente *",readOnly:true},{xtype:"datefield",name:"dateAdded",anchor:"90%",value:"",altFormats:"Y-m-d",format:"Y-m-d",submitFormat:"Y-m-d",allowBlank:false,fieldLabel:"Fecha creación *",readOnly:true},{xtype:"combo",name:"idstatelocker",anchor:"90%",forceSelection:true,allowBlank:false,store:"StateLocker",fieldLabel:"Estado *",valueField:"idstatelocker",displayField:"name",queryMode:"local"},{xtype:"datefield",name:"dateReject",value:"",anchor:"90%",altFormats:"Y-m-d",format:"Y-m-d",submitFormat:"Y-m-d",hidden:true,fieldLabel:"Fecha rechazo",readOnly:true},{xtype:"combo",name:"idrejectionreason",forceSelection:true,anchor:"90%",hidden:true,store:"RejectionReason",fieldLabel:"Motivo de rechazo *",valueField:"idrejectionreason",displayField:"name",queryMode:"local"},{xtype:"textfield",name:"comments",anchor:"90%",value:"",fieldLabel:"Comentarios"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.measuring_system.Grid",{extend:"flybox.view.DeprisaGrid",iconCls:"measuringSystem",alias:"widget.listMeasuringsSystem",title:"Listado sistemas de medida",store:"MeasuringSystem",columns:[{header:"ID",filter:"number",dataIndex:"idmeasuringsystem"},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",stopSelection:false,icon:"css/edit.png",iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",stopSelection:false,icon:"css/remove.png",iconCls:"remove"}]});Ext.define("flybox.view.measuring_system.Form",{extend:"flybox.view.DeprisaForm",alias:"widget.formMeasuringSystem",title:"Editar sistema de medida",object:"measuringsSystem",fields:[{xtype:"hiddenfield",name:"idmeasuringsystem",value:0},{xtype:"textfield",name:"name",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Nombre"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.money.Grid",{extend:"flybox.view.DeprisaGrid",iconCls:"money",alias:"widget.listMoneys",title:"Listado de monedas",store:"Money",columns:[{header:"ID",filter:"number",dataIndex:"idmoney"},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:false,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",stopSelection:false,icon:"css/remove.png",iconCls:"remove"}]});Ext.define("flybox.view.money.Form",{extend:"flybox.view.DeprisaForm",alias:"widget.formMoney",title:"Editar moneda",object:"moneys",fields:[{xtype:"hiddenfield",name:"idmoney",value:0},{xtype:"textfield",name:"name",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Nombre"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.occupation.Grid",{extend:"flybox.view.DeprisaGrid",iconCls:"occupation",alias:"widget.listOccupations",title:"Listado de profesiones",store:"Occupation",columns:[{header:"ID",filter:"number",dataIndex:"idoccupation"},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:false,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",stopSelection:false,icon:"css/remove.png",iconCls:"remove"}]});Ext.define("flybox.view.occupation.Form",{extend:"flybox.view.DeprisaForm",alias:"widget.formOccupation",title:"Editar profesión",object:"occupations",fields:[{xtype:"hiddenfield",name:"idoccupation",value:0},{xtype:"textfield",name:"name",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Nombre"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.package.Authorizeds",{extend:"flybox.view.DeprisaGrid",iconCls:"authorizedPackage",features:[{ftype:"grouping",enableGroupingMenu:false,collapsible:false,groupHeaderTpl:'Grupo: ({name}) Cantidad de paquetes: ({rows.length})&nbsp;|&nbsp;<a href="#" onclick="dispatch({name})">Despachar</a>&nbsp;|&nbsp;<a href="#" onclick="disconsolidate({name})">Desconsolidar</a>'}],alias:"widget.listAuthorizedPackages",title:"Listado paquetes autorizados",layout:"fit",store:"AuthorizedPackage",closable:true,columns:[{header:"Casillero",filter:"number",dataIndex:"locker",renderer:function(e){return e.idlocker}},{header:"Usuario",dataIndex:"locker",renderer:function(e){return e.user.name}},{header:"Tipo de envío",dataIndex:"typePackage",flex:1,renderer:function(e){return e.name}},{header:"Ciudad de entrega",dataIndex:"cityDelivery",flex:1,renderer:function(e){return e.name}},{header:"Descripción",dataIndex:"description",flex:3},{header:"Guía transportador",filter:"string",dataIndex:"tracking",flex:3},{header:"Peso",dataIndex:"weight",flex:1},{header:"Empresa transportadora",dataIndex:"deliveryCompany",flex:1,renderer:function(e){return e.name}},{header:"Fecha de autorización",dataIndex:"dateAuthorization",flex:2,filter:{type:"date",fields:{lt:{text:"Antes de"},gt:{text:"Depués de "},eq:{text:"El día"}},dateFormat:"Y-m-d H:i:s"},renderer:Ext.util.Format.dateRenderer("Y-m-d H:i:s")},{header:"Fecha de ingreso",dataIndex:"dateEnter",flex:2,filter:{type:"date",fields:{lt:{text:"Antes de"},gt:{text:"Depués de "},eq:{text:"El día"}},dateFormat:"Y-m-d H:i:s"},renderer:Ext.util.Format.dateRenderer("Y-m-d H:i:s")},{header:"Bodega",dataIndex:"ubication",flex:1,renderer:function(e){return e.warehouse.name}},{header:"Ubicación",filter:"string",dataIndex:"ubication",flex:1,renderer:function(e){return e.code}},{header:"Usuario ingresa",filter:"string",dataIndex:"userEnter",flex:2,renderer:function(e){return e.name}},{xtype:"actioncolumn",width:20,action:"missing",tooltip:"Reportar pérdida",stopSelection:false,icon:"css/missing.png",iconCls:"edit"}]});Ext.define("flybox.view.package.DG",{extend:"flybox.view.DeprisaGrid",iconCls:"pending",alias:"widget.listDGPackages",title:"Listado paquetes DG",store:"DGPackage",columns:[{header:"ID",filter:"number",dataIndex:"idpackage"},{header:"Casillero",filter:"number",dataIndex:"locker",renderer:function(e){return e.idlocker},flex:1},{header:"Cliente",filter:"string",dataIndex:"locker",renderer:function(e){return e.user.name},flex:3},{header:"Tracking",filter:"string",dataIndex:"tracking",flex:3},{header:"Descripción",filter:"string",dataIndex:"description",flex:3},{header:"Transportadora",filter:"string",dataIndex:"deliveryCompany",flex:2,renderer:function(e){return e.name}},{header:"Fecha recepción",xtype:"datecolumn",dataIndex:"dateReceive",flex:3,filter:{type:"date",fields:{lt:{text:"Antes de"},gt:{text:"Depués de "},eq:{text:"El día"}},dateFormat:"Y-m-d H:i:s"},renderer:Ext.util.Format.dateRenderer("Y-m-d H:i:s")},{header:"Usuario recibe",filter:"string",dataIndex:"userReceive",flex:2,renderer:function(e){return e.name}},{header:"Fecha ingreso",xtype:"datecolumn",dataIndex:"dateEnter",flex:3,filter:{type:"date",fields:{lt:{text:"Antes de"},gt:{text:"Depués de "},eq:{text:"El día"}},dateFormat:"Y-m-d H:i:s"},renderer:Ext.util.Format.dateRenderer("Y-m-d H:i:s")},{header:"Usuario ingresa",filter:"string",dataIndex:"userEnter",flex:2,renderer:function(e){return e.name}},{xtype:"actioncolumn",width:20,action:"reEnterDG",tooltip:"Reubicar en ingresados",stopSelection:false,icon:"css/enterPackage.png",iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"print",tooltip:"Imprimir",icon:"css/printer.png",stopSelection:false,iconCls:"printer"}]});Ext.define("flybox.view.package.Dispatch",{extend:"flybox.view.DeprisaForm",iconCls:"edit",alias:"widget.formDispatchPackage",title:"Despachar grupo de paquetes",width:600,object:"dispatchPackages",fields:[{xtype:"textfield",fieldLabel:"* Grupo de paquetes",readOnly:true,allowBlank:false,anchor:"90%",name:"group",value:0},{xtype:"textfield",fieldLabel:"Bono",anchor:"90%",name:"voucher",value:""},{xtype:"combo",name:"collect",value:true,allowBlank:false,anchor:"90%",fieldLabel:"* Collect",store:[[false,"No"],[true,"Si"]],queryMode:"local",typeAHead:true},{xtype:"textfield",fieldLabel:"* Sello de seguridad",allowBlank:false,anchor:"90%",name:"securityStamp",value:""},{xtype:"textareafield",fieldLabel:"Observaciones en paquetes",anchor:"90%",name:"observations",value:""}],buttons:[{text:"Despachar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.package.Entereds",{extend:"flybox.view.DeprisaGrid",iconCls:"enteredPackage",alias:"widget.listEnteredPackages",title:"Listado paquetes ingresados",store:"EnteredPackage",columns:[{header:"Casillero",filter:"number",dataIndex:"locker",flex:3,renderer:function(e){if(e.idlocker==0){return"No asignado"}else{return e.idlocker}}},{header:"Cliente",dataIndex:"locker",flex:3,renderer:function(e){return e.user.name}},{header:"Tracking",filter:"string",dataIndex:"tracking",flex:3},{header:"Descripción",filter:"string",dataIndex:"description",flex:3},{header:"Peso",filter:"number",dataIndex:"weight",flex:2},{header:"Transportadora",filter:"string",dataIndex:"deliveryCompany",flex:2,renderer:function(e){return e.name}},{header:"Producto",filter:"string",dataIndex:"product",flex:2,renderer:function(e){return e.name}},{header:"Fecha recepción",xtype:"datecolumn",dataIndex:"dateReceive",flex:3,filter:{type:"date",fields:{lt:{text:"Antes de"},gt:{text:"Depués de "},eq:{text:"El día"}},dateFormat:"Y-m-d H:i:s"},renderer:Ext.util.Format.dateRenderer("Y-m-d H:i:s")},{header:"Usuario recibe",filter:"string",dataIndex:"userReceive",flex:2,renderer:function(e){return e.name}},{header:"Fecha ingreso",xtype:"datecolumn",dataIndex:"dateEnter",flex:3,filter:{type:"date",fields:{lt:{text:"Antes de"},gt:{text:"Depués de "},eq:{text:"El día"}},dateFormat:"Y-m-d H:i:s"},renderer:Ext.util.Format.dateRenderer("Y-m-d H:i:s")},{header:"Usuario ingresa",filter:"string",dataIndex:"userEnter",flex:2,renderer:function(e){return e.name}},{header:"Bodega",dataIndex:"ubication",flex:2,renderer:function(e){return e.warehouse.name}},{header:"Ubicación",filter:"string",dataIndex:"ubication",flex:2,renderer:function(e){return e.code}},{xtype:"actioncolumn",width:20,action:"reallowLocker",tooltip:"Reasignar a casillero",stopSelection:false,icon:"css/locker.png",iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"print",tooltip:"Imprimir",icon:"css/printer.png",stopSelection:false,iconCls:"printer"}]});Ext.define("flybox.view.package.FormEditPackageEntered",{extend:"flybox.view.DeprisaForm",alias:"widget.formEditEnteredPackage",title:"Detalle de paquete",width:800,fields:[{xtype:"hiddenfield",name:"weight",value:0},{xtype:"hiddenfield",name:"maxValueDeclared",value:0},{xtype:"combo",fieldLabel:"Tipo de envío",store:"FE_TypePackage",typeAhead:true,forceSelection:true,allowBlank:false,valueField:"idtypepackage",displayField:"name",name:"idtypepackage",anchor:"95%",queryMode:"local"},{xtype:"combo",hidden:true,fieldLabel:"Producto",store:"FE_Product",typeAhead:true,forceSelection:true,allowBlank:false,valueField:"idproduct",displayField:"name",name:"idproduct",anchor:"95%",queryMode:"local"},{xtype:"textareafield",fieldLabel:"Observaciones",name:"observations",anchor:"95%"},{xtype:"grid",plugins:[{ptype:"cellediting",clicksToEdit:1}],store:"FE_Item",columns:[{header:"Descripción",tdCls:"cellItemNotEdit",flex:2,dataIndex:"description"},{header:"Cantidad",tdCls:"cellItemNotEdit",flex:2,dataIndex:"amount"},{header:"Haz clic para editar el valor declarado unitario",flex:4,editor:{xtype:"numberfield",allowBlank:false,hideTrigger:true,decimalPrecision:2,decimalSeparator:".",minValue:0},tdCls:"cellEditDeclaredValue",dataIndex:"unitValue"}]}],buttons:["->",{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.package.FormEnter",{extend:"flybox.view.DeprisaForm",alias:"widget.formEnterPackage",title:"Ingresar paquete - Normal",object:"enterPackage",maxHeight:700,width:800,fields:[{xtype:"hiddenfield",name:"prealerted",value:false},{xtype:"hiddenfield",name:"idpackage",value:0},{xtype:"hiddenfield",name:"idcityorigin",value:0},{xtype:"hiddenfield",name:"iddeliverycompany",value:0},{xtype:"hiddenfield",name:"idproduct",value:0},{xtype:"combo",name:"idtypeubication",labelWidth:150,anchor:"95%",store:"TypeUbication",forceSelection:true,cls:"importantField",allowBlank:false,fieldLabel:"* Clasificación",valueField:"idtypeubication",displayField:"name",queryMode:"local"},{xtype:"numberfield",anchor:"95%",labelWidth:150,hideTrigger:true,name:"idlocker",minValue:0,fieldLabel:"* Casillero",allowBlank:false,value:0},{xtype:"textfield",labelWidth:150,anchor:"95%",name:"authorizeds",fieldLabel:"* Autorizados",value:"",readOnly:true},{xtype:"combo",labelWidth:150,name:"autodispatch",value:"",allowBlank:false,anchor:"95%",fieldLabel:"* Despacho automático",cls:"importantField",store:[[false,"No"],[true,"Si"]],queryMode:"local",typeAHead:true},{xtype:"combo",labelWidth:150,name:"consolidate",value:"",allowBlank:false,anchor:"95%",fieldLabel:"* Consolidable",store:[[false,"No"],[true,"Si"]],queryMode:"local",typeAHead:true},{xtype:"combo",labelWidth:150,name:"idpayment",value:"",allowBlank:false,anchor:"95%",fieldLabel:"* Tipo de pago",hidden:true,cls:"importantField",store:"Payment",valueField:"idpayment",displayField:"name",readOnly:true,queryMode:"local",typeAHead:true},{xtype:"combo",labelWidth:150,name:"idtypepackage",anchor:"95%",store:"TypePackage",hidden:true,forceSelection:true,allowBlank:false,fieldLabel:"* Tipo de envío",valueField:"idtypepackage",displayField:"name",queryMode:"local"},{xtype:"combo",labelWidth:150,name:"provide",anchor:"95%",store:"Provide",hidden:true,forceSelection:true,allowBlank:false,fieldLabel:"* Proveedor",valueField:"idprovide",displayField:"name",queryMode:"local"},{xtype:"textfield",anchor:"95%",labelWidth:150,name:"tracking",allowBlank:false,fieldLabel:"* Número de guía",value:"",readOnly:true},{xtype:"textareafield",anchor:"95%",labelWidth:150,name:"observations",fieldLabel:"Observaciones",value:""},{xtype:"numberfield",anchor:"95%",labelWidth:150,name:"weight",allowBlank:false,decimalPrecision:2,decimalSeparator:".",minValue:.01,hideTrigger:true,fieldLabel:"* Peso"},{xtype:"numberfield",anchor:"95%",labelWidth:150,name:"lenght",decimalPrecision:2,decimalSeparator:".",minValue:0,hideTrigger:true,fieldLabel:"* Largo"},{xtype:"numberfield",anchor:"95%",labelWidth:150,name:"height",decimalPrecision:2,decimalSeparator:".",minValue:0,hideTrigger:true,fieldLabel:"* Alto"},{xtype:"numberfield",anchor:"95%",name:"width",labelWidth:150,allowBlank:false,decimalPrecision:2,decimalSeparator:".",minValue:0,hideTrigger:true,fieldLabel:"* Ancho"},{xtype:"numberfield",anchor:"95%",name:"weightVolumen",labelWidth:150,decimalPrecision:5,decimalSeparator:".",minValue:0,hideTrigger:true,readOnly:true,fieldLabel:"* Peso volumétrico"},{xtype:"grid",store:"Item",width:750,reserveScrollbar:true,columns:[{header:"Descripción",dataIndex:"description",flex:3},{header:"Cantidad",dataIndex:"amount",flex:1},{header:"Valor unitario",dataIndex:"unitValue",flex:1},{xtype:"actioncolumn",width:25,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:false,iconCls:"edit"},{xtype:"actioncolumn",width:25,action:"remove",tooltip:"Eliminar",stopSelection:false,icon:"css/remove.png",iconCls:"remove"}],bbar:{xtype:"pagingtoolbar",pageSize:25,displayInfo:true,store:"Item",items:["-",{xtype:"button",text:"Insertar",iconCls:"insert",tooltip:"Insertar",action:"insert"}]}}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.package.FormEditPackage",{extend:"flybox.view.DeprisaForm",alias:"widget.formEditPackage",title:"Editar paquete",object:"admonPackages",maxHeight:800,width:800,fields:[{xtype:"hiddenfield",name:"idcityorigin",value:0},{xtype:"hiddenfield",name:"idpackage",value:0},{xtype:"numberfield",anchor:"95%",labelWidth:150,hideTrigger:true,name:"idlocker",minValue:0,fieldLabel:"* Casillero",allowBlank:false,value:0},{xtype:"textfield",labelWidth:150,anchor:"95%",name:"authorizeds",fieldLabel:"* Autorizados",value:"",readOnly:true},{xtype:"combo",labelWidth:150,name:"idtypepackage",anchor:"95%",store:"TypePackage",forceSelection:true,allowBlank:false,fieldLabel:"* Tipo de envío",valueField:"idtypepackage",displayField:"name",queryMode:"local"},{xtype:"textfield",anchor:"95%",labelWidth:150,name:"tracking",allowBlank:false,fieldLabel:"* Número de guía",value:"",readOnly:true},{xtype:"textareafield",anchor:"95%",labelWidth:150,name:"observations",fieldLabel:"Observaciones",value:""},{xtype:"numberfield",anchor:"95%",labelWidth:150,name:"weight",allowBlank:false,decimalPrecision:2,decimalSeparator:".",minValue:.01,hideTrigger:true,fieldLabel:"* Peso"},{xtype:"numberfield",anchor:"95%",labelWidth:150,name:"lenght",decimalPrecision:2,decimalSeparator:".",minValue:0,hideTrigger:true,fieldLabel:"* Largo"},{xtype:"numberfield",anchor:"95%",labelWidth:150,name:"height",decimalPrecision:2,decimalSeparator:".",minValue:0,hideTrigger:true,fieldLabel:"* Alto"},{xtype:"numberfield",anchor:"95%",name:"width",labelWidth:150,allowBlank:false,decimalPrecision:2,decimalSeparator:".",minValue:0,hideTrigger:true,fieldLabel:"* Ancho"},{xtype:"numberfield",anchor:"95%",name:"weightVolumen",labelWidth:150,decimalPrecision:5,decimalSeparator:".",minValue:0,hideTrigger:true,readOnly:true,fieldLabel:"* Peso volumétrico"},{xtype:"grid",store:"Item",width:750,reserveScrollbar:true,columns:[{header:"Descripción",dataIndex:"description",flex:3},{header:"Cantidad",dataIndex:"amount",flex:1},{header:"Valor unitario",dataIndex:"unitValue",flex:1},{xtype:"actioncolumn",width:25,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:false,iconCls:"edit"},{xtype:"actioncolumn",width:25,action:"remove",tooltip:"Eliminar",stopSelection:false,icon:"css/remove.png",iconCls:"remove"}],bbar:{xtype:"pagingtoolbar",pageSize:25,displayInfo:true,store:"Item",items:["-",{xtype:"button",text:"Insertar",iconCls:"insert",tooltip:"Insertar",action:"insert"}]}}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.package.FormChangeStatePackage",{extend:"flybox.view.DeprisaForm",alias:"widget.formChangeStatePackage",title:"Cambiar estado paquete",object:"changeStatePackage",maxHeight:800,width:800,fields:[{xtype:"hiddenfield",name:"idpackage",value:0},{xtype:"combo",labelWidth:150,name:"idstatepackage",anchor:"95%",store:"StatePackage",forceSelection:true,allowBlank:false,fieldLabel:"* Tipo de envío",valueField:"idstatepackage",displayField:"name",queryMode:"local"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.package.FormItem",{extend:"flybox.view.DeprisaForm",alias:"widget.formItem",title:"Ingresar ítem",object:"items",fields:[{xtype:"hiddenfield",name:"iditem",value:0},{xtype:"hiddenfield",name:"idpackage",value:0},{xtype:"textfield",anchor:"95%",name:"description",fieldLabel:"* Descripción",allowBlank:false,value:""},{xtype:"numberfield",anchor:"95%",hideTrigger:true,allowBlank:false,name:"amount",maxValue:6,minValue:1,fieldLabel:"* Cantidad",value:""},{xtype:"numberfield",anchor:"95%",name:"unitValue",allowBlank:false,decimalPrecision:2,decimalSeparator:".",hideTrigger:true,fieldLabel:"* Valor unitario",readOnly:true}],buttons:[{text:"Guardar y crear nuevo",action:"saveAndNew"},{text:"Guardar y terminar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.package.FormReportAllPackage",{extend:"Ext.window.Window",iconCls:"edit",alias:"widget.formReportAllPackage",title:"Generar reporte de todos los paquetes",width:600,maximizable:true,modal:true,layout:"fit",autoShow:true,autoScroll:true,items:[{xtype:"form",autoScroll:true,url:"stores/list_objects.aspx",method:"get",frame:true,defaults:{labelAlign:"right"},items:[{xtype:"hiddenfield",name:"object",value:"rptAllPackage"},{columnWidth:1,xtype:"panel",html:"* Campos obligatorios",border:0,padding:10},{xtype:"datefield",name:"date_begin",itemId:"startdt",vtype:"daterange",endDateField:"enddt",altFormats:"Y-m-d",format:"Y-m-d",submitFormat:"Y-m-d",allowBlank:false,fieldLabel:"Fecha inicio"},{xtype:"datefield",name:"date_end",itemId:"enddt",vtype:"daterange",startDateField:"startdt",altFormats:"Y-m-d",format:"Y-m-d",submitFormat:"Y-m-d",allowBlank:false,fieldLabel:"Fecha fin"}],buttons:[{text:"Generar",action:"save"},{text:"Cancelar",action:"cancel"}]}]});Ext.define("flybox.view.package.FormReportAuthorizeds",{extend:"Ext.window.Window",iconCls:"edit",width:600,maximizable:true,alias:"widget.formReportAuthorized",title:"Generar reporte de paquetes autorizados",modal:true,layout:"fit",autoShow:true,items:[{xtype:"form",method:"get",autoScroll:true,url:"stores/list_objects.aspx",defaults:{labelAlign:"right"},items:[{layout:"column",border:false,defaults:{layout:"anchor",style:"margin: 3px 10px; padding: 3px 10px;",anchor:"100%",columnWidth:.5,labelWidth:100},items:[{xtype:"hiddenfield",name:"object",value:"rptAuthorized"},{columnWidth:1,xtype:"panel",html:"* Campos obligatorios",border:0,padding:10},{xtype:"datefield",name:"date_begin",itemId:"startdt",vtype:"daterange",endDateField:"enddt",altFormats:"Y-m-d",format:"Y-m-d",submitFormat:"Y-m-d",allowBlank:false,fieldLabel:"Fecha inicio"},{xtype:"timefield",name:"time_begin",format:"H:i",allowBlank:false,fieldLabel:"Hora inicio"},{xtype:"datefield",name:"date_end",itemId:"enddt",vtype:"daterange",startDateField:"startdt",altFormats:"Y-m-d",format:"Y-m-d",submitFormat:"Y-m-d",allowBlank:false,fieldLabel:"Fecha fin"},{xtype:"timefield",name:"time_end",format:"H:i",allowBlank:false,fieldLabel:"Hora fin"}]}],buttons:[{text:"Generar",action:"save"},{text:"Cancelar",action:"cancel"}]}]});Ext.define("flybox.view.package.FormReportProductivity",{extend:"Ext.window.Window",iconCls:"edit",alias:"widget.formReportProductivity",title:"Generar reporte de productividad",width:600,maximizable:true,modal:true,layout:"fit",autoShow:true,autoScroll:true,items:[{xtype:"form",autoScroll:true,method:"get",url:"stores/list_objects.aspx",frame:true,defaults:{labelAlign:"right"},items:[{xtype:"hiddenfield",name:"object",value:"rptProductivity"},{xtype:"panel",html:"* Campos obligatorios",border:0,padding:10},{xtype:"datefield",name:"date_begin",itemId:"startdt",vtype:"daterange",endDateField:"enddt",altFormats:"Y-m-d",format:"Y-m-d",submitFormat:"Y-m-d",allowBlank:false,fieldLabel:"Fecha inicio"},{xtype:"datefield",name:"date_end",itemId:"enddt",vtype:"daterange",startDateField:"startdt",altFormats:"Y-m-d",format:"Y-m-d",submitFormat:"Y-m-d",allowBlank:false,fieldLabel:"Fecha fin"}],buttons:[{text:"Generar",action:"save"},{text:"Cancelar",action:"cancel"}]}]});Ext.define("flybox.view.package.FormReportReceivedPackages",{extend:"Ext.window.Window",iconCls:"edit",alias:"widget.formReportReceivedPackages",title:"Generar reporte de paquetes recibidos por transportadora",width:600,maximizable:true,modal:true,layout:"fit",autoShow:true,autoScroll:true,items:[{xtype:"form",autoScroll:true,url:"stores/list_objects.aspx",method:"get",frame:true,defaults:{labelAlign:"right"},items:[{xtype:"hiddenfield",name:"object",value:"rptReceivedPackages"},{columnWidth:1,xtype:"panel",html:"* Campos obligatorios",border:0,padding:10},{xtype:"datefield",name:"date_begin",itemId:"startdt",vtype:"daterange",endDateField:"enddt",altFormats:"Y-m-d",format:"Y-m-d",submitFormat:"Y-m-d",allowBlank:false,fieldLabel:"Fecha inicio"},{xtype:"datefield",name:"date_end",itemId:"enddt",vtype:"daterange",startDateField:"startdt",altFormats:"Y-m-d",format:"Y-m-d",submitFormat:"Y-m-d",allowBlank:false,fieldLabel:"Fecha fin"}],buttons:[{text:"Generar",action:"save"},{text:"Cancelar",action:"cancel"}]}]});Ext.define("flybox.view.package.FormSecurityStamp",{extend:"flybox.view.DeprisaForm",alias:"widget.formSecurityStamp",title:"Asignar sello de seguridad al despacho automático",object:"dispatchAutodispatch",fields:[{xtype:"hiddenfield",name:"weight",value:0},{xtype:"hiddenfield",name:"lenght",value:0},{xtype:"hiddenfield",name:"height",value:0},{xtype:"hiddenfield",name:"width",value:0},{xtype:"hiddenfield",name:"idpackage",value:0},{xtype:"textfield",name:"securityStamp",labelWidth:150,anchor:"95%",allowBlank:false,fieldLabel:"* Sello de seguridad"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.package.FormUbication",{extend:"flybox.view.DeprisaForm",alias:"widget.formUbicationPackage",title:"Asignar paquete a ubicación en bodega",object:"enterPackage",fields:[{xtype:"hiddenfield",name:"idtypeubication",value:0},{xtype:"hiddenfield",name:"idpackage",value:0},{xtype:"hiddenfield",name:"idcityorigin",value:0},{xtype:"hiddenfield",name:"iddeliverycompany",value:0},{xtype:"hiddenfield",name:"idproduct",value:0},{xtype:"hiddenfield",name:"idlocker",value:0},{xtype:"hiddenfield",name:"idtypepackage",value:0},{xtype:"hiddenfield",name:"provide",value:""},{xtype:"hiddenfield",name:"tracking",value:""},{xtype:"hiddenfield",name:"observations",value:""},{xtype:"hiddenfield",name:"weight",value:0},{xtype:"hiddenfield",name:"lenght",value:0},{xtype:"hiddenfield",name:"height",value:0},{xtype:"hiddenfield",name:"width",value:0},{xtype:"hiddenfield",name:"consolidate",value:false},{xtype:"combo",name:"idwarehouse",anchor:"95%",store:"WareHouse",forceSelection:true,allowBlank:false,fieldLabel:"* Bodega",valueField:"idwarehouse",displayField:"name",queryMode:"local"},{xtype:"combo",name:"idubication",anchor:"95%",store:"Ubication",forceSelection:true,allowBlank:false,fieldLabel:"* Ubicación",valueField:"idubication",displayField:"code",queryMode:"local"}],buttons:[{text:"Guardar",action:"save"}]});Ext.define("flybox.view.package.FormUbicationEdit",{extend:"flybox.view.DeprisaForm",alias:"widget.formUbicationEditPackage",title:"Asignar paquete a ubicación en bodega",object:"admonPackages",fields:[{xtype:"hiddenfield",name:"idtypeubication",value:0},{xtype:"hiddenfield",name:"idpackage",value:0},{xtype:"hiddenfield",name:"idcityorigin",value:0},{xtype:"hiddenfield",name:"iddeliverycompany",value:0},{xtype:"hiddenfield",name:"idproduct",value:0},{xtype:"hiddenfield",name:"idlocker",value:0},{xtype:"hiddenfield",name:"idtypepackage",value:0},{xtype:"hiddenfield",name:"provide",value:""},{xtype:"hiddenfield",name:"tracking",value:""},{xtype:"hiddenfield",name:"observations",value:""},{xtype:"hiddenfield",name:"weight",value:0},{xtype:"hiddenfield",name:"lenght",value:0},{xtype:"hiddenfield",name:"height",value:0},{xtype:"hiddenfield",name:"width",value:0},{xtype:"hiddenfield",name:"consolidate",value:false},{xtype:"combo",name:"idwarehouse",anchor:"95%",store:"WareHouse",forceSelection:true,allowBlank:false,fieldLabel:"* Bodega",valueField:"idwarehouse",displayField:"name",queryMode:"local"},{xtype:"combo",name:"idubication",anchor:"95%",store:"Ubication",forceSelection:true,allowBlank:false,fieldLabel:"* Ubicación",valueField:"idubication",displayField:"code",queryMode:"local"}],buttons:[{text:"Guardar",action:"save"}]});Ext.define("flybox.view.package.GridDisconsolidate",{extend:"Ext.window.Window",iconCls:"edit",alias:"widget.listDisconsolidatePackage",title:"Desconsolidar grupo de paquetes",width:600,maximizable:true,modal:true,layout:"fit",autoShow:true,autoScroll:true,items:[{xtype:"gridpanel",selType:"checkboxmodel",selModel:{mode:"SIMPLE"},title:"Artículo",store:"GroupPackage",columns:[{header:"Descripción",dataIndex:"description",flex:1},{header:"Guía transportador",dataIndex:"tracking",flex:1},{header:"Peso",dataIndex:"weight",flex:1}]}],buttons:[{text:"Desconsolidar"}]});Ext.define("flybox.view.package.Missings",{extend:"flybox.view.DeprisaGrid",iconCls:"missing",alias:"widget.listMissingPackages",title:"Listado paquetes perdidos",store:"Missing",columns:[{header:"ID",filter:"number",dataIndex:"idpackage"},{header:"Tracking",filter:"string",dataIndex:"tracking",flex:3},{header:"Casillero",filter:"number",dataIndex:"locker",flex:3,renderer:function(e){if(e.idlocker==0){return"No asignado"}else{return e.idlocker}}},{header:"Transportadora",filter:"string",dataIndex:"deliveryCompany",flex:2,renderer:function(e){return e.name}},{header:"Producto",filter:"string",dataIndex:"product",flex:2,renderer:function(e){return e.name}},{header:"Fecha recepción",xtype:"datecolumn",dataIndex:"dateReceive",flex:3,filter:{type:"date",fields:{lt:{text:"Antes de"},gt:{text:"Depués de "},eq:{text:"El día"}},dateFormat:"Y-m-d H:i:s"},renderer:Ext.util.Format.dateRenderer("Y-m-d H:i:s")},{header:"Usuario recibe",filter:"string",dataIndex:"userReceive",flex:2,renderer:function(e){return e.name}},{header:"Fecha ingreso",xtype:"datecolumn",dataIndex:"dateEnter",flex:3,filter:{type:"date",fields:{lt:{text:"Antes de"},gt:{text:"Depués de "},eq:{text:"El día"}},dateFormat:"Y-m-d H:i:s"},renderer:Ext.util.Format.dateRenderer("Y-m-d H:i:s")},{header:"Usuario ingresa",filter:"string",dataIndex:"userEnter",flex:2,renderer:function(e){return e.name}},{header:"Bodega",dataIndex:"ubication",flex:2,renderer:function(e){return e.warehouse.name}},{header:"Ubicación",filter:"string",dataIndex:"ubication",flex:2,renderer:function(e){return e.code}}]});Ext.define("flybox.view.package.Pendings",{extend:"flybox.view.DeprisaGrid",iconCls:"pending",alias:"widget.listPendingPackages",title:"Listado paquetes pendientes",store:"PendingPackage",columns:[{header:"ID",filter:"number",dataIndex:"idpackage"},{header:"Tracking",filter:"string",dataIndex:"tracking",flex:3},{header:"Transportadora",filter:"string",dataIndex:"deliveryCompany",flex:2,renderer:function(e){return e.name}},{header:"Fecha recepción",xtype:"datecolumn",dataIndex:"dateReceive",flex:3,filter:{type:"date",fields:{lt:{text:"Antes de"},gt:{text:"Depués de "},eq:{text:"El día"}},dateFormat:"Y-m-d H:i:s"},renderer:Ext.util.Format.dateRenderer("Y-m-d H:i:s")},{header:"Usuario recibe",filter:"string",dataIndex:"userReceive",flex:2,renderer:function(e){return e.name}},{header:"Fecha ingreso",xtype:"datecolumn",dataIndex:"dateEnter",flex:3,filter:{type:"date",fields:{lt:{text:"Antes de"},gt:{text:"Depués de "},eq:{text:"El día"}},dateFormat:"Y-m-d H:i:s"},renderer:Ext.util.Format.dateRenderer("Y-m-d H:i:s")},{header:"Usuario ingresa",filter:"string",dataIndex:"userEnter",flex:2,renderer:function(e){return e.name}},{header:"Peso",dataIndex:"observations",flex:3},{header:"Peso",filter:"number",dataIndex:"weight",flex:2},{xtype:"actioncolumn",width:20,action:"allow",tooltip:"Asignar a casillero",stopSelection:false,icon:"css/locker.png",iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"returnPackage",tooltip:"Devolver",icon:"css/return.png",stopSelection:false,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"print",tooltip:"Imprimir",icon:"css/printer.png",stopSelection:false,iconCls:"printer"}],buttonsAds:["-",{xtype:"button",icon:"css/excel.png",text:"Exportar",tooltip:"Exportar",action:"export"}]});Ext.define("flybox.view.page.Grid",{extend:"flybox.view.DeprisaGrid",iconCls:"page",alias:"widget.listPages",title:"Listado de páginas",store:"Page",columns:[{header:"ID",filter:"number",dataIndex:"idpage"},{header:"Título",filter:"string",dataIndex:"title",flex:3},{header:"Url",filter:"string",dataIndex:"url",flex:3},{header:"Plantilla",filter:"number",dataIndex:"idtemplate",flex:2,renderer:function(e){return e==1?"Normal":"Ancha"}},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",stopSelection:false,icon:"css/edit.png",iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",stopSelection:false,icon:"css/remove.png",iconCls:"remove"}]});Ext.define("flybox.view.page.Form",{extend:"flybox.view.DeprisaForm",width:800,height:600,alias:"widget.formPage",title:"Editar página",object:"pages",fields:[{xtype:"hiddenfield",name:"idpage",value:0},{xtype:"textfield",name:"title",value:"",allowBlank:false,anchor:"100%",fieldLabel:"* Título"},{xtype:"textfield",name:"url",value:"",allowBlank:false,anchor:"100%",fieldLabel:"* Url"},{xtype:"combo",name:"idtemplate",value:"",allowBlank:false,anchor:"100%",fieldLabel:"* Plantilla",store:[[1,"Normal"],[2,"Ancha"]],queryMode:"local",typeAHead:true},{xtype:"textfield",name:"keywords",value:"",allowBlank:false,anchor:"100%",fieldLabel:"* Keywords"},{xtype:"textfield",name:"description",value:"",allowBlank:false,anchor:"100%",fieldLabel:"* Descripción"},{xtype:"tinymce",fieldLabel:"* Contenido",name:"html",id:"tinymce_g",anchor:"100%",height:200}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.payment.Grid",{extend:"flybox.view.DeprisaGrid",iconCls:"payment",alias:"widget.listPayments",title:"Listado métodos de pago",store:"Payment",columns:[{header:"ID",filter:"number",dataIndex:"idpayment"},{header:"Nombre",filter:"string",dataIndex:"name",flex:2},{header:"Código",filter:"string",dataIndex:"code",flex:2},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:false,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",stopSelection:false,icon:"css/remove.png",iconCls:"remove"}]});Ext.define("flybox.view.payment.Form",{extend:"flybox.view.DeprisaForm",alias:"widget.formPayment",title:"Editar método de pago",object:"payments",fields:[{xtype:"hiddenfield",name:"idpayment",value:0},{xtype:"textfield",name:"name",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Nombre"},{xtype:"textfield",name:"code",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Código"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.prealert.Grid",{extend:"flybox.view.DeprisaGrid",iconCls:"prealert",alias:"widget.listPrealerts",title:"Listado prealertas",store:"Prealert",columns:[{header:"ID",filter:"number",dataIndex:"idprealert"},{header:"Casillero",filter:"number",dataIndex:"locker",renderer:function(e){return e.idlocker},flex:2},{header:"Descripción",filter:"string",dataIndex:"description",flex:3},{header:"Valor declarado",filter:"number",dataIndex:"declaredValue",flex:2},{header:"Proveedor",dataIndex:"provide",filter:"string",renderer:function(e){return e.name},flex:2},{header:"Guía",filter:"string",dataIndex:"tracking",flex:3},{header:"Tipo de envío",filter:"string",dataIndex:"typePackage",renderer:function(e){return e.name},flex:2},{header:"Fecha prealerta",filter:{type:"date",fields:{lt:{text:"Antes de"},gt:{text:"Depués de "},eq:{text:"El día"}},dateFormat:"Y-m-d H:i:s"},dataIndex:"date",flex:3},{header:"Producto",filter:"string",dataIndex:"product",renderer:function(e){return e.name},flex:2},{header:"Autodespacho",filter:"boolean",dataIndex:"autodispatch",renderer:function(e){return e?"Si":"No"},flex:2},{header:"Pago",filter:"string",dataIndex:"payment",renderer:function(e){return e.name},flex:2}]});Ext.define("flybox.view.printer.Grid",{extend:"flybox.view.DeprisaGrid",iconCls:"typeID",alias:"widget.listPrinters",title:"Listado impresoras",store:"Printer",columns:[{header:"ID",filter:"number",dataIndex:"idprinter"},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:false,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",stopSelection:false,icon:"css/remove.png",iconCls:"remove"}]});Ext.define("flybox.view.printer.Form",{extend:"flybox.view.DeprisaForm",alias:"widget.formPrinter",title:"Editar impresora",object:"printers",fields:[{xtype:"hiddenfield",name:"idprinter",value:0},{xtype:"textfield",name:"name",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Nombre"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.product.Grid",{extend:"flybox.view.DeprisaGrid",iconCls:"product",alias:"widget.listProducts",title:"Listado productos",store:"Product",columns:[{header:"ID",filter:"number",dataIndex:"idproduct"},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{header:"Código",filter:"number",dataIndex:"code",flex:2},{header:"Máximo consolidable",filter:"number",dataIndex:"maxConsolidate",flex:2},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:false,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",stopSelection:false,icon:"css/remove.png",iconCls:"remove"}]});Ext.define("flybox.view.product.Form",{extend:"flybox.view.DeprisaForm",alias:"widget.formProduct",title:"Editar producto",object:"products",fields:[{xtype:"hiddenfield",name:"idproduct",value:0},{xtype:"textfield",name:"name",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Nombre"},{xtype:"numberfield",hideTrigger:true,name:"code",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Código"},{xtype:"numberfield",name:"maxConsolidate",value:"",allowBlank:false,anchor:"90%",hideTrigger:true,fieldLabel:"* Máximo consolidable"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.provide.Grid",{extend:"flybox.view.DeprisaGrid",iconCls:"provide",alias:"widget.listProvides",title:"Listado tiendas",store:"Provide",columns:[{header:"ID",filter:"number",dataIndex:"idprovide"},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:false,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",stopSelection:false,icon:"css/remove.png",iconCls:"remove"}]});Ext.define("flybox.view.provide.Form",{extend:"flybox.view.DeprisaForm",alias:"widget.formProvide",title:"Editar tienda",object:"provides",fields:[{xtype:"hiddenfield",name:"idprovide",value:0},{xtype:"textfield",name:"name",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Nombre"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.receive_package.SelectDeliveryCompany",{extend:"flybox.view.DeprisaForm",alias:"widget.formSelectDeliveryCompany",title:"Seleccionar empresa transportadora",fields:[{xtype:"combo",name:"iddeliverycompany",forceSelection:true,anchor:"90%",allowBlank:false,store:"DeliveryCompanyReceivePackage",fieldLabel:"* Empresa transportadora",valueField:"iddeliverycompany",labelWidth:100,displayField:"name",queryMode:"local"}],buttons:[{text:"Seleccionar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.receive_package.Grid",{extend:"flybox.view.DeprisaGrid",iconCls:"receivedPackage",alias:"widget.listReceivedPackages",title:"Listado paquetes recibidos",store:"ReceivePackage",columns:[{header:"ID",filter:"number",dataIndex:"idpackage"},{header:"Tracking",filter:"string",dataIndex:"tracking",flex:3},{header:"Casillero",filter:"number",dataIndex:"locker",flex:3,renderer:function(e){if(e.idlocker==0){return"No asignado"}else{return e.idlocker}}},{header:"Transportadora",filter:"string",dataIndex:"deliveryCompany",flex:2,renderer:function(e){return e.name}},{header:"Producto",filter:"string",dataIndex:"product",flex:2,renderer:function(e){return e.name}},{header:"Fecha recepción",xtype:"datecolumn",dataIndex:"dateReceive",flex:3,filter:{type:"date",fields:{lt:{text:"Antes de"},gt:{text:"Depués de "},eq:{text:"El día"}},dateFormat:"Y-m-d H:i:s"},renderer:Ext.util.Format.dateRenderer("Y-m-d H:i:s")},{header:"Usuario recibe",filter:"string",dataIndex:"userReceive",flex:2,renderer:function(e){return e.name}},{xtype:"actioncolumn",width:20,action:"returnPackage",tooltip:"Devolver",icon:"css/return.png",stopSelection:false,iconCls:"edit"}],buttonsAds:["-",{xtype:"button",icon:"css/excel.png",text:"Exportar",tooltip:"Exportar",action:"export"}]});Ext.define("flybox.view.package.Grid",{extend:"flybox.view.DeprisaGrid",iconCls:"admonPackage",alias:"widget.listAdmonPackages",title:"Listado de todos los paquetes",store:"AdmonPackage",columns:[{header:"ID",filter:"number",dataIndex:"idpackage"},{header:"Tracking",filter:"string",dataIndex:"tracking",flex:3},{header:"Casillero",filter:"number",dataIndex:"locker",flex:1,renderer:function(e){if(e.idlocker==0){return"No asignado"}else{return e.idlocker}}},{header:"Estado",filter:"string",dataIndex:"statePackage",flex:2,renderer:function(e){return e.name}},{header:"Descripción",filter:"string",dataIndex:"description",flex:4},{header:"Peso",filter:"number",dataIndex:"weight",flex:1},{header:"Observaciones",filter:"string",dataIndex:"observations",flex:4},{xtype:"actioncolumn",width:20,action:"changeState",tooltip:"Cambiar estado",icon:"css/typeLocker.png",stopSelection:false,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"returnPackage",tooltip:"Devolver",icon:"css/return.png",stopSelection:false,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:false,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",icon:"css/remove.png",stopSelection:false,iconCls:"remove"}]});Ext.define("flybox.view.receive_package.Form",{extend:"flybox.view.DeprisaForm",alias:"widget.formReceivePackage",title:"Recepcionar paquetes",object:"receivePackages",fields:[{xtype:"hiddenfield",name:"iddeliverycompany",value:0},{xtype:"hiddenfield",name:"trackings",value:""},{xtype:"displayfield",name:"delivery_company",labelWidth:200,anchor:"95%",fieldLabel:"* Empresa transportadora",value:""},{xtype:"textfield",fieldLabel:"* Tracking",labelWidth:200,name:"tracking",anchor:"95%",enableKeyEvents:true,value:""},{xtype:"grid",height:300,anchor:"100%",store:"AuxReceivePackage",layout:"fit",columns:[{xtype:"rownumberer"},{header:"Tracking",flex:1,dataIndex:"tracking"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",icon:"css/remove.png",stopSelection:false,iconCls:"remove"}]}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.rejection_reason.Grid",{extend:"flybox.view.DeprisaGrid",iconCls:"rejectionReason",alias:"widget.listRejectionReasons",title:"Listado motivos de rechazo",store:"RejectionReason",columns:[{header:"ID",filter:"number",dataIndex:"idrejectionreason"},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:false,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",stopSelection:false,icon:"css/remove.png",iconCls:"remove"}]});Ext.define("flybox.view.rejection_reason.Form",{extend:"flybox.view.DeprisaForm",alias:"widget.formRejectionReason",title:"Editar motivo de rechazo",object:"rejectionReasons",fields:[{xtype:"hiddenfield",name:"idrejectionreason",value:0},{xtype:"textfield",name:"name",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Nombre"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.request_pending.Grid",{extend:"flybox.view.DeprisaGrid",iconCls:"requestPending",alias:"widget.listRequestsPending",title:"Listado solicitudes de ubicación",store:"RequestPending",columns:[{header:"ID",filter:"number",dataIndex:"idrequestpending"},{header:"Casillero",filter:"number",dataIndex:"locker",renderer:function(e){return e.idlocker},flex:1},{header:"Tracking",filter:"string",dataIndex:"tracking",flex:1},{header:"Descripción",filter:"string",dataIndex:"description",flex:3},{header:"Fecha",filter:{type:"date",fields:{lt:{text:"Antes de"},gt:{text:"Depués de "},eq:{text:"El día"}},dateFormat:"Y-m-d H:i:s"},dataIndex:"date",flex:2,renderer:Ext.util.Format.dateRenderer("Y-m-d H:i:s")}],buttonsAds:["-",{xtype:"button",icon:"css/excel.png",text:"Exportar",tooltip:"Exportar",action:"export"}]});Ext.define("flybox.view.request_pending.Form",{extend:"flybox.view.DeprisaForm",alias:"widget.formRequestPending",title:"Editar solicitud de ubicación",object:"requestsPending",fields:[{xtype:"hiddenfield",name:"idrequestpending",value:0},{xtype:"textfield",name:"locker",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Casillero"},{xtype:"textfield",name:"tracking",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Tracking"},{xtype:"textareafield",name:"description",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Descripción"}],buttons:[{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.resource.Grid",{extend:"flybox.view.DeprisaGrid",iconCls:"resource",alias:"widget.listResources",title:"Listado recursos",store:"Resource",columns:[{header:"ID",filter:"number",dataIndex:"idresource"},{header:"Ruta",filter:"string",dataIndex:"path",flex:3},{header:"Tipo de recurso",filter:"string",dataIndex:"typeResource",renderer:function(e){return e.name},flex:3},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",icon:"css/remove.png",stopSelection:false,iconCls:"remove"}]});Ext.define("flybox.view.resource.Form",{extend:"flybox.view.DeprisaForm",alias:"widget.formResource",title:"Editar recurso",object:"resources",fields:[{xtype:"hiddenfield",name:"idresource",value:0},{xtype:"filefield",name:"path",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Archivo"},{xtype:"combo",anchor:"90%",name:"idtyperesource",forceSelection:true,allowBlank:false,store:"TypeResource",fieldLabel:"* Tipo de recurso",valueField:"idtyperesource",displayField:"name",queryMode:"local"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.sale_point.Grid",{extend:"Ext.grid.Panel",iconCls:"typeID",features:[{ftype:"filters",encode:true,local:false}],alias:"widget.listTypesID",title:"Listado tipos de identificación",layout:"fit",store:"TypeID",closable:true,columns:[{header:"ID",filterable:true,dataIndex:"idtypeid"},{header:"Nombre",filterable:true,dataIndex:"name",flex:3},{xtype:"actioncolumn",width:20,action:"edit",items:[{tooltip:"Editar",icon:"css/edit.png",iconCls:"edit"}]},{xtype:"actioncolumn",width:20,action:"remove",items:[{tooltip:"Eliminar",icon:"css/remove.png",iconCls:"remove"}]}],bbar:{xtype:"pagingtoolbar",store:"TypeID",pageSize:25,displayInfo:true,items:["-",{xtype:"button",text:"Insertar",iconCls:"insert",tooltip:"Insertar",action:"insert"},"-",{xtype:"button",icon:"css/clean.png",text:"Limpiar filtros",tooltip:"Limpiar filtros",action:"clean"}]}});Ext.define("flybox.view.sale_point.Form",{extend:"Ext.window.Window",iconCls:"edit",alias:"widget.formTypeID",title:"Editar tipo de identificación",maximizable:true,modal:true,layout:"fit",autoShow:true,items:[{xtype:"form",url:"update/save_object.aspx",defaults:{labelAlign:"right"},frame:true,items:[{xtype:"hiddenfield",name:"idtypeid",value:0},{xtype:"hiddenfield",name:"id",value:0},{xtype:"hiddenfield",name:"object",value:"type_id"},{xtype:"textfield",name:"name",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Nombre"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}],bbar:["* Campos obligatorios"]}]});Ext.define("flybox.view.secret_question.Grid",{extend:"flybox.view.DeprisaGrid",iconCls:"secretQuestion",alias:"widget.listSecretQuestions",title:"Listado de preguntas secretas",store:"SecretQuestion",columns:[{header:"ID",filter:"number",dataIndex:"idsecretquestion"},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:false,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",stopSelection:false,icon:"css/remove.png",iconCls:"remove"}]});Ext.define("flybox.view.secret_question.Form",{extend:"flybox.view.DeprisaForm",alias:"widget.formSecretQuestion",title:"Editar pregunta secreta",object:"secretQuestions",fields:[{xtype:"hiddenfield",name:"idsecretquestion",value:0},{xtype:"textfield",name:"name",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Nombre"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.state_locker.Grid",{extend:"flybox.view.DeprisaGrid",iconCls:"stateLocker",alias:"widget.listStatesLocker",title:"Listado estados de casillero",store:"StateLocker",columns:[{header:"ID",filter:"number",dataIndex:"idstatelocker"},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:false,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",stopSelection:false,icon:"css/remove.png",iconCls:"remove"}]});Ext.define("flybox.view.state_locker.Form",{extend:"flybox.view.DeprisaForm",alias:"widget.formStateLocker",title:"Editar estado de casillero",object:"statesLocker",fields:[{xtype:"hiddenfield",name:"idstatelocker",value:0},{xtype:"textfield",name:"name",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Nombre"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.state_tracking.Grid",{extend:"flybox.view.DeprisaGrid",iconCls:"stateTracking",alias:"widget.listStatesTracking",title:"Listado estados de tracking",store:"StateTracking",columns:[{header:"ID",filter:"number",dataIndex:"idstatetracking"},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{header:"Grupo",filter:"string",dataIndex:"groupTracking",renderer:function(e){return e.name},flex:1},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:false,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",stopSelection:false,icon:"css/remove.png",iconCls:"remove"}]});Ext.define("flybox.view.state_tracking.Form",{extend:"flybox.view.DeprisaForm",alias:"widget.formStateTracking",title:"Editar estado de tracking",object:"statesTracking",fields:[{xtype:"hiddenfield",name:"idstatetracking",value:0},{xtype:"textfield",name:"name",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Nombre"},{xtype:"combo",name:"idgrouptracking",forceSelection:true,anchor:"90%",allowBlank:false,store:"GroupTracking",fieldLabel:"Grupo *",valueField:"idgrouptracking",displayField:"name",queryMode:"local"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.template.Grid",{extend:"flybox.view.DeprisaGrid",iconCls:"template",alias:"widget.listTemplates",title:"Listado de plantillas de correo",store:"Template",columns:[{header:"ID",filter:"number",dataIndex:"idtemplate"},{header:"Nombre",filter:"string",dataIndex:"name",flex:1},{header:"Contenido",dataIndex:"html",flex:3},{xtype:"actioncolumn",width:20,action:"fields",tooltip:"Campos",icon:"css/fieldTemplate.png",iconCls:"fieldTemplate",stopSelection:false},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",iconCls:"edit",stopSelection:false},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",icon:"css/remove.png",iconCls:"remove",stopSelection:false}]});Ext.define("flybox.view.template.Form",{extend:"flybox.view.DeprisaForm",alias:"widget.formTemplate",title:"Editar plantilla de correo",object:"templates",width:800,height:600,fields:[{xtype:"hiddenfield",name:"idtemplate",value:0},{xtype:"textfield",name:"name",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Nombre"},{xtype:"tinymce",fieldLabel:"* Contenido",name:"html",id:"tinymce_f",anchor:"90%",height:350}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.template.FormField",{extend:"flybox.view.DeprisaForm",alias:"widget.formFieldTemplate",title:"Editar campo",object:"fields",fields:[{xtype:"hiddenfield",name:"idfield",value:0},{xtype:"hiddenfield",name:"idtemplate",value:0},{xtype:"textfield",name:"name",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Nombre"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.template.Fields",{extend:"flybox.view.DeprisaGrid",iconCls:"fieldTemplate",alias:"widget.listFieldsTemplate",title:"Listado de campos",store:"FieldTemplate",columns:[{header:"ID",filter:"number",dataIndex:"idfield"},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",iconCls:"edit",stopSelection:false},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",icon:"css/remove.png",iconCls:"remove",stopSelection:false}]});Ext.define("flybox.view.type_id.Grid",{extend:"flybox.view.DeprisaGrid",iconCls:"typeID",alias:"widget.listTypesID",title:"Listado tipos de identificación",store:"TypeID",columns:[{header:"ID",filter:"number",dataIndex:"idtypeid"},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:false,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",stopSelection:false,icon:"css/remove.png",iconCls:"remove"}]});Ext.define("flybox.view.type_id.Form",{extend:"flybox.view.DeprisaForm",alias:"widget.formTypeID",title:"Editar tipo de identificación",object:"typesID",fields:[{xtype:"hiddenfield",name:"idtypeid",value:0},{xtype:"textfield",name:"name",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Nombre"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.type_locker.Grid",{extend:"flybox.view.DeprisaGrid",iconCls:"typeLocker",alias:"widget.listTypesLocker",title:"Listado tipos de casillero",store:"TypeLocker",columns:[{header:"ID",filter:"number",dataIndex:"idtypelocker"},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:false,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",stopSelection:false,icon:"css/remove.png",iconCls:"remove"}]});Ext.define("flybox.view.type_locker.Form",{extend:"flybox.view.DeprisaForm",alias:"widget.formTypeLocker",title:"Editar tipo de casillero",object:"typesLocker",fields:[{xtype:"hiddenfield",name:"idtypelocker",value:0},{xtype:"textfield",name:"name",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Nombre"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.type_package.Grid",{extend:"flybox.view.DeprisaGrid",iconCls:"typePackage",alias:"widget.listTypesPackage",title:"Listado tipos de paquete",store:"TypePackage",columns:[{header:"ID",filter:"number",dataIndex:"idtypepackage"},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{header:"Código",filter:"string",dataIndex:"code",flex:1},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:false,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",stopSelection:false,icon:"css/remove.png",iconCls:"remove"}]});Ext.define("flybox.view.type_package.Form",{extend:"flybox.view.DeprisaForm",alias:"widget.formTypePackage",title:"Editar tipo de paquete",object:"typesPackage",fields:[{xtype:"hiddenfield",name:"idtypepackage",value:0},{xtype:"textfield",name:"name",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Nombre"},{xtype:"numberfield",name:"code",hideTrigger:true,allowBlank:false,anchor:"90%",fieldLabel:"* Código"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.type_resource.Grid",{extend:"flybox.view.DeprisaGrid",iconCls:"typeResource",alias:"widget.listTypesResource",title:"Listado tipos de recursos",store:"TypeResource",columns:[{header:"ID",filter:"number",dataIndex:"idtyperesource"},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{header:"Carpeta",filter:"string",dataIndex:"folder",flex:3},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:false,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",icon:"css/remove.png",stopSelection:false,iconCls:"remove"}]});Ext.define("flybox.view.type_resource.Form",{extend:"flybox.view.DeprisaForm",alias:"widget.formTypeResource",title:"Editar tipo de recurso",object:"typesResource",fields:[{xtype:"hiddenfield",name:"idtyperesource",value:0},{xtype:"textfield",name:"name",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Nombre"},{xtype:"textfield",name:"folder",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Carpeta"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.type_ubication.Grid",{extend:"flybox.view.DeprisaGrid",iconCls:"typeUbication",alias:"widget.listTypesUbication",title:"Listado tipos de ubicación",store:"TypeUbication",columns:[{header:"ID",filter:"number",dataIndex:"idtypeubication"},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:false,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",stopSelection:false,icon:"css/remove.png",iconCls:"remove"}]});Ext.define("flybox.view.type_ubication.Form",{extend:"flybox.view.DeprisaForm",alias:"widget.formTypeUbication",title:"Editar tipo de ubicación",object:"typesUbication",fields:[{xtype:"hiddenfield",name:"idtypeubication",value:0},{xtype:"textfield",name:"name",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Nombre"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.user.Groups",{extend:"flybox.view.DeprisaItemSelector",alias:"widget.listGroupsUser",iconCls:"group",storeSource:"NoGroupsUser",storeFinish:"GroupsUser",columns:[{header:"ID",dataIndex:"idgroup"},{header:"Nombre",dataIndex:"name",flex:3},{header:"Activo",dataIndex:"active",renderer:function(e){if(e){return"Si"}else{return"No"}},flex:1}]});Ext.define("flybox.view.user.Grid",{extend:"flybox.view.DeprisaGrid",alias:"widget.listUsers",title:"Listado usuarios",store:"User",iconCls:"user",columns:[{header:"ID",filter:"number",dataIndex:"iduser"},{header:"Login",filter:"string",dataIndex:"login",flex:3},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{header:"Activo",dataIndex:"active",filter:"boolean",renderer:function(e){if(e){return"Si"}else{return"No"}},flex:1},{header:"Ultimo ingreso",dataIndex:"lastLogin",filter:{type:"date",fields:{lt:{text:"Antes de"},gt:{text:"Depués de "},eq:{text:"El día"}},dateFormat:"Y-m-d H:i:s"},flex:1,renderer:Ext.util.Format.dateRenderer("Y-m-d H:i:s")},{header:"Logeado",dataIndex:"logged",filter:"boolean",renderer:function(e){if(e){return"Si"}else{return"No"}},flex:1},{header:"Email",filter:"string",dataIndex:"email",flex:3},{xtype:"actioncolumn",width:20,action:"group",tooltip:"Grupos",icon:"css/group.png",stopSelection:false,iconCls:"group"},{xtype:"actioncolumn",width:20,action:"printer",tooltip:"Impresora",icon:"css/printer.png",stopSelection:false,iconCls:"printer"},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:false,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",icon:"css/remove.png",iconCls:"remove",stopSelection:false}]});Ext.define("flybox.view.user.FormPrinter",{extend:"flybox.view.DeprisaForm",alias:"widget.formPrinterUser",title:"Editar impresora usuario",object:"printerUser",fields:[{xtype:"hiddenfield",name:"iduser",value:0},{xtype:"combo",name:"idprinter",value:"",anchor:"90%",fieldLabel:"* Impresora",store:"Printer",queryMode:"local",valueField:"idprinter",displayField:"name",forceSelection:true,typeAHead:true}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.user.Form",{extend:"flybox.view.DeprisaForm",alias:"widget.formUser",title:"Editar usuario",object:"users",fields:[{xtype:"hiddenfield",name:"iduser",value:0},{xtype:"textfield",name:"login",vtype:"email",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Login"},{xtype:"textfield",name:"name",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Nombre"},{xtype:"combo",name:"active",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Activo",store:[[false,"No"],[true,"Si"]],forceSelection:true,queryMode:"local",typeAHead:true},{xtype:"textfield",name:"email",value:"",vtype:"email",allowBlank:false,anchor:"90%",fieldLabel:"* Email"}],buttons:[{text:"Cambiar contraseña",action:"changePass"},{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.warehouse.Ubications",{extend:"flybox.view.DeprisaGrid",iconCls:"ubication",alias:"widget.listUbications",title:"Listado ubicaciones en una bodega",store:"Ubication",columns:[{header:"ID",filter:"number",dataIndex:"idubication"},{header:"Código",filter:"string",dataIndex:"code",flex:1},{header:"Ancho",filter:"number",dataIndex:"width",flex:1},{header:"Alto",filter:"number",dataIndex:"height",flex:1},{header:"Profundo",filter:"number",dataIndex:"lenght",flex:1},{header:"Límite (%)",filter:"number",dataIndex:"limit",flex:1},{header:"Tipo ubicación",filter:"string",dataIndex:"typeUbication",renderer:function(e){return e.name},flex:1},{header:"Orden",filter:"number",dataIndex:"order",flex:1},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:false,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",stopSelection:false,icon:"css/remove.png",iconCls:"remove"}]});Ext.define("flybox.view.warehouse.Grid",{extend:"flybox.view.DeprisaGrid",iconCls:"wareHouse",alias:"widget.listWareHouses",title:"Listado bodegas",store:"WareHouse",columns:[{header:"ID",filter:"number",dataIndex:"idwarehouse"},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{header:"Límite (%)",filter:"number",dataIndex:"limit",flex:2},{header:"Orden",filter:"number",dataIndex:"order",flex:2},{xtype:"actioncolumn",width:20,action:"ubications",tooltip:"Ubicaciones",icon:"css/ubication.png",stopSelection:false,iconCls:"ubication"},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:false,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",stopSelection:false,icon:"css/remove.png",iconCls:"remove"}]});Ext.define("flybox.view.warehouse.FormUbication",{extend:"flybox.view.DeprisaForm",alias:"widget.formUbication",title:"Editar ubicación en la bodega",object:"ubications",fields:[{xtype:"hiddenfield",name:"idubication",value:0},{xtype:"hiddenfield",name:"idwarehouse",value:0},{xtype:"textfield",name:"code",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Código"},{xtype:"numberfield",hideTrigger:true,decimalPrecision:2,decimalSeparator:".",name:"width",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Ancho"},{xtype:"numberfield",hideTrigger:true,decimalPrecision:2,decimalSeparator:".",name:"height",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Alto"},{xtype:"numberfield",hideTrigger:true,decimalPrecision:2,decimalSeparator:".",name:"lenght",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Profundo"},{xtype:"numberfield",hideTrigger:true,name:"limit",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Límite (%)"},{xtype:"combo",name:"idtypeubication",anchor:"95%",store:"TypeUbication",forceSelection:true,allowBlank:false,fieldLabel:"* Tipo de ubicación",valueField:"idtypeubication",displayField:"name",queryMode:"local"},{xtype:"numberfield",hideTrigger:true,name:"order",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Orden"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.warehouse.Form",{extend:"flybox.view.DeprisaForm",alias:"widget.formWareHouse",title:"Editar bodega",object:"wareHouses",fields:[{xtype:"hiddenfield",name:"idwarehouse",value:0},{xtype:"textfield",name:"name",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Nombre"},{xtype:"numberfield",hideTrigger:true,name:"limit",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Límite (%)"},{xtype:"numberfield",hideTrigger:true,name:"order",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Orden"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.rejection_reason.Grid",{extend:"flybox.view.DeprisaGrid",iconCls:"rejectionReason",alias:"widget.listRejectionReasons",title:"Listado motivos de rechazo",store:"RejectionReason",columns:[{header:"ID",filter:"number",dataIndex:"idrejectionreason"},{header:"Nombre",filter:"string",dataIndex:"name",flex:3},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:false,iconCls:"edit"},{xtype:"actioncolumn",width:20,action:"remove",tooltip:"Eliminar",stopSelection:false,icon:"css/remove.png",iconCls:"remove"}]});Ext.define("flybox.view.rejection_reason.Form",{extend:"flybox.view.DeprisaForm",alias:"widget.formRejectionReason",title:"Editar motivo de rechazo",object:"rejectionReasons",fields:[{xtype:"hiddenfield",name:"idrejectionreason",value:0},{xtype:"textfield",name:"name",value:"",allowBlank:false,anchor:"90%",fieldLabel:"* Nombre"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.locker.Grid",{extend:"flybox.view.DeprisaGrid",iconCls:"locker",alias:"widget.listLockers",title:"Listado casilleros",store:"Locker",columns:[{header:"Casillero",filter:"number",dataIndex:"idlocker"},{header:"Usuario",filter:"string",dataIndex:"user",renderer:function(e){return e.name},flex:2},{header:"Email",filter:"string",dataIndex:"user",renderer:function(e){return e.email},flex:2},{header:"Tipo de casillero",filter:"string",dataIndex:"type",renderer:function(e){return e.name},flex:1},{header:"Estado",filter:"string",dataIndex:"stateLocker",renderer:function(e){return e.name},flex:1},{header:"Fecha creación",filter:"date",dataIndex:"dateAdded",filter:{type:"date",fields:{lt:{text:"Antes de"},gt:{text:"Depués de "},eq:{text:"El día"}},dateFormat:"Y-m-d H:i:s"},flex:1,renderer:Ext.util.Format.dateRenderer("Y-m-d H:i:s")},{header:"Fecha rechazo",filter:"date",dataIndex:"dateReject",filter:{type:"date",fields:{lt:{text:"Antes de"},gt:{text:"Depués de "},eq:{text:"El día"}},dateFormat:"Y-m-d H:i:s"},flex:1,renderer:Ext.util.Format.dateRenderer("Y-m-d H:i:s")},{header:"Motivo rechazo",filter:"string",dataIndex:"rejectionReason",renderer:function(e){return e.name},flex:1},{xtype:"actioncolumn",width:20,action:"user",tooltip:"Titular",icon:"css/user.png",iconCls:"user",stopSelection:false},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",iconCls:"edit",stopSelection:false}]});Ext.define("flybox.view.locker.Form",{extend:"flybox.view.DeprisaForm",iconCls:"edit",alias:"widget.formLocker",title:"Editar casillero",object:"lockers",fields:[{xtype:"hiddenfield",name:"idlocker",value:0},{xtype:"hiddenfield",name:"iduser",value:0},{xtype:"combo",anchor:"90%",name:"idtypelocker",forceSelection:true,allowBlank:false,store:"TypeLocker",fieldLabel:"Tipo de casillero *",valueField:"idtypelocker",displayField:"name",queryMode:"local",readOnly:true},{xtype:"textfield",name:"user",anchor:"90%",value:"",allowBlank:false,fieldLabel:"Cliente *",readOnly:true},{xtype:"datefield",name:"dateAdded",anchor:"90%",value:"",altFormats:"Y-m-d",format:"Y-m-d",submitFormat:"Y-m-d",allowBlank:false,fieldLabel:"Fecha creación *",readOnly:true},{xtype:"combo",name:"idstatelocker",anchor:"90%",forceSelection:true,allowBlank:false,store:"StateLocker",fieldLabel:"Estado *",valueField:"idstatelocker",displayField:"name",queryMode:"local"},{xtype:"datefield",name:"dateReject",value:"",anchor:"90%",altFormats:"Y-m-d",format:"Y-m-d",submitFormat:"Y-m-d",hidden:true,fieldLabel:"Fecha rechazo",readOnly:true},{xtype:"combo",name:"idrejectionreason",forceSelection:true,anchor:"90%",hidden:true,store:"RejectionReason",fieldLabel:"Motivo de rechazo *",valueField:"idrejectionreason",displayField:"name",queryMode:"local"},{xtype:"textfield",name:"comments",anchor:"90%",value:"",fieldLabel:"Comentarios"}],buttons:[{text:"Guardar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.define("flybox.view.picking.Grid",{extend:"flybox.view.DeprisaGrid",iconCls:"picking",alias:"widget.listPackagesPicking",title:"Listado de paquetes en picking",store:"Picking",columns:[{header:"ID",filter:"number",dataIndex:"idconsolidate"},{header:"Grupo",filter:"number",dataIndex:"idgroup",flex:2},{header:"Paquete",filter:"string",dataIndex:"tracking",flex:3},{header:"Casillero",filter:"number",dataIndex:"idlocker",flex:2},{header:"Ciudad",filter:"string",dataIndex:"cityDelivery",renderer:function(e){return e.name},flex:3},{header:"Dirección",filter:"string",dataIndex:"address",flex:3},{header:"Usuario asignado",filter:"string",dataIndex:"user",renderer:function(e){return e.name==""?"Ninguno":e.name},flex:3},{xtype:"actioncolumn",width:20,action:"edit",tooltip:"Editar",icon:"css/edit.png",stopSelection:false,iconCls:"edit"}]});Ext.define("flybox.view.picking.PackagePicking",{extend:"flybox.view.DeprisaForm",iconCls:"edit",alias:"widget.formPackagePicking",title:"Reasignar usuario a paquete en picking",width:600,object:"picking",fields:[{xtype:"hiddenfield",name:"idconsolidate",value:0},{xtype:"textfield",fieldLabel:"* Grupo de paquetes",readOnly:true,allowBlank:false,anchor:"90%",name:"idgroup",value:0},{xtype:"textfield",fieldLabel:"* Tracking paquete",readOnly:true,allowBlank:false,anchor:"90%",name:"tracking",value:0},{xtype:"textfield",fieldLabel:"* Casillero",readOnly:true,allowBlank:false,anchor:"90%",name:"idlocker",value:0},{xtype:"combo",name:"iduser",forceSelection:true,anchor:"90%",store:"UsersPicking",fieldLabel:"Usuario asignado *",valueField:"iduser",displayField:"name",queryMode:"local"}],buttons:[{text:"Reasignar",action:"save"},{text:"Cancelar",action:"cancel"}]});Ext.create("Ext.container.Viewport",{layout:"border",items:[{tbar:{defaults:{scale:"medium"},loader:{url:"menu.aspx",renderer:"component",autoLoad:true}},region:"center",autoScroll:true,id:"contenido",tabPosition:"bottom",xtype:"tabpanel",activeTab:0,items:[{title:"Productividad diaria",border:false,xtype:"panel",items:[{xtype:"panel",border:false,titleAlign:"center",flex:1,items:[{html:"Flybox"},{xtype:"chart",border:false,width:1e3,height:500,animate:true,store:"Productivity",shadow:true,legend:{position:"bottom"},axes:[{type:"numeric",position:"left",fields:["recibidos","ingresados","despachados"],grid:true,minimum:0,title:"Cantidad"},{type:"category",position:"bottom",fields:["name"],title:"Operador",label:{rotate:{degrees:315}}}],series:[{type:"column",axis:"left",label:{display:"insideEnd",stackedDisplay:"total",field:["recibidos","ingresados","despachados"],"text-anchor":"middle",renderer:Ext.util.Format.numberRenderer("0"),orientation:"vertical"},xField:"name",yField:["recibidos","ingresados","despachados"]}]}]}]}]},{region:"south",xtype:"panel",html:"<b>Deprisa &copy; - Una marca Avianca &copy;</b>"}]});Ext.getStore("Productivity").load()}})